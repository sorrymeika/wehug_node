!function(e,t){function n(e){return function(t){return{}.toString.call(t)=="[object "+e+"]"}}function m(){return d++}function y(e){return e.match(p)[0]}function _(e){for(e=e.replace(h,"/");e.match(f);)e=e.replace(f,"/");return e=e.replace(g,"$1/")}function b(e){var t=e.length-1,i=e.charAt(t);return"#"===i?e.substring(0,t):".js"===e.substring(t-2)||e.indexOf("?")>0||".css"===e.substring(t-3)||"/"===i?e:e+".js"}function x(e){var i,t=s.paths;return t&&(i=e.match(w))&&r(t[i[1]])&&(e=t[i[1]]+i[2]),e}function $(e){var t=s.vars;return t&&e.indexOf("{")>-1&&(e=e.replace(T,function(e,i){return r(t[i])?t[i]:e})),e}function q(e){var t=s.map,i=e;if(t)for(var n=0,a=t.length;a>n;n++){var r=t[n];if(i=o(r)?r(e)||e:e.replace(r[0],r[1]),i!==e)break}return i}function M(e,t){var i,n=e.charAt(0);if(j.test(e))i=e;else if("."===n)i=_((t?y(t):s.cwd)+e);else if("/"===n){var a=s.cwd.match(E);i=a?a[0]+e.substring(1):e}else i=s.base+e;return 0===i.indexOf("//")&&(i=location.protocol+i),i}function N(e,t){if(!e)return"";var i=s.alias&&s.alias[e];i&&r(i)&&(e=i),e=x(e),e=$(e),e=b(e);var n=M(e,t);return n=q(n),!i||W[n]||r(i)||(W[n]={exports:i,status:ee.EXECUTED,exec:te.prototype.exec}),n}function I(e){return e.hasAttribute?e.src:e.getAttribute("src",4)}function G(e,t,i,s){var n=S.test(e),a=D.createElement(n?"link":"script");i&&(a.charset=i),c(s)||a.setAttribute("crossorigin",s),n?t():P(a,t,n,e),n?(a.rel="stylesheet",a.href=e):(a.async=!0,a.src=e),O=a,U?H.insertBefore(a,U):H.appendChild(a),O=null}function P(e,t,i,n){function r(){e.onload=e.onerror=e.onreadystatechange=null,i||s.debug||H.removeChild(e),e=null,t()}var a="onload"in e;a?(e.onload=r,e.onerror=function(){v("error",{uri:n,node:e}),r()}):e.onreadystatechange=function(){/loaded|complete/.test(e.readyState)&&r()}}function V(){if(O)return O;if(R&&"interactive"===R.readyState)return R;for(var e=H.getElementsByTagName("script"),t=e.length-1;t>=0;t--){var i=e[t];if("interactive"===i.readyState)return R=i}}function K(e){var t=[];return e.replace(z,"").replace(B,function(e,i,s){s&&t.push(s)}),t}function te(e,t){this.uri=e,this.dependencies=t||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!e.seajs){var i=e.seajs={version:"2.2.3"},s=i.data={},a=n("Object"),r=n("String"),l=Array.isArray||n("Array"),o=n("Function"),c=n("Undefined"),d=0,u=s.events={};i.on=function(e,t){var s=u[e]||(u[e]=[]);return s.push(t),i},i.off=function(e,t){if(!e&&!t)return u=s.events={},i;var n=u[e];if(n)if(t)for(var a=n.length-1;a>=0;a--)n[a]===t&&n.splice(a,1);else delete u[e];return i};var v=i.emit=function(e,t){var n,s=u[e];if(s)for(s=s.slice();n=s.shift();)n(t);return i},p=/[^?#]*\//,h=/\/\.\//g,f=/\/[^\/]+\/\.\.\//,g=/([^:\/])\/\//g,w=/^([^\/:]+)(\/.+)$/,T=/{([^{]+)}/g,j=/^\/\/.|:\//,E=/^.*?\/\/.*?\//,D=document,C=y(D.URL),A=D.scripts,L=D.getElementById("seajsnode")||A[A.length-1],k=y(I(L)||C);i.resolve=N;var O,R,H=D.head||D.getElementsByTagName("head")[0]||D.documentElement,U=H.getElementsByTagName("base")[0],S=/\.css(?:\?|$)/i;+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;i.request=G;var J,B=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,z=/\\\\/g,W=i.cache={},Y={},Q={},Z={},ee=te.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};te.prototype.resolve=function(){for(var e=this,t=e.dependencies,i=[],s=0,n=t.length;n>s;s++)i[s]=te.resolve(t[s],e.uri);return i},te.prototype.load=function(){var e=this;if(!(e.status>=ee.LOADING)){e.status=ee.LOADING;var t=e.resolve();v("load",t);for(var s,i=e._remain=t.length,n=0;i>n;n++)s=te.get(t[n]),s.status<ee.LOADED?s._waitings[e.uri]=(s._waitings[e.uri]||0)+1:e._remain--;if(0===e._remain)return void e.onload();var a={};for(n=0;i>n;n++)s=W[t[n]],s.status<ee.FETCHING?s.fetch(a):s.status===ee.SAVED&&s.load();for(var r in a)a.hasOwnProperty(r)&&a[r]()}},te.prototype.onload=function(){var e=this;e.status=ee.LOADED,e.callback&&e.callback();var i,s,t=e._waitings;for(i in t)t.hasOwnProperty(i)&&(s=W[i],s._remain-=t[i],0===s._remain&&s.onload());delete e._waitings,delete e._remain},te.prototype.fetch=function(e){function l(){i.request(a.requestUri,a.onRequest,a.charset,a.crossorigin)}function c(){delete Y[r],Q[r]=!0,J&&(te.save(n,J),J=null);var e,t=Z[r];for(delete Z[r];e=t.shift();)e.load()}var t=this,n=t.uri;t.status=ee.FETCHING;var a={uri:n};v("fetch",a);var r=a.requestUri||n;return!r||Q[r]?void t.load():Y[r]?void Z[r].push(t):(Y[r]=!0,Z[r]=[t],v("request",a={uri:n,requestUri:r,onRequest:c,charset:o(s.charset)?s.charset(r):s.charset,crossorigin:o(s.crossorigin)?s.crossorigin(r):s.crossorigin}),void(a.requested||(e?e[a.requestUri]=l:l())))},te.prototype.exec=function(){function s(e){return te.get(s.resolve(e)).exec()}var e=this;if(e.status>=ee.EXECUTING)return e.exports;e.status=ee.EXECUTING;var i=e.uri;s.resolve=function(e){return te.resolve(e,i)},s.async=function(e,t){return te.use(e,t,i+"_async_"+m()),s};var n=e.factory,a=o(n)?n(s,e.exports={},e):n;return a===t&&(a=e.exports),delete e.factory,e.exports=a,e.status=ee.EXECUTED,v("exec",e),a},te.resolve=function(e,t){var s={id:e,refUri:t};return v("resolve",s),s.uri||i.resolve(s.id,t)},te.define=function(e,i,s){var n=arguments.length;1===n?(s=e,e=t):2===n&&(s=i,l(e)?(i=e,e=t):i=t),!l(i)&&o(s)&&(i=K(s.toString()));var a={id:e,uri:te.resolve(e),deps:i,factory:s};if(!a.uri&&D.attachEvent){var r=V();r&&(a.uri=r.src.replace(/\?.*/g,""))}v("define",a),a.uri?te.save(a.uri,a):J=a},te.save=function(e,t){var i=te.get(e);i.status<ee.SAVED&&(i.id=t.id||e,i.dependencies=t.deps||[],i.factory=t.factory,i.status=ee.SAVED)},te.get=function(e,t){return W[e]||(W[e]=new te(e,t))},te.use=function(t,i,s){var n=te.get(s,l(t)?t:[t]);n.callback=function(){for(var t=[],s=n.resolve(),a=0,r=s.length;r>a;a++)t[a]=W[s[a]].exec();i&&i.apply(e,t),delete n.callback},n.load()},te.preload=function(e){var t=s.preload,i=t.length;i?te.use(t,function(){t.splice(0,i),te.preload(e)},s.cwd+"_preload_"+m()):e()},i.use=function(e,t){return te.preload(function(){te.use(e,t,s.cwd+"_use_"+m())}),i},te.define.cmd={},e.define=te.define,i.Module=te,s.fetchedList=Q,s.cid=m,i.require=function(e){var t=te.get(te.resolve(e));return t.status<ee.EXECUTING&&(t.onload(),t.exec()),t.exports};var ie=/^(.+?\/)(\?\?)?(seajs\/)+/;s.base=(k.match(ie)||["",k])[1],s.dir=k,s.cwd=C,s.charset="utf-8",s.preload=function(){var e=[],t=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return t+=" "+D.cookie,t.replace(/(seajs-\w+)=1/g,function(t,i){e.push(i)}),e}(),i.config=function(e){for(var t in e){var n=e[t],r=s[t];if(r&&a(r))for(var o in n)r[o]=n[o];else l(r)?n=r.concat(n):"base"===t&&("/"!==n.slice(-1)&&(n+="/"),n=M(n)),s[t]=n}return v("config",e),i}}}(this);var Zepto=function(){function A(t){return null==t?String(t):T[E.call(t)]||"object"}function D(t){return"function"==A(t)}function L(t){return null!=t&&t==t.window}function M(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function O(t){return"object"==A(t)}function P(t){return O(t)&&!L(t)&&Object.getPrototypeOf(t)==Object.prototype}function k(t){return"number"==typeof t.length}function I(t){return a.call(t,function(t){return null!=t})}function H(t){return t.length>0?n.fn.concat.apply([],t):t}function R(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(t){return t in l?l[t]:l[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function F(t,e){return"number"!=typeof e||u[R(t)]?e:e+"px"}function Z(t){var e,n;return c[t]||(e=o.createElement(t),o.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),c[t]=n),c[t]}function z(t){return"children"in t?s.call(t.children):n.map(t.childNodes,function(t){return 1==t.nodeType?t:void 0})}function V(n,i,r){for(e in i)r&&(P(i[e])||q(i[e]))?(P(i[e])&&!P(n[e])&&(n[e]={}),q(i[e])&&!q(n[e])&&(n[e]=[]),V(n[e],i[e],r)):i[e]!==t&&(n[e]=i[e])}function X(t,e){return null==e?n(t):n(t).filter(e)}function B(t,e,n,i){return D(e)?e.call(t,n,i):e}function G(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function J(e,n){var i=e.className,r=i&&i.baseVal!==t;return n===t?r?i.baseVal:i:void(r?i.baseVal=n:e.className=n)}function W(t){var e;try{return t?"true"==t||("false"==t?!1:"null"==t?null:/^0/.test(t)||isNaN(e=Number(t))?/^[\[\{]/.test(t)?n.parseJSON(t):t:e):t}catch(i){return t}}function Y(t,e){e(t);for(var n in t.childNodes)Y(t.childNodes[n],e)}var t,e,n,i,N,C,r=[],s=r.slice,a=r.filter,o=window.document,c={},l={},u={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},d=/^\s*<(\w+|!)[^>]*>/,f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,h=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,p=/^(?:body|html)$/i,m=/([A-Z])/g,v=["val","css","html","text","data","width","height","offset"],g=["after","prepend","before","append"],y=o.createElement("table"),b=o.createElement("tr"),_={tr:o.createElement("tbody"),tbody:y,thead:y,tfoot:y,td:b,th:b,"*":o.createElement("div")},w=/complete|loaded|interactive/,x=/^[\w-]*$/,T={},E=T.toString,j={},$=o.createElement("div"),S={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},q=Array.isArray||function(t){return t instanceof Array};return j.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var i,r=t.parentNode,s=!r;return s&&(r=$).appendChild(t),i=~j.qsa(r,e).indexOf(t),s&&$.removeChild(t),i},N=function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},C=function(t){return a.call(t,function(e,n){return t.indexOf(e)==n})},j.fragment=function(e,i,r){var a,c,l;return f.test(e)&&(a=n(o.createElement(RegExp.$1))),a||(e.replace&&(e=e.replace(h,"<$1></$2>")),i===t&&(i=d.test(e)&&RegExp.$1),i in _||(i="*"),l=_[i],l.innerHTML=""+e,a=n.each(s.call(l.childNodes),function(){l.removeChild(this)})),P(r)&&(c=n(a),n.each(r,function(t,e){v.indexOf(t)>-1?c[t](e):c.attr(t,e)})),a},j.Z=function(t,e){return t=t||[],t.__proto__=n.fn,t.selector=e||"",t},j.isZ=function(t){return t instanceof j.Z},j.init=function(e,i){var r;if(!e)return j.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&d.test(e))r=j.fragment(e,RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=j.qsa(o,e)}else{if(D(e))return n(o).ready(e);if(j.isZ(e))return e;if(q(e))r=I(e);else if(O(e))r=[e],e=null;else if(d.test(e))r=j.fragment(e.trim(),RegExp.$1,i),e=null;else{if(i!==t)return n(i).find(e);r=j.qsa(o,e)}}return j.Z(r,e)},n=function(t,e){return j.init(t,e)},n.extend=function(t){var e,n=s.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach(function(n){V(t,n,e)}),t},j.qsa=function(t,e){var n,i="#"==e[0],r=!i&&"."==e[0],a=i||r?e.slice(1):e,o=x.test(a);return M(t)&&o&&i?(n=t.getElementById(a))?[n]:[]:1!==t.nodeType&&9!==t.nodeType?[]:s.call(o&&!i?r?t.getElementsByClassName(a):t.getElementsByTagName(e):t.querySelectorAll(e))},n.contains=function(t,e){return t!==e&&t.contains(e)},n.type=A,n.isFunction=D,n.isWindow=L,n.isArray=q,n.isPlainObject=P,n.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},n.inArray=function(t,e,n){return r.indexOf.call(e,t,n)},n.camelCase=N,n.trim=function(t){return null==t?"":String.prototype.trim.call(t)},n.uuid=0,n.support={},n.expr={},n.map=function(t,e){var n,r,s,i=[];if(k(t))for(r=0;r<t.length;r++)n=e(t[r],r),null!=n&&i.push(n);else for(s in t)n=e(t[s],s),null!=n&&i.push(n);return H(i)},n.each=function(t,e){var n,i;if(k(t)){for(n=0;n<t.length;n++)if(e.call(t[n],n,t[n])===!1)return t}else for(i in t)if(e.call(t[i],i,t[i])===!1)return t;return t},n.grep=function(t,e){return a.call(t,e)},window.JSON&&(n.parseJSON=JSON.parse),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){T["[object "+e+"]"]=e.toLowerCase()}),n.fn={forEach:r.forEach,reduce:r.reduce,push:r.push,sort:r.sort,indexOf:r.indexOf,concat:r.concat,map:function(t){return n(n.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return n(s.apply(this,arguments))},ready:function(t){return w.test(o.readyState)&&o.body?t(n):o.addEventListener("DOMContentLoaded",function(){t(n)},!1),this},get:function(e){return e===t?s.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(t){return r.every.call(this,function(e,n){return t.call(e,n,e)!==!1}),this},filter:function(t){return D(t)?this.not(this.not(t)):n(a.call(this,function(e){return j.matches(e,t)}))},add:function(t,e){return n(C(this.concat(n(t,e))))},is:function(t){return this.length>0&&j.matches(this[0],t)},not:function(e){var i=[];if(D(e)&&e.call!==t)this.each(function(t){e.call(this,t)||i.push(this)});else{var r="string"==typeof e?this.filter(e):k(e)&&D(e.item)?s.call(e):n(e);this.forEach(function(t){r.indexOf(t)<0&&i.push(t)})}return n(i)},has:function(t){return this.filter(function(){return O(t)?n.contains(this,t):n(this).find(t).size()})},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!O(t)?t:n(t)},last:function(){var t=this[this.length-1];return t&&!O(t)?t:n(t)},find:function(t){var e,i=this;return e="object"==typeof t?n(t).filter(function(){var t=this;return r.some.call(i,function(e){return n.contains(e,t)})}):1==this.length?n(j.qsa(this[0],t)):this.map(function(){return j.qsa(this,t)})},closest:function(t,e){var i=this[0],r=!1;for("object"==typeof t&&(r=n(t));i&&!(r?r.indexOf(i)>=0:j.matches(i,t));)i=i!==e&&!M(i)&&i.parentNode;return n(i)},parents:function(t){for(var e=[],i=this;i.length>0;)i=n.map(i,function(t){return(t=t.parentNode)&&!M(t)&&e.indexOf(t)<0?(e.push(t),t):void 0});return X(e,t)},parent:function(t){return X(C(this.pluck("parentNode")),t)},children:function(t){return X(this.map(function(){return z(this)}),t)},contents:function(){return this.map(function(){return s.call(this.childNodes)})},siblings:function(t){return X(this.map(function(t,e){return a.call(z(e.parentNode),function(t){return t!==e})}),t)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(t){return n.map(this,function(e){return e[t]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=Z(this.nodeName))})},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=D(t);if(this[0]&&!e)var i=n(t).get(0),r=i.parentNode||this.length>1;return this.each(function(s){n(this).wrapAll(e?t.call(this,s):r?i.cloneNode(!0):i)})},wrapAll:function(t){if(this[0]){n(this[0]).before(t=n(t));for(var e;(e=t.children()).length;)t=e.first();n(t).append(this)}return this},wrapInner:function(t){var e=D(t);return this.each(function(i){var r=n(this),s=r.contents(),a=e?t.call(this,i):t;s.length?s.wrapAll(a):r.append(a)})},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var i=n(this);(e===t?"none"==i.css("display"):e)?i.show():i.hide()})},prev:function(t){return n(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return n(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(e){var i=this.innerHTML;n(this).empty().append(B(this,t,e,i))})},text:function(e){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=e===t?"":""+e})},attr:function(n,i){var r;return"string"==typeof n&&i===t?0==this.length||1!==this[0].nodeType?t:"value"==n&&"INPUT"==this[0].nodeName?this.val():!(r=this[0].getAttribute(n))&&n in this[0]?this[0][n]:r:this.each(function(t){if(1===this.nodeType)if(O(n))for(e in n)G(this,e,n[e]);else G(this,n,B(this,i,t,this.getAttribute(n)))})},removeAttr:function(t){return this.each(function(){1===this.nodeType&&G(this,t)})},prop:function(e,n){return e=S[e]||e,n===t?this[0]&&this[0][e]:this.each(function(t){this[e]=B(this,n,t,this[e])})},data:function(e,n){e="data-"+e.replace(m,"-$1").toLowerCase();var i=this[0];if(i._data_cache||(i._data_cache={}),n===t){var r=i._data_cache[e]||(i._data_cache[e]=W(i.getAttribute(e)));return r}return i._data_cache[e]=n,D(n)||j.isZ(n)?this:this.attr(e,n)},val:function(t){return 0===arguments.length?this[0]&&(this[0].multiple?n(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(e){this.value=B(this,t,e,this.value)})},offset:function(t){if(t)return this.each(function(e){var i=n(this),r=B(this,t,e,i.offset()),s=i.offsetParent().offset(),a={top:r.top-s.top,left:r.left-s.left};"static"==i.css("position")&&(a.position="relative"),i.css(a)});if(0==this.length)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:Math.round(e.width),height:Math.round(e.height)}},css:function(t,i){if(arguments.length<2){var r=this[0],s=getComputedStyle(r,"");if(!r)return;if("string"==typeof t)return r.style[N(t)]||s.getPropertyValue(t);if(q(t)){var a={};return n.each(q(t)?t:[t],function(t,e){a[e]=r.style[N(e)]||s.getPropertyValue(e)}),a}}var o="";if("string"==A(t))i||0===i?o=R(t)+":"+F(t,i):this.each(function(){this.style.removeProperty(R(t))});else for(e in t)t[e]||0===t[e]?o+=R(e)+":"+F(e,t[e])+";":this.each(function(){this.style.removeProperty(R(e))});return this.each(function(){this.style.cssText+=";"+o})},index:function(t){return t?this.indexOf(n(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return t?r.some.call(this,function(t){return this.test(J(t))},U(t)):!1},addClass:function(t){return t?this.each(function(e){i=[];var r=J(this),s=B(this,t,e,r);s.split(/\s+/g).forEach(function(t){n(this).hasClass(t)||i.push(t)},this),i.length&&J(this,r+(r?" ":"")+i.join(" "))}):this},removeClass:function(e){return this.each(function(n){return e===t?J(this,""):(i=J(this),B(this,e,n,i).split(/\s+/g).forEach(function(t){i=i.replace(U(t)," ")}),void J(this,i.trim()))})},toggleClass:function(e,i){return e?this.each(function(r){var s=n(this),a=B(this,e,r,J(this));a.split(/\s+/g).forEach(function(e){(i===t?!s.hasClass(e):i)?s.addClass(e):s.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n="scrollTop"in this[0];return e===t?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n="scrollLeft"in this[0];return e===t?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),i=this.offset(),r=p.test(e[0].nodeName)?{top:0,left:0}:e.offset();return i.top-=parseFloat(n(t).css("margin-top"))||0,i.left-=parseFloat(n(t).css("margin-left"))||0,r.top+=parseFloat(n(e[0]).css("border-top-width"))||0,r.left+=parseFloat(n(e[0]).css("border-left-width"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||o.body;t&&!p.test(t.nodeName)&&"static"==n(t).css("position");)t=t.offsetParent;return t})}},n.fn.detach=n.fn.remove,["width","height"].forEach(function(e){var i=e.replace(/./,function(t){return t[0].toUpperCase()});n.fn[e]=function(r){var s,a=this[0];return r===t?L(a)?a["inner"+i]:M(a)?a.documentElement["scroll"+i]:(s=this.offset())&&s[e]:this.each(function(t){a=n(this),a.css(e,B(this,r,t,a[e]()))})}}),g.forEach(function(t,e){var i=e%2;n.fn[t]=function(){var t,s,r=n.map(arguments,function(e){return t=A(e),"object"==t||"array"==t||null==e?e:j.fragment(e)}),a=this.length>1;return r.length<1?this:this.each(function(t,o){s=i?o:o.parentNode,o=0==e?o.nextSibling:1==e?o.firstChild:2==e?o:null,r.forEach(function(t){if(a)t=t.cloneNode(!0);else if(!s)return n(t).remove();Y(s.insertBefore(t,o),function(t){null==t.nodeName||"SCRIPT"!==t.nodeName.toUpperCase()||t.type&&"text/javascript"!==t.type||t.src||window.eval.call(window,t.innerHTML)})})})},n.fn[i?t+"To":"insert"+(e?"Before":"After")]=function(e){return n(e)[t](this),this}}),j.Z.prototype=n.fn,j.uniq=C,j.deserializeValue=W,n.zepto=j,n}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(t){function d(t){return t._zid||(t._zid=e++)}function f(t,e,n,i){if(e=h(e),e.ns)var r=p(e.ns);return(a[d(t)]||[]).filter(function(t){return!(!t||e.e&&t.e!=e.e||e.ns&&!r.test(t.ns)||n&&d(t.fn)!==d(n)||i&&t.sel!=i)})}function h(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function p(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function m(t,e){return t.del&&!c&&t.e in l||!!e}function v(t){return u[t]||c&&l[t]||t}function g(e,i,r,s,o,c,l){var f=d(e),p=a[f]||(a[f]=[]);i.split(/\s/).forEach(function(i){if("ready"==i)return t(document).ready(r);var a=h(i);a.fn=r,a.sel=o,a.e in u&&(r=function(e){var n=e.relatedTarget;return!n||n!==this&&!t.contains(this,n)?a.fn.apply(this,arguments):void 0}),a.del=c;var d=c||r;a.proxy=function(t){if(t=T(t),!t.isImmediatePropagationStopped()){t.data=s;var i=d.apply(e,t._args==n?[t]:[t].concat(t._args));return i===!1&&(t.preventDefault(),t.stopPropagation()),i}},a.i=p.length,p.push(a),"addEventListener"in e&&e.addEventListener(v(a.e),a.proxy,m(a,l))})}function y(t,e,n,i,r){var s=d(t);(e||"").split(/\s/).forEach(function(e){f(t,e,n,i).forEach(function(e){delete a[s][e.i],"removeEventListener"in t&&t.removeEventListener(v(e.e),e.proxy,m(e,r))})})}function T(e,i){return(i||!e.isDefaultPrevented)&&(i||(i=e),t.each(x,function(t,n){var r=i[t];e[t]=function(){return this[n]=b,r&&r.apply(i,arguments)},e[n]=_}),(i.defaultPrevented!==n?i.defaultPrevented:"returnValue"in i?i.returnValue===!1:i.getPreventDefault&&i.getPreventDefault())&&(e.isDefaultPrevented=b)),e}function E(t){var e,i={originalEvent:t};for(e in t)w.test(e)||t[e]===n||(i[e]=t[e]);return T(i,t)}var n,e=1,i=Array.prototype.slice,r=t.isFunction,s=function(t){return"string"==typeof t},a={},o={},c="onfocusin"in window,l={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",t.event={add:g,remove:y},t.proxy=function(e,n){if(r(e)){var i=function(){return e.apply(n,arguments)};return i._zid=d(e),i}if(s(n))return t.proxy(e[n],e);throw new TypeError("expected function")},t.fn.bind=function(t,e,n){return this.on(t,e,n)},t.fn.unbind=function(t,e){return this.off(t,e)},t.fn.one=function(t,e,n,i){return this.on(t,e,n,i,1)};var b=function(){return!0},_=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,x={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};t.fn.delegate=function(t,e,n){return this.on(e,t,n)},t.fn.undelegate=function(t,e,n){return this.off(e,t,n)},t.fn.live=function(e,n){return t(document.body).delegate(this.selector,e,n),this},t.fn.die=function(e,n){return t(document.body).undelegate(this.selector,e,n),this},t.fn.on=function(e,a,o,c,l){var u,d,f=this;return e&&!s(e)?(t.each(e,function(t,e){f.on(t,a,o,e,l)}),f):(s(a)||r(c)||c===!1||(c=o,o=a,a=n),(r(o)||o===!1)&&(c=o,o=n),c===!1&&(c=_),f.each(function(n,r){l&&(u=function(t){return y(r,t.type,c),c.apply(this,arguments)}),a&&(d=function(e){var n,s=t(e.target).closest(a,r).get(0);return s&&s!==r?(n=t.extend(E(e),{currentTarget:s,liveFired:r}),(u||c).apply(s,[n].concat(i.call(arguments,1)))):void 0}),g(r,e,c,o,a,d||u)}))},t.fn.off=function(e,i,a){var o=this;return e&&!s(e)?(t.each(e,function(t,e){o.off(t,i,e)}),o):(s(i)||r(a)||a===!1||(a=i,i=n),a===!1&&(a=_),o.each(function(){y(this,e,a,i)}))},t.fn.trigger=function(e,n){return e=s(e)||t.isPlainObject(e)?t.Event(e):T(e),e._args=n,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(e):t(this).triggerHandler(e,n)})},t.fn.triggerHandler=function(e,n){var i,r;return this.each(function(a,o){i=E(s(e)?t.Event(e):e),i._args=n,i.target=o,t.each(f(o,e.type||e),function(t,e){return r=e.proxy(i),i.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.trigger(e)}}),["focus","blur"].forEach(function(e){t.fn[e]=function(t){return t?this.bind(e,t):this.each(function(){try{this[e]()}catch(t){}}),this}}),t.Event=function(t,e){s(t)||(e=t,t=e.type);var n=document.createEvent(o[t]||"Events"),i=!0;if(e)for(var r in e)"bubbles"==r?i=!!e[r]:n[r]=e[r];return n.initEvent(t,i,!0),T(n)}}(Zepto),function(t){function d(e,n,i){var r=t.Event(n);return t(e).trigger(r,i),!r.isDefaultPrevented()}function f(t,e,i,r){return t.global?d(e||n,i,r):void 0}function h(e){e.global&&0===t.active++&&f(e,null,"ajaxStart")}function p(e){e.global&&!--t.active&&f(e,null,"ajaxStop")}function m(t,e){var n=e.context;return e.beforeSend.call(n,t,e)===!1||f(e,n,"ajaxBeforeSend",[t,e])===!1?!1:void f(e,n,"ajaxSend",[t,e])}function v(t,e,n,i){var r=n.context,s="success";n.success.call(r,t,s,e),i&&i.resolveWith(r,[t,s,e]),f(n,r,"ajaxSuccess",[e,n,t]),y(s,e,n)}function g(t,e,n,i,r){var s=i.context;i.error.call(s,n,e,t),r&&r.rejectWith(s,[n,e,t]),f(i,s,"ajaxError",[n,i,t||e]),y(e,n,i)}function y(t,e,n){var i=n.context;n.complete.call(i,e,t),f(n,i,"ajaxComplete",[e,n]),p(n)}function b(){}function _(t){return t&&(t=t.split(";",2)[0]),t&&(t==l?"html":t==c?"json":a.test(t)?"script":o.test(t)&&"xml")||"text"}function w(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function x(e){e.processData&&e.data&&"string"!=t.type(e.data)&&(e.data=t.param(e.data,e.traditional)),!e.data||e.type&&"GET"!=e.type.toUpperCase()||(e.url=w(e.url,e.data),e.data=void 0)}function T(e,n,i,r){return t.isFunction(n)&&(r=i,i=n,n=void 0),t.isFunction(i)||(r=i,i=void 0),{url:e,data:n,success:i,dataType:r}}function j(e,n,i,r){var s,a=t.isArray(n),o=t.isPlainObject(n);t.each(n,function(n,c){s=t.type(c),r&&(n=i?r:r+"["+(o||"object"==s||"array"==s?n:"")+"]"),!r&&a?e.add(c.name,c.value):"array"==s||!i&&"object"==s?j(e,c,i,n):e.add(n,c)})}var i,r,e=0,n=window.document,s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,o=/^(?:text|application)\/xml/i,c="application/json",l="text/html",u=/^\s*$/;t.active=0,t.ajaxJSONP=function(i,r){if(!("type"in i))return t.ajax(i);var l,f,s=i.jsonpCallback,a=(t.isFunction(s)?s():s)||"jsonp"+ ++e,o=n.createElement("script"),c=window[a],u=function(e){t(o).triggerHandler("error",e||"abort")},d={abort:u};return r&&r.promise(d),t(o).on("load error",function(e,n){clearTimeout(f),t(o).off().remove(),"error"!=e.type&&l?v(l[0],d,i,r):g(null,n||"error",d,i,r),window[a]=c,l&&t.isFunction(c)&&c(l[0]),c=l=void 0}),m(d,i)===!1?(u("abort"),d):(window[a]=function(){l=arguments},o.src=i.url.replace(/\?(.+)=\?/,"?$1="+a),n.head.appendChild(o),i.timeout>0&&(f=setTimeout(function(){u("timeout")},i.timeout)),d)},t.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:c,xml:"application/xml, text/xml",html:l,text:"text/plain"},crossDomain:!0,timeout:0,processData:!0,cache:!0},t.ajax=function(e){var n=t.extend({},e||{}),s=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)void 0===n[i]&&(n[i]=t.ajaxSettings[i]);h(n),n.crossDomain||(n.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(n.url)&&RegExp.$2!=window.location.host),n.url||(n.url=window.location.toString()),x(n),n.cache===!1&&(n.url=w(n.url,"_="+Date.now()));var a=n.dataType,o=/\?.+=\?/.test(n.url);if("jsonp"==a||o)return o||(n.url=w(n.url,n.jsonp?n.jsonp+"=?":n.jsonp===!1?"":"callback=?")),t.ajaxJSONP(n,s);var T,c=n.accepts[a],l={},d=function(t,e){l[t.toLowerCase()]=[t,e]},f=/^([\w-]+:)\/\//.test(n.url)?RegExp.$1:window.location.protocol,p=n.xhr(),y=p.setRequestHeader;if(s&&s.promise(p),n.crossDomain||d("X-Requested-With","XMLHttpRequest"),d("Accept",c||"*/*"),(c=n.mimeType||c)&&(c.indexOf(",")>-1&&(c=c.split(",",2)[0]),p.overrideMimeType&&p.overrideMimeType(c)),(n.contentType||n.contentType!==!1&&n.data&&"GET"!=n.type.toUpperCase())&&d("Content-Type",n.contentType||"application/x-www-form-urlencoded"),n.headers)for(r in n.headers)d(r,n.headers[r]);if(p.setRequestHeader=d,p.onreadystatechange=function(){if(4==p.readyState){p.onreadystatechange=b,clearTimeout(T);var e,i=!1;if(p.status>=200&&p.status<300||304==p.status||0==p.status&&"file:"==f){a=a||_(n.mimeType||p.getResponseHeader("content-type")),e=p.responseText;try{"script"==a?(1,eval)(e):"xml"==a?e=p.responseXML:"json"==a&&(e=u.test(e)?null:t.parseJSON(e))}catch(r){i=r}i?g(i,"parsererror",p,n,s):v(e,p,n,s)}else g(p.statusText||null,p.status?"error":"abort",p,n,s)}},m(p,n)===!1)return p.abort(),g(null,"abort",p,n,s),p;if(n.xhrFields)for(r in n.xhrFields)p[r]=n.xhrFields[r];var E="async"in n?n.async:!0;p.open(n.type,n.url,E,n.username,n.password);for(r in l)y.apply(p,l[r]);return n.timeout>0&&(T=setTimeout(function(){p.onreadystatechange=b,p.abort(),g(null,"timeout",p,n,s)},n.timeout)),p.send(n.data?n.data:null),p},t.get=function(){return t.ajax(T.apply(null,arguments))},t.post=function(){var e=T.apply(null,arguments);return e.type="POST",t.ajax(e)},t.getJSON=function(){var e=T.apply(null,arguments);return e.dataType="json",t.ajax(e)},t.fn.load=function(e,n,i){if(!this.length)return this;var o,r=this,a=e.split(/\s/),c=T(e,n,i),l=c.success;return a.length>1&&(c.url=a[0],o=a[1]),c.success=function(e){r.html(o?t("<div>").html(e.replace(s,"")).find(o):e),l&&l.apply(r,arguments)},t.ajax(c),this};var E=encodeURIComponent;t.param=function(t,e){var n=[];return n.add=function(t,e){this.push(E(t)+"="+E(e))},j(n,t,e),n.join("&").replace(/%20/g,"+")}}(Zepto),function(t){t.fn.serializeArray=function(){var n,e=[];return t([].slice.call(this.get(0).elements)).each(function(){n=t(this);var i=n.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=i&&"reset"!=i&&"button"!=i&&("radio"!=i&&"checkbox"!=i||this.checked)&&e.push({name:n.attr("name"),value:n.val()})}),e},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach(function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(e,n){return e=e||[],t.extend(e,t.fn),e.selector=n||"",e.__Z=!0,e},isZ:function(e){return"array"===t.type(e)&&"__Z"in e}});try{getComputedStyle(void 0)}catch(e){var n=getComputedStyle;window.getComputedStyle=function(t){try{return n(t)}catch(e){return null}}}}(Zepto),define&&define("zepto",[],function(){return Zepto});!function(t){function c(t,e,n,i){return Math.abs(t-e)>=Math.abs(n-i)?t-e>0?"Left":"Right":n-i>0?"Up":"Down"}function l(){if(a=null,e.last){var n=t.Event("longTap");n.cancelTouch=d,e.el.trigger(n)}}function u(){a&&clearTimeout(a),a=null}function d(){n&&clearTimeout(n),i&&clearTimeout(i),r&&clearTimeout(r),a&&clearTimeout(a),n=i=r=a=null,e={}}function f(t,e){return t.type=="mouse"+e}var n,i,r,a,e={},s=750;t(document).ready(function(){var i,o,m,h=0,p=0,v="ontouchstart"in document?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"];t(document).on(v[0],function(r){h=p=0,m=f(r,"down")?r:r.touches[0],r.touches&&1===r.touches.length&&e.x2&&(e.x2=void 0,e.y2=void 0),i=Date.now(),o=i-(e.last||i),e.el=t("tagName"in m.target?m.target:m.target.parentNode),n&&clearTimeout(n),e.x1=m.pageX,e.y1=m.pageY,o>0&&250>=o&&(e.isDoubleTap=!0),e.last=i,a=setTimeout(l,s)}).on(v[1],function(t){("mousemove"!=t.type||"last"in e)&&(m="mousemove"==t.type?t:t.touches[0],u(),e.x2=m.pageX,e.y2=m.pageY,h+=Math.abs(e.x1-e.x2),p+=Math.abs(e.y1-e.y2))}).on(v[2],function(i){if(u(),e.x2&&Math.abs(e.x1-e.x2)>30||e.y2&&Math.abs(e.y1-e.y2)>30)r=setTimeout(function(){e.el.trigger("swipe"),e.el.trigger("swipe"+c(e.x1,e.x2,e.y1,e.y2)),e={}},0);else if("last"in e)if(30>h&&30>p&&!i.cancelTap){var a=t.Event("tap");a.cancelTouch=d,e.el.trigger(a),e.isDoubleTap?(e.el&&e.el.trigger("doubleTap"),e={}):n=setTimeout(function(){n=null,e.el&&e.el.trigger("singleTap"),e={}},250)}else e={};h=p=0}).on(v[3],d),t(window).on("scroll",d)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(e){t.fn[e]=function(t){return this.on(e,t)}})}(Zepto);!function(t,e){function w(t){return t.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function _(t){return i?i+t:t.toLowerCase()}var i,u,d,f,h,p,m,v,g,y,n="",s={Webkit:"webkit",Moz:"",O:"o"},o=window.document,c=o.createElement("div"),l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,b={};t.each(s,function(t,r){return c.style[t+"TransitionProperty"]!==e?(n="-"+t.toLowerCase()+"-",i=r,!1):void 0}),u=n+"transform",b[d=n+"transition-property"]=b[f=n+"transition-duration"]=b[p=n+"transition-delay"]=b[h=n+"transition-timing-function"]=b[m=n+"animation-name"]=b[v=n+"animation-duration"]=b[y=n+"animation-delay"]=b[g=n+"animation-timing-function"]="",t.fx={off:i===e&&c.style.transitionProperty===e,speeds:{_default:400,fast:200,slow:600},cssPrefix:n,transitionEnd:_("TransitionEnd"),animationEnd:_("AnimationEnd")},t.fn.animate=function(n,i,r,a,s){return t.isFunction(i)&&(a=i,r=e,i=e),t.isFunction(r)&&(a=r,r=e),t.isPlainObject(i)&&(r=i.easing,a=i.complete,s=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:t.fx.speeds[i]||t.fx.speeds._default)/1e3),s&&(s=parseFloat(s)/1e3),this.anim(n,i,r,a,s)},t.fn.anim=function(n,i,r,a,s){var o,_,E,c={},x="",T=this,j=t.fx.transitionEnd,C=!1;if(i===e&&(i=t.fx.speeds._default/1e3),s===e&&(s=0),t.fx.off&&(i=0),"string"==typeof n)c[m]=n,c[v]=i+"s",c[y]=s+"s",c[g]=r||"linear",j=t.fx.animationEnd;else{_=[];for(o in n)l.test(o)?x+=o+"("+n[o]+") ":(c[o]=n[o],_.push(w(o)));x&&(c[u]=x,_.push(u)),i>0&&"object"==typeof n&&(c[d]=_.join(", "),c[f]=i+"s",c[p]=s+"s",c[h]=r||"linear")}return E=function(e){if("undefined"!=typeof e){if(e.target!==e.currentTarget)return;t(e.target).unbind(j,E)}else t(this).unbind(j,E);C=!0,t(this).css(b),a&&a.call(this)},i>0&&(this.bind(j,E),setTimeout(function(){C||E.call(T)},1e3*i+25)),this.size()&&this.get(0).clientLeft,this.css(c),0>=i&&setTimeout(function(){T.each(function(){E.call(this)})},0),this},c=null}(Zepto);!function(t,e){t.matchMedia=function(){var e=0,n="sl-media-detect",i=t.fx.transitionEnd,r=t.fx.cssPrefix,a=t("<style></style>").append("."+n+"{"+r+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(r){var o,l,s=n+e++,c=[],u=1,d=[],f=0,h=function(t,e){-1==d.indexOf(t)&&(d.push(t),a.append("@media "+t+" { #"+s+" { width: "+u+"px; } }\n"),u++,("undefined"==typeof e||e)&&f++)};return h(r,!1),o=t('<div class="'+n+'" id="'+s+'"></div>').appendTo("body").on(i,function(){return f>0?void f--:(l.matches=1===o.width(),void t.each(c,function(e,n){t.isFunction(n)&&n.call(l,l)}))}),l={append:h,matches:1===o.width(),media:r,addListener:function(t){return c.push(t),this},removeListener:function(t){var e=c.indexOf(t);return~e&&c.splice(e,1),this}}}}()}(Zepto);!function(t,e){t.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},t(function(){t.matchMedia(t.mediaQuery.ortchange).addListener(function(){t(window).trigger("ortchange")}),t.matchMedia("screen and (height: "+window.innerHeight+"px)").addListener(function(){this.append("screen and (height: "+window.innerHeight+"px)"),t(window).trigger("heightchange")})})}(Zepto);define("util",function(){var l,t=Array.prototype,e=t.slice,n=t.concat,i=navigator.userAgent,r=i.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/i),a=i.match(/MSIE (\d+)/i),s=i.match(/(Android);?[\s\/]+([\d.]+)?/),o=!!s,c=0;r?l=r[2].split("_"):s?l=s[2].split("."):a&&(l=a[1].split("."));var u=function(t,e){var n="0000000000000000"+t;return n.substr(n.length-(e||2))},d={ios:!!r,ie:!!a,android:o,osVersion:l?parseFloat(l[0]+"."+l[1]):0,isInWechat:/micromessenger/i.test(navigator.userAgent),guid:function(){return++c},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},extend:function(t){var e=this,n=function(){e.apply(this,arguments)},i=function(){this.constructor=n};i.prototype=e.prototype,n.prototype=new i;for(var r in t)n.prototype[r]=t[r];for(var r in e)n[r]=e[r];return n},random:function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},log:function(t){this.$log||(this.$log=$('<div style="height:40px;position:fixed;top:0;left:0;right:0;z-index:100000;background:#fff;"></div>').appendTo("body")),this.$log.html(t+"|"+this.$log.html())},indexOf:function(t,e){for(var n="function"==typeof e,i=t.length,r=0;i>r;r++)if(n?e(t[r],r):t[r]==e)return r;return-1},lastIndexOf:function(t,e){for(var n="function"==typeof e,i=t.length-1;i>=0;i--)if(n?e(t[i],i):t[i]==e)return i;return-1},first:function(t,e){for(var n,i=0,r=t.length;r>i;i++)if(n=t[i],e(n,i))return n;return null},find:function(t,e){for(var i,n=[],r=0,a=t.length;a>r;r++)i=t[r],e(i,r)&&n.push(i);return n},select:function(t,e){for(var n=[],i=t.length,r=0;i>r;r++)n.push(e(t[r],r));return n},pick:function(t,i){var a,r={};if(null==t)return r;if("function"==typeof i)for(a in t){var s=t[a];i(s,a,t)&&(r[a]=s)}else for(var o=n.apply([],e.call(arguments,1)),c=0,l=o.length;l>c;c++)a=o[c],a in t&&(r[a]=t[a]);return r},pad:u,deepValue:function(t,e){"string"==typeof e&&(e=e.split("."));for(var n=0,i=e.length;i>n;n++)t=t[e[n]];return t},format:function(t,e){var n=arguments;return t.replace(/\{(\d+)\}/g,function(t,e){return n[parseInt(e)+1]})},formatDate:function(t,e){"string"==typeof t&&/^\/Date\(\d+\)\/$/.test(t)?t=new Function("return new "+t.replace(/\//g,""))():"number"==typeof t&&(t=new Date(t));var n=t.getFullYear()+"",i=t.getMonth()+1,r=t.getDate(),a=t.getHours(),s=t.getMinutes(),o=t.getSeconds(),c=t.getMilliseconds()+"0000";return(e||"yyyy-MM-dd HH:mm:ss").replace(/\y{4}/,n).replace(/y{2}/,n.substr(2,2)).replace(/M{2}/,u(i)).replace(/M/,i).replace(/d{2,}/,u(r)).replace(/d/,t).replace(/H{2,}/i,u(a)).replace(/H/i,a).replace(/m{2,}/,u(s)).replace(/m/,s).replace(/s{2,}/,u(o)).replace(/s/,o).replace(/f+/,function(t){return c.substr(0,t.length)})},style:function(t){var e=document,n=e.getElementsByTagName("head")[0],i=e.createElement("style");i.type="text/css";try{i.appendChild(e.createTextNode(t))}catch(r){i.styleSheet.cssText=t}return n.appendChild(i),i},template:function(t,e){var n="var __p=[];var $data=obj||{};with($data){__p.push('"+t.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(t,e){return"',"+e.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(t,e){return"');"+e.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',i=new Function("obj",n);return e?i(e):i},encodeHTML:function(t){return(""+t).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").split("'").join("&#39;")},getPath:function(t){return t.replace(/^http\:\/\/[^\/]+|\?.*$/g,"").toLowerCase()},cookie:function(t,e,n,i){if("undefined"==typeof e){var r=document.cookie.match(new RegExp("(^| )"+t+"=([^;]*)(;|$)"));return null!=r?unescape(r[2]):null}if(null===typeof e){if(e=this.cookie(name),null==e)return;n=-1}if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),n=";expires="+a.toGMTString()}document.cookie=t+"="+escape(e)+(n||"")+";path="+(i||"/")},store:window.localStorage?function(t,e){return"undefined"==typeof e?JSON.parse(localStorage.getItem(t)):void(null===e?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(e)))}:function(){return"undefined"==typeof value?JSON.parse(this.cookie(key)):void(null===value?this.cookie(key,null):this.cookie(key,JSON.stringify(value)))},noop:function(){},circlePoint:function(t,e,n,i){return{x:t+n*Math.cos(i*Math.PI/180),y:e+n*Math.sin(i*Math.PI/180)}},validateEmail:function(t){return/^[-_a-zA-Z0-9\.]+@([-_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,3}$/.test(t)},validateMobile:function(t){return/^1[0-9]{10}$/.test(t)}};return d});define("util/md5",function(){function i(t){return _(u(b(t),t.length*n))}function u(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,i=-271733879,r=-1732584194,a=271733878,s=0;s<t.length;s+=16){var o=n,c=i,l=r,u=a;n=f(n,i,r,a,t[s+0],7,-680876936),a=f(a,n,i,r,t[s+1],12,-389564586),r=f(r,a,n,i,t[s+2],17,606105819),i=f(i,r,a,n,t[s+3],22,-1044525330),n=f(n,i,r,a,t[s+4],7,-176418897),a=f(a,n,i,r,t[s+5],12,1200080426),r=f(r,a,n,i,t[s+6],17,-1473231341),i=f(i,r,a,n,t[s+7],22,-45705983),n=f(n,i,r,a,t[s+8],7,1770035416),a=f(a,n,i,r,t[s+9],12,-1958414417),r=f(r,a,n,i,t[s+10],17,-42063),i=f(i,r,a,n,t[s+11],22,-1990404162),n=f(n,i,r,a,t[s+12],7,1804603682),a=f(a,n,i,r,t[s+13],12,-40341101),r=f(r,a,n,i,t[s+14],17,-1502002290),i=f(i,r,a,n,t[s+15],22,1236535329),n=h(n,i,r,a,t[s+1],5,-165796510),a=h(a,n,i,r,t[s+6],9,-1069501632),r=h(r,a,n,i,t[s+11],14,643717713),i=h(i,r,a,n,t[s+0],20,-373897302),n=h(n,i,r,a,t[s+5],5,-701558691),a=h(a,n,i,r,t[s+10],9,38016083),r=h(r,a,n,i,t[s+15],14,-660478335),i=h(i,r,a,n,t[s+4],20,-405537848),n=h(n,i,r,a,t[s+9],5,568446438),a=h(a,n,i,r,t[s+14],9,-1019803690),r=h(r,a,n,i,t[s+3],14,-187363961),i=h(i,r,a,n,t[s+8],20,1163531501),n=h(n,i,r,a,t[s+13],5,-1444681467),a=h(a,n,i,r,t[s+2],9,-51403784),r=h(r,a,n,i,t[s+7],14,1735328473),i=h(i,r,a,n,t[s+12],20,-1926607734),n=p(n,i,r,a,t[s+5],4,-378558),a=p(a,n,i,r,t[s+8],11,-2022574463),r=p(r,a,n,i,t[s+11],16,1839030562),i=p(i,r,a,n,t[s+14],23,-35309556),n=p(n,i,r,a,t[s+1],4,-1530992060),a=p(a,n,i,r,t[s+4],11,1272893353),r=p(r,a,n,i,t[s+7],16,-155497632),i=p(i,r,a,n,t[s+10],23,-1094730640),n=p(n,i,r,a,t[s+13],4,681279174),a=p(a,n,i,r,t[s+0],11,-358537222),r=p(r,a,n,i,t[s+3],16,-722521979),i=p(i,r,a,n,t[s+6],23,76029189),n=p(n,i,r,a,t[s+9],4,-640364487),a=p(a,n,i,r,t[s+12],11,-421815835),r=p(r,a,n,i,t[s+15],16,530742520),i=p(i,r,a,n,t[s+2],23,-995338651),n=m(n,i,r,a,t[s+0],6,-198630844),a=m(a,n,i,r,t[s+7],10,1126891415),r=m(r,a,n,i,t[s+14],15,-1416354905),i=m(i,r,a,n,t[s+5],21,-57434055),n=m(n,i,r,a,t[s+12],6,1700485571),a=m(a,n,i,r,t[s+3],10,-1894986606),r=m(r,a,n,i,t[s+10],15,-1051523),i=m(i,r,a,n,t[s+1],21,-2054922799),n=m(n,i,r,a,t[s+8],6,1873313359),a=m(a,n,i,r,t[s+15],10,-30611744),r=m(r,a,n,i,t[s+6],15,-1560198380),i=m(i,r,a,n,t[s+13],21,1309151649),n=m(n,i,r,a,t[s+4],6,-145523070),a=m(a,n,i,r,t[s+11],10,-1120210379),r=m(r,a,n,i,t[s+2],15,718787259),i=m(i,r,a,n,t[s+9],21,-343485551),n=g(n,o),i=g(i,c),r=g(r,l),a=g(a,u)}return Array(n,i,r,a)}function d(t,e,n,i,r,a){return g(y(g(g(e,t),g(i,a)),r),n)}function f(t,e,n,i,r,a,s){return d(e&n|~e&i,t,e,r,a,s)}function h(t,e,n,i,r,a,s){return d(e&i|n&~i,t,e,r,a,s)}function p(t,e,n,i,r,a,s){return d(e^n^i,t,e,r,a,s)}function m(t,e,n,i,r,a,s){return d(n^(e|~i),t,e,r,a,s)}function g(t,e){var n=(65535&t)+(65535&e),i=(t>>16)+(e>>16)+(n>>16);return i<<16|65535&n}function y(t,e){return t<<e|t>>>32-e}function b(t){for(var e=Array(),i=(1<<n)-1,r=0;r<t.length*n;r+=n)e[r>>5]|=(t.charCodeAt(r/n)&i)<<r%32;return e}function _(e){for(var n=t?"0123456789ABCDEF":"0123456789abcdef",i="",r=0;r<4*e.length;r++)i+=n.charAt(e[r>>2]>>r%4*8+4&15)+n.charAt(e[r>>2]>>r%4*8&15);return i}var t=0,n=8;return{md5:i}});define("common",function(t,e,n){var i=t("util"),r=t("$"),a=t("bridge");e.isFavorite=function(t,e){var n=i.store("user");if(n&&n.Favorite){var r=JSON.parse(n.Favorite);if(r=r[t])return-1!=i.indexOf(r,e)}return!1},e.favorite=function(t,e,n){var s=i.store("user");if(s){var o,c;s.Favorite?o=JSON.parse(s.Favorite):s.Favorite=o={},o[t]?c=o[t]:o[t]=c=[];var l=i.indexOf(c,e);-1!=l?n||c.splice(l,1):n&&c.push(e),s.Favorite=JSON.stringify(o),r.post(a.url("/api/user/update"),{UserID:s.ID,Auth:s.Auth,Favorite:s.Favorite,FavoriteID:e,FavoriteType:t,IsFavorite:n}),i.store("user",s)}return!1}});define("bridge",function(t,e,n){var i=t("$"),r=t("util"),a=navigator.userAgent,s=r.ios,o=r.android,u=(Array.prototype.slice,i(window)),d=i('meta[name="api-base-url"]').attr("content"),f={};window.hybridFunctions=f,window.trigger=function(){i.fn.trigger.apply(u,arguments)},window.callJS=function(t){u.trigger(t.method,t.params)};var h=0,m=function(t,e,n){var i,r;"object"==typeof t?n=i.callback:("function"==typeof e&&(n=e,e=null),i={method:t,params:e}),"function"==typeof n&&(r="hybridCallback"+ ++h,i.callback=r,f[r]=function(){n.apply(null,arguments),delete f[r]}),s?alert("slapp://"+JSON.stringify(i)):o&&prompt(JSON.stringify(i))},v={isInApp:/SLApp/.test(a),isAndroid:o,android:o,ios:s,versionName:"1.0",exec:m,tip:function(t){m("tip",t+"")},pickImage:function(t){m("pickImage",t)},takePhoto:function(t){setTimeout(function(){m("takePhoto",t)},0)},queryThumbnailList:function(t){m("queryThumbnailList",t)},pickColor:function(t){m("pickColor",t)},pay:function(t,e){m("pay",t,e)},share:function(){m("share")},isDevelopment:"Win32"==navigator.platform||"Win64"==navigator.platform,url:function(t){return/^http\:\/\//.test(t)?t:d+t},post:function(t,e,n,i){i="function"==typeof n?n:i,n="function"==typeof n?null:n,m("post",{url:this.url(t),files:n,data:e},i)},exit:function(){m("exit")},update:function(t,e,n){m("updateApp",{downloadUrl:t,versionName:e},n)}};return v.hasStatusBar=v.isInApp&&r.ios&&r.osVersion>=7,v});define("graphics/matrix2d",function(){function t(t,e,n,i,r,a){this.setValues(t,e,n,i,r,a)}var e=t.prototype;return t.DEG_TO_RAD=Math.PI/180,t.identity=null,e.setValues=function(t,e,n,i,r,a){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=r||0,this.ty=a||0,this},e.append=function(t,e,n,i,r,a){var s=this.a,o=this.b,c=this.c,l=this.d;return(1!=t||0!=e||0!=n||1!=i)&&(this.a=s*t+c*e,this.b=o*t+l*e,this.c=s*n+c*i,this.d=o*n+l*i),this.tx=s*r+c*a+this.tx,this.ty=o*r+l*a+this.ty,this},e.prepend=function(t,e,n,i,r,a){var s=this.a,o=this.c,c=this.tx;return this.a=t*s+n*this.b,this.b=e*s+i*this.b,this.c=t*o+n*this.d,this.d=e*o+i*this.d,this.tx=t*c+n*this.ty+r,this.ty=e*c+i*this.ty+a,this},e.appendMatrix=function(t){return this.append(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.prependMatrix=function(t){return this.prepend(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.appendTransform=function(e,n,i,r,a,s,o,c,l){if(a%360)var u=a*t.DEG_TO_RAD,d=Math.cos(u),h=Math.sin(u);else d=1,h=0;return s||o?(s*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.append(Math.cos(o),Math.sin(o),-Math.sin(s),Math.cos(s),e,n),this.append(d*i,h*i,-h*r,d*r,0,0)):this.append(d*i,h*i,-h*r,d*r,e,n),(c||l)&&(this.tx-=c*this.a+l*this.c,this.ty-=c*this.b+l*this.d),this},e.prependTransform=function(e,n,i,r,a,s,o,c,l){if(a%360)var u=a*t.DEG_TO_RAD,d=Math.cos(u),h=Math.sin(u);else d=1,h=0;return(c||l)&&(this.tx-=c,this.ty-=l),s||o?(s*=t.DEG_TO_RAD,o*=t.DEG_TO_RAD,this.prepend(d*i,h*i,-h*r,d*r,0,0),this.prepend(Math.cos(o),Math.sin(o),-Math.sin(s),Math.cos(s),e,n)):this.prepend(d*i,h*i,-h*r,d*r,e,n),this},e.rotate=function(e){e*=t.DEG_TO_RAD;var n=Math.cos(e),i=Math.sin(e),r=this.a,a=this.b;return this.a=r*n+this.c*i,this.b=a*n+this.d*i,this.c=-r*i+this.c*n,this.d=-a*i+this.d*n,this},e.skew=function(e,n){return e*=t.DEG_TO_RAD,n*=t.DEG_TO_RAD,this.append(Math.cos(n),Math.sin(n),-Math.sin(e),Math.cos(e),0,0),this},e.scale=function(t,e){return this.a*=t,this.b*=t,this.c*=e,this.d*=e,this},e.translate=function(t,e){return this.tx+=this.a*t+this.c*e,this.ty+=this.b*t+this.d*e,this},e.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},e.invert=function(){var t=this.a,e=this.b,n=this.c,i=this.d,r=this.tx,a=t*i-e*n;return this.a=i/a,this.b=-e/a,this.c=-n/a,this.d=t/a,this.tx=(n*this.ty-i*r)/a,this.ty=-(t*this.ty-e*r)/a,this},e.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},e.equals=function(t){return this.tx===t.tx&&this.ty===t.ty&&this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d},e.transformPoint=function(t,e,n){return n=n||{},n.x=t*this.a+e*this.c+this.tx,n.y=t*this.b+e*this.d+this.ty,n},e.decompose=function(e){null==e&&(e={}),e.x=this.tx,e.y=this.ty,e.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),e.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var n=Math.atan2(-this.c,this.d),i=Math.atan2(this.b,this.a),r=Math.abs(1-n/i);return 1e-5>r?(e.rotation=i/t.DEG_TO_RAD,this.a<0&&this.d>=0&&(e.rotation+=e.rotation<=0?180:-180),e.skewX=e.skewY=0):(e.skewX=n/t.DEG_TO_RAD,e.skewY=i/t.DEG_TO_RAD),e},e.copy=function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.tx,this.ty)},e.toString=function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty+")"},t});define("graphics/tween",function(t,e,n){n.exports={linear:function(t,e,n,i){return n*t/i+e},ease:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeIn:function(t,e,n,i){return n*(t/=i)*t+e},easeOut:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOut:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0==t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t==i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e},easeInOutExpo:function(t,e,n,i){return 0==t?e:t==i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,i,r,a){if(0==t)return e;if(1==(t/=i))return e+n;if(a||(a=.3*i),!r||r<Math.abs(n)){r=n;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(n/r);return-(r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/a))+e},easeOutElastic:function(t,e,n,i,r,a){if(0==t)return e;if(1==(t/=i))return e+n;if(a||(a=.3*i),!r||r<Math.abs(n)){r=n;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(n/r);return r*Math.pow(2,-10*t)*Math.sin(2*(t*i-s)*Math.PI/a)+n+e},easeInOutElastic:function(t,e,n,i,r,a){if(0==t)return e;if(2==(t/=i/2))return e+n;if(a||(a=.3*i*1.5),!r||r<Math.abs(n)){r=n;var s=a/4}else var s=a/(2*Math.PI)*Math.asin(n/r);return 1>t?-.5*r*Math.pow(2,10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/a)+e:r*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*i-s)*Math.PI/a)*.5+n+e},easeInBack:function(t,e,n,i,r){return void 0==r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0==r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0==r&&(r=1.70158),(t/=i/2)<1?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(t,e,n,i){return n-Tween.Bounce.easeOut(i-t,0,n,i)+e},easeOutBounce:function(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,i){return i/2>t?.5*Tween.easeInOutBounce(2*t,0,n,i)+e:.5*Tween.easeInOutBounce(2*t-i,0,n,i)+.5*n+e}}});define("core/base",function(t,e,n){Object.create||(Object.create=function(t){var e=function(){};return e.prototype=t,new e}),Date.now||(Date.now=function(){return+new Date});var i=function(){var t=this,e=Array.prototype.slice.call(arguments),n=e.shift();if(n)for(var i in n)t.options[i]=n[i];t.initialize.apply(t,e),t.options.initialize&&t.options.initialize.apply(t,e)};i.prototype={options:{},initialize:function(){}},i.extend=function(t,e){var r,n=this;"function"!=typeof t&&(e=t,t=function(){n.apply(this,arguments)});var a=function(){this.constructor=t};if(a.prototype=n.prototype,t.prototype=new a,r=e.options,"undefined"!=typeof r){for(var s in r)t.prototype.options[s]=r[s];delete e.options}for(var s in e)t.prototype[s]=e[s];return t.__super__=n.prototype,t.extend=i.extend,t},window.sl=window.slan={},n.exports=i});define("core/promise",["./linklist"],function(t,e,n){var i=t("./linklist"),r=Array.prototype.slice,a=/^\$(\d+)$/,s=function(t,e,n){for(var o,i=[],r=0,s=t.length;s>r;r++)o=t[r],i.push("string"==typeof o?a.test(o)?e[parseInt(o.match(a)[1])]:o.replace(/^\$\$/,"$"):o);return i.push(n),i},o=function(t,e,n){if(!(this instanceof o))return new o(t,e,n);var r=this;this.queue=new i,this.state=2,this.resolveSelf=function(){r.resolve.apply(r,arguments)},t&&(this.state=0,this.then(t,e,n))};o.prototype={reject:function(t){this.resolve(t||"unknow error",null)},resolve:function(){var i,a,s,t=this,e=r.call(arguments),n=t.queue.shift();if(n)if(t.state=1,i=n[0],a=n[1],i instanceof o)i.then(t.resolveSelf);else if("function"==typeof i)s=i.apply(a,e),s instanceof o?s!==t&&s.then(t.resolveSelf):t.resolve(null,s);else if(i instanceof Array)for(var c=[],u=[],l=0,f=0,h=i.length;h>f;f++)!function(n,i,r){"function"==typeof n&&(n=n.apply(a,e)),n instanceof o?n.then(function(e,n){e&&(c[i]=e),l++,u[i]=n,l>=r&&t.resolve(c,u)}):(l++,u[i]=n,l>=r&&t.resolve(null,u))}(i[f],f,h);else t.resolve(null,e);else t.state=0;return t},when:function(t,e){return t instanceof Array||(t=[t]),this.queue.append([t,e||this]),1!=this.state&&this.resolve(),this},map:function(t,e,n){var i=this,r=function(){var n=arguments;return i._count=t.length,i.result=[],i.errors=[],t.forEach(function(t,r){t instanceof Array||(t=[t]),e.apply(this,s(t,n,function(t,e){i.next(r,t,e)}))}),i};return i.queue.append([r,n||this]),i},each:function(t,e,n){var i=this,r=function(){return i._count=t.length,i.result=[],i.errors=[],t.forEach(function(t,n){e.apply(this,[n,t])}),i};return i.queue.append([r,n||this]),i},next:function(t,e,n){this._count--,e&&(this.errors[t]=e),this.result[t]=n,this._count<=0&&this.resolve(this.errors.length?this.errors:null,this.result)},bind:function(t){var e=this;return function(){e.then(r.call(arguments),t,this)}},then:function(t,e,n){var r,i=this;return t instanceof Array?(r=e,e=function(){return r.apply(this,s(t,arguments,i.resolveSelf)),i}):(n=e,e=t,t=null),i.queue.append([e,n||this]),i.state||i.resolve(),i}},o.resolve=function(){return(new o).resolve()},n.exports=o});define("core/linklist",function(t,e,n){var i=function(){this._idlePrev=this,this._idleNext=this},r=function(t){return t._idlePrev==t?null:t._idlePrev},s=function(t){t._idleNext&&(t._idleNext._idlePrev=t._idlePrev),t._idlePrev&&(t._idlePrev._idleNext=t._idleNext),t._idleNext=null,t._idlePrev=null};i.prototype={length:0,init:function(t){t={data:t},this.list=t,this.length=1,t._idleNext=t,t._idlePrev=t},get:function(t){var e=null;return this.each(function(n){return t(n)===!0?(e=n,!1):void 0}),e},find:function(t){var e=[];return this.each(function(n){t(n)===!0&&e.push(n)}),e},first:function(){return this._idlePrev!=this?this._idlePrev.data:null},peek:function(){return this._idlePrev==this?null:this._idlePrev},each:function(t){for(var n,e=this._idlePrev;e!=this&&(n=e._idlePrev,t.call(e,e.data)!==!1);)e=n},next:r,append:function(t,e){return e||(t={data:t}),t._idleNext=this._idleNext,this._idleNext._idlePrev=t,t._idlePrev=this,this._idleNext=t,this.length++,t},contains:function(t){var e=!1;return this.each(function(n){return t===n?(e=!0,!1):void 0}),e},shift:function(){var t=this._idlePrev;return t!=this?(this._remove(t),t.data):null},_remove:function(t){0!=this.length&&(this.length--,s(t))},remove:function(t){var e=this;e.each(function(n){return n===t?(e._remove(this),!1):void 0})},isEmpty:function(){return this._idlePrev==this}},n.exports=i});define("core/event",function(t,e,n){function u(t,e,n){(t||"").split(a).forEach(function(t){n(t,e)})}function l(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}function h(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function f(t,e,n,i){var r,s;return s=h(e),s.ns&&(r=l(s.ns)),t.filter(function(t){return!(!t||s.e&&t.e!==s.e||s.ns&&!r.test(t.ns)||n&&t.cb!==n&&t.cb._cb!==n||i&&t.ctx!==i)})}function d(t,e){return this instanceof d?(e&&i.extend(this,e),this.type=t,this):new d(t,e)}var i=t("$"),r=t("./base"),s=[].slice,a=/\s+/,o=function(){return!1},c=function(){return!0};return d.prototype={isDefaultPrevented:o,isPropagationStopped:o,preventDefault:function(){this.isDefaultPrevented=c},stopPropagation:function(){this.isPropagationStopped=c}},r.event={createEvent:d,on:function(t,e,n){var r,i=this;return e?(r=this._events||(this._events=[]),u(t,e,function(t,e){var s=h(t);s.cb=e,s.ctx=n,s.ctx2=n||i,s.id=r.length,r.push(s)}),this):this},one:function(t,e,n){var i=this;return e?(u(t,e,function(t,e){var r=function(){return i.off(t,r),e.apply(n||i,arguments)};r._cb=e,i.on(t,r,n)}),this):this},off:function(t,e,n){var i=this._events;return i?t||e||n?(u(t,e,function(t,e){f(i,t,e,n).forEach(function(t){delete i[t.id]})}),this):(this._events=[],this):this},trigger:function(t){var n,i,r,a,o,e=-1;if(!this._events||!t)return this;if("string"==typeof t&&(t=new d(t)),n=s.call(arguments,1),t.args=n,n.unshift(t),i=f(this._events,t.type))for(a=i.length;++e<a;)if((r=t.isPropagationStopped())||!1===(o=i[e]).cb.apply(o.ctx2,n)){r||(t.stopPropagation(),t.preventDefault());break}return this}},r.Event=d,r.event});define("core/view",function(t,e,n){var i=t("$"),r=t("util"),s=t("./base"),a=t("./event"),o=Array.prototype.slice,c=function(){var e,t=this,n=o.call(arguments),s=n.shift();t._bindListenTo=[],i.isPlainObject(s)?(e=s,s=null):e=n.shift(),t.options=i.extend({},t.options,e),t.options.className&&(t.className=t.options.className),t.options.el&&(t.el=t.options.el),t.cid=r.guid(),t.setElement(s||t.el),t.initialize.apply(t,n),t.options.initialize&&t.options.initialize.apply(t,n),t.on("Destroy",t.onDestroy)};c.prototype={options:{},initialize:r.noop,setElement:function(t,e){return t&&(this.$el&&this.undelegateEvents(),this.$el=i(t),this.el=this.$el[0],this.className&&this.$el.addClass(this.className),e!==!1&&this.delegateEvents()),this},on:a.on,one:a.one,off:a.off,trigger:a.trigger,undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){return this.listen(this.events),this.listen(this.options.events),this},listen:function(t,e){var n=this;if(e){var s=t.split(" "),a=s.shift().replace(/,/g,".delegateEvents"+n.cid+" ");e=i.proxy(i.isFunction(e)?e:n[e],n),s.length>0&&""!==s[0]?n.$el.on(a,s.join(" "),e):n.$el.on(a,e)}else for(var r in t)n.listen(r,t[r]);return n},listenTo:function(t){var e=o.apply(arguments),n=e[e.length-1];return"function"!=typeof t.on&&(t=i(t)),e[0]=t,e[e.length-1]=i.proxy(n,this),this._bindListenTo.push(o.apply(e)),e.shift().on.apply(t,e),this},$:function(t){return this.$el.find(t)},onDestroy:r.noop,destroy:function(){var n,e=(this.$el,this);i.each(this._bindListenTo,function(t,e){n=e.shift(),n.off.apply(n,e)}),e.undelegateEvents(),e.$el.remove(),e.trigger("Destroy")}},c.extend=function(){var r,t=this,e=o.call(arguments),n=e[0];return"function"!=typeof n?(n=null,e.unshift({})):e[0]={},r=i.extend.apply(i,e),n=s.extend.apply(t,n?[n,r]:[r]),n.prototype.events=i.extend({},n.__super__.events,n.prototype.events),n.extend=arguments.callee,n},n.exports=c});define("core/model",function(t,e,n){var i=t("$"),r=t("util"),a=(t("./base"),t("./event")),o=Array.prototype.slice,c={date:r.formatDate,json:function(t){return t instanceof _||t instanceof x?JSON.stringify(t.data):JSON.stringify(t)},length:function(t){return t instanceof x?t.data.length:t&&t.length||0},join:function(t,e){return t instanceof x?t.data.join(e):t.join(e)},is:function(t,e){switch(e){case"array":return i.isArray(t);case"object":return i.isPlainObject(t);case"empty":if(!t)return!0;if(i.isArray(t))return!t.length;if(i.isPlainObject(t)){for(var n in t)return!1;return!0}return!1;default:return typeof t==e}},equal:function(t,e,n,i){return 2==arguments.length?t==e:t==e?n:i},choose:function(t,e,n){return t?e:n},or:function(t,e){return t||e},and:function(t,e){return t&&e},not:function(t){return!t},lowercase:function(t){return t.toLowerCase()},uppercase:function(t){return t.toUpperCase()},concat:function(){return o.call(arguments).join("")},round:function(t){return Math.round(t)},max:Math.max,mul:function(t,e){return parseFloat(t)*parseFloat(e)},plus:function(t,e){return parseFloat(t)+parseFloat(e)},minus:function(t,e){return parseFloat(t)-parseFloat(e)},format:function(t){var e=o.call(arguments),n=e[1];return e.splice(1,1),n.replace(/\{(\d+)\}/g,function(t,n){return e[n]})},"case":function(t){for(var e=o.call(arguments,1),n=0,i=e.length;i>n;n+=2)if(t==e[n])return e[n+1];return i%2==0?void 0:e[i-1]},listen:function(t,e,n,i,r,s,a){var l,o=!1;if(i&&(l="_bind_filter"+r.prop+("number"==typeof i?"":i)+"_"+a,e[l]?i[l]||(i[l]=o=!0):e[l]=o=!0,o)){s=s.split(".");var u=s.pop(),h=s.length<=0?t:t.get(s)||t.set(s.join("."),{}).get(s);h.on("change"+(u?":"+u:""),function(){e._attr(i,r.prop,r.filter(c,e,e.data[n]))})}}},l=/\s*\|\s*([a-zA-Z_0-9]+)((?:\s*(?:\:|;)\s*\({0,1}\s*([a-zA-Z_0-9\.-]+|\'[^\']*?\')\){0,1})*)/g,u=/\s*\:\s*([a-zA-Z_0-9\.-]+|\'[^\']*?\')/g,h=r.format,f=function(t,e){var s,a,o,n="",i="var S=this;",r=0,c="if(E)F.listen({0},M,K,E,S,";return t.replace(l,function(t,l,f){n+="V=F."+l+"(V",f.replace(u,function(t,l){var u;"'"==l[0]||/^((-)*\d+|true|false|undefined|null)$/.test(l)?u=l:(s=l.split("."),a=s.shift(),!e||a!=e.alias&&!(o=e.modelAlias[a])?(u="M.root.data."+l,i+=h(c,"M.root")+'"'+l+'",'+r++ +");"):l==e.alias?(u="M.data",i+=h(c,"M.parent")+"M._key,"+r++ +");"):a==e.alias?(u="M.data"+l.substr(e.alias.length),i+=h(c,"M")+'"'+l.substr(e.alias.length+1)+'",'+r++ +");"):(l=s.join("."),u='(function(){var P=M.parent.parent;while(P){if( P.key=="'+o+'^child"){'+h(c,"P")+'"'+l+'",'+r++ +"); return P.data."+l+"; } P=P.parent.parent; } })()")),n+=","+u}),n+=");"}),n+="return V;",new Function("F","M","V","K","E",i+n)},d=/([a-zA-Z_0-9]+)\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})(?:\s*\|\s*filter\s*\:\s*([a-zA-Z_0-9\.]+)(?:\s*\:\s*([a-zA-Z_0-9\.]+)){0,1}){0,1}(?:\s*\|\s*orderBy\s*\:\s*([a-zA-Z_0-9\.]+)(?:\s*\:\s*([a-zA-Z_0-9\.]+)){0,1}){0,1}/g,p=/\b([a-zA-Z_0-9-\.]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)((?:\s*\|\s*[a-zA-Z_0-9]+(?:\s*\:\s*\({0,1}\s*(?:[a-zA-Z_0-9\.-]+|'[^']*?')\){0,1})*)*)(\s|,|$)/g,m=/\b([a-zA-Z\s]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)(\s|,|$)/g,v=function(t,e){return t.filter(e).add(t.find(e))},g=function(t,e){var n=e.split("."),i=n.shift();if(i==t.alias)return{collection:t.collectionName,variable:n.join(".")};var r=t.modelAlias[i];return r?{collection:r,variable:n.join(".")}:void 0},y=function(t){this.count=0,this.repeats={},this.bindings={},this.events=[],this.eventNames=[],this.eventid=0,this.scan(t)};y.prototype.scan=function(t){var o,c,n=this.repeats,r=this.bindings,s=this.events,a=this.eventNames,l=this.count,u=this.eventid;v(t,"[sn-repeat]").each(function(){c=i(this);var t=this,e=this.getAttribute("sn-repeat"),r=c.parents("[sn-repeat-alias]"),s={};r.each(function(){s[this.getAttribute("sn-repeat-alias")]=this.getAttribute("sn-repeat-name")}),e.replace(d,function(e,i,r,a,c,l,u){var d,p,h=r.split("."),f=h.length;1!==f&&(d=h[0],p=s[d],p&&(h[0]=p+"^child",r=h.join("."))),t.setAttribute("sn-repeat-alias",i),t.setAttribute("sn-repeat-name",r);var m=document.createElement("script");m.setAttribute("type","text/placeholder");var v,g={orderBy:l,reverse:u,filterName:a,comparator:c,collectionName:r,alias:i,modelAlias:s,template:t};1==f&&(g.placeHolder=m),o=n[r],o?v=r+"_"+o.push(g):(n[r]=[g],v=r+"_1"),g.placeHolderName=v,m.setAttribute("sn-placeholder",v),t.parentNode.insertBefore(m,t)})}).remove();for(var y in n)for(var _,b=n[y],w=0,x=b.length;x>w;w++)_=b[w],c=i(_.template),v(c,"[sn-binding],[sn-model],[sn-on]").each(function(){var t=this,e=this.getAttribute("sn-binding"),n=this.getAttribute("sn-model"),i=this.getAttribute("sn-on");if(t.setAttribute("sn-id",++l),n&&(n=g(_,n),n&&(this.setAttribute("sn-collection",n.collection),this.setAttribute("sn-model",n.variable))),i){this.setAttribute("sn-on",u);var h=s[u];i.replace(m,function(t,e,n,i){-1==a.indexOf(e)&&(a[a.length]=e),h||(h=s[u]={});var r=n+i;h[e]=g(_,r)||r}),u++}e&&e.replace(p,function(t,e,n,i,s){n==_.alias?n=y+"^child"+i:(alias=_.modelAlias[n],alias&&(n=alias+"^child"+i)),s&&(e={prop:e,filter:f(s,_)});var a=r[n];a||(a=r[n]=[]),a.push({el:l,prop:e})})});v(t,"[sn-binding],[sn-on]").each(function(){var i,t=this.getAttribute("sn-binding"),e=this.getAttribute("sn-on"),n=this;if(t&&t.replace(p,function(t,e,s,a,o){s+=a,o&&(e={prop:e,filter:f(o)}),i=r[s],i||(i=r[s]=[]),i.push({el:n,prop:e})}),e){this.setAttribute("sn-on",u);var o=s[u];e.replace(m,function(t,e,n,i){-1==a.indexOf(e)&&(a[a.length]=e),o||(o=s[u]={}),o[e]=n+i}),u++}})};var b=function(t,e,n){var s;if(0==e.indexOf("style."))(s={})[e.substr(6)]=n,i(t).css(s);else switch(e){case"text":t.innerHTML=r.encodeHTML(n);break;case"html":t.innerHTML=n;break;case"display":t.style.display=void 0===n||null===n||n===!1||"none"==n?"none":"block"==n||"inline"==n||"inline-block"==n?n:"";break;case"value":t.value!=n&&(t.value=n);break;case"style":i(t).css(n);break;case"class":t.className="string"!=typeof n&&n?c.join(n," "):n;break;default:null===n||void 0===n?t.removeAttribute(e):t.setAttribute(e,n)}},_=function(t,e,n,i){if(t&&!this.created){var r={};if(this.$el=i,this.model=r,this._key=e,this.root=this,this.data={},n instanceof _)this.parent=n,this.key=n.key?n.key+"."+e:e,this.root=n.root;else{if(!(n instanceof x))throw new Error("Model's parent mast be Collection or Model");this.parent=n,this.key=n.key+"^child",this.root=n.root}this.set(t),n.data[e]=this.data,this.created=!0}};_.prototype={constructor:_,one:a.one,on:a.on,off:a.off,trigger:a.trigger,_redraw:function(){var t;for(var e in this.model)t=this.model[e],t instanceof _||t instanceof x?t._redraw():this._syncView(e,t)},_syncView:function(t,e){var i,r,s,t,a,n=this.root.finder.bindings[t&&this.key?this.key+"."+t:this.key||t];if(n)for(var o=0,l=n.length;l>o;o++)i=n[o],r=i.el,s=i.prop,"string"!=typeof s?(a=s.filter(c,this,e,t,r),s=s.prop):a=e,this._attr(r,s,a);return this},_syncOwnView:function(){return this.root!=this&&(this._syncView("",this.data),this.created&&this.parent instanceof _&&this.parent.trigger("change:"+this._key,this.data),this.parent.needUpdateView&&this.parent._syncOwnView()),this},_attr:function(t,e,n){"number"==typeof t?v(this.$el,'[sn-id="'+t+'"]').each(function(){b(this,e,n)}):b(t,e,n)},get:function(t){if("string"==typeof t&&-1!=t.indexOf(".")&&(t=t.split(".")),i.isArray(t)){for(var e=this,n=0,r=t.length;r>n;n++)if(e instanceof _)e=e.model[t[n]];else{if(!(e instanceof x))return null;e=e.models[t[n]]}return e}return this.model[t]},set:function(t,e){var r,s,a,n=this,o=this.model;if(n.needUpdateView=!1,i.isPlainObject(t))a=t;else{if("undefined"==typeof e)return e=t,t="",this.parent&&(this.parent.data[this.parent.models.indexOf(this)]=e),this.data=e,void this._syncOwnView();(a={})[t]=e}var l,u,c=[],s=!1,h=[];for(var f in a)this.data[f]=a[f];for(var f in a)if(r=o[f],u=a[f],r!==u){var d=f.split(".");if(d.length>1){t=d.pop(),o=this;for(var v,p=0,m=d.length;m>p;p++)if(f=d[p],v=o,o instanceof _)o=o.model[f],o||(o=v.model[f]=new _({},f,v,v.$el),v.data[f]=o.data);else if(o instanceof x&&(o=o.models[f],!o))throw new Error("[Collection index is bigger than length!]");o.set(t,u)}else if(r instanceof _)null===u||void 0===u?r.clear():r.set(u);else if(r instanceof x){if(!i.isArray(u)){if(null!=u)throw new Error("[Array to "+typeof u+" error]"+f+"");u=[]}r.set(u)}else i.isPlainObject(u)?o[f]=new _(u,f,this,this.$el):i.isArray(u)?(o[f]=new x,c.push(f)):(this.data[f]=u,o[f]=u,this.created&&this.trigger("change:"+f,u));h.push(f,u),s||(s=!0)}for(var p=0,m=c.length;m>p;p++)t=c[p],l=o[t],o[t].constructor(this.data[t],t,this);if(s){this.root!=this&&this._syncOwnView();for(var p=0,m=h.length;m>p;p+=2)this._syncView(h[p],h[p+1])}return n.needUpdateView=!0,this},clear:function(){var t={};for(var e in this.data)t[e]=null;this.set(t)},toJSON:function(){return i.extend(!0,{},this.data)}};var w=function(t,e){this.list=[],this.collection=e,i.extend(this,t),!this.placeHolder&&e.parent.$el&&(this.placeHolder=e.parent.$el.find('[sn-placeholder="'+this.placeHolderName+'"]')[0])};w.prototype={filter:function(t){var e=this.filterName,n=this.comparator,i=!0;if(e){if(e=this.deepValue(e),!e)return!0;switch("true"==n&&(n=!0),typeof e){case"function":i=e(t);break;case"object":var r;for(var s in t)r=t[s];break;case"string":break;default:i=t}}return i},sort:function(t,e){e!=this.reverse},deepValue:function(t){var e=t.split("."),n=this.modelAlias[e[0]];return n?void 0:r.deepValue(this.collection.root.data,t)},get:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t)return this.list[e]},add:function(t,e,n){var a=(this.list,this.orderBy,this.reverse,{model:t,el:e});this.list.push(a),this.filter(t.data)&&(this.fragment?this.fragment.appendChild(e):this.placeHolder.parentNode.insertBefore(e,this.placeHolder))},remove:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t){this.list.splice(e,1);break}}};var x=function(t,e,n){if(t){this.models=[],this.data=[],this.key=e,this._key=e,this.repeats=[],this.parent=n,n.key&&(this.key=n.key+"."+this.key),this.root=n.root;var s,i=this.root.finder.repeats[this.key];if(i)for(var a=0,o=i.length;o>a;a++)s=new w(i[a],this),this.repeats.push(s);this.set(t)}};x.prototype={constructor:x,model:_,forEach:function(t){for(var e,i=0,r=this.models.length;r>i;i++)e=this.models[i],t.call(this,e,i)},_redraw:function(){for(var t=0,e=this.models.length;e>t;t++){if(model=this.models[t],this.repeats)for(var n,t=0,e=this.repeats.length;e>t;t++)if(n=this.repeats[t],!n.get(model)){var r=item.template.cloneNode(!0);i(r);r.snModel=model,n.add(model,r),model.$el.push(r)}model._redraw()}},append:function(t){this.fragment(function(){for(var e=0,n=t.length;n>e;e++)this.add(t[e],!0)})},add:function(t,e){this.needUpdateView=!1;var n,r=new this.model,s=this.data.length;if(this.models[s]=r,this.data[s]=t,this.repeats)for(var a,o=0,c=this.repeats.length;c>o;o++){a=this.repeats[o];var l=a.template.cloneNode(!0),u=i(l);l.snModel=r,a.add(r,l),n=n?n.add(u):u}return r.constructor(t,s,this,n),e||this._syncOwnView(),this.needUpdateView=!0,r},_syncOwnView:function(){return this.parent._syncView(this._key,this.data),this.created&&this.parent.trigger("change:"+this._key,this.data),this.parent.needUpdateView&&this.parent._syncOwnView(),this},fragment:function(t){for(var e=0,n=this.repeats.length;n>e;e++)this.repeats[e].fragment=document.createDocumentFragment();t.call(this);for(var i,e=0,n=this.repeats.length;n>e;e++)i=this.repeats[e],i.placeHolder.parentNode.insertBefore(i.fragment,i.placeHolder),i.fragment=null},set:function(t){this.needUpdateView=!1,this.fragment(function(){var e,n=t.length,i=this.models.length;if(i>n)for(var r=i-1;r>=n;r--)this.remove(r,!0);for(var r=0;n>r;r++)e=t[r],i>r?this.models[r].set(e):this.add(e,!0)}),this.needUpdateView=!0},get:function(t){return this.models[t]},remove:function(t,e){var n,i;if("number"!=typeof t&&(t=this.models.indexOf(t)),this.repeats){for(var r=0,s=this.repeats.length;s>r;r++)n=this.repeats[r],i=n.list[t].el,i.parentNode.removeChild(i),n.list.splice(t,1);this.models.splice(t,1),this.data.splice(t,1),e||this._syncOwnView()}}};var T=function(t,e){t&&(this.created||(this.data={},this.events=[],this.root=this,this.model={},this.key="",this.load(t),this.set(e),this.created=!0))};T.prototype=Object.create(_.prototype),i.extend(T.prototype,{constructor:T,load:function(t){return this.finder=new y(t),this.$el=t.on("input change","[sn-model]",i.proxy(this._inputChange,this)),this.bindEvents(),this},handleEvent:function(t){var a,e=t.currentTarget,n=t.type,r=e.getAttribute("sn-on"),s=this.finder.events[r];if(s){a=s[n];var o,c,l;"string"==typeof a?(l=a,a=this.get(a),o=this):(o=i(e).closest('[sn-repeat-name="'+a.collection+'"]')[0].snModel,l=a.variable,a=o.get(l)),c=l.lastIndexOf("."),a&&a.call(-1==c?o:o.get(l.substr(0,c)),t)}},bindEvents:function(){for(var e=0,n=this.finder.eventNames.length;n>e;e++){var r=this.finder.eventNames[e];-1==this.events.indexOf(r)&&(this.$el.on(r,"[sn-on]",i.proxy(this.handleEvent,this)),this.events[this.events.length]=r)}},scan:function(t){this.finder.scan(t),this._redraw(),this.bindEvents()},append:function(t,e){e?t=this.$el.find(t):(e=t,t=this.$el),t.append(e),this.scan(e)},prepend:function(t,e){e?t=this.$el.find(t):(e=t,t=this.$el),t.prepend(e),this.scan(e)},before:function(t,e){this.$el.find(t).before(e),this.scan(e)},after:function(t,e){this.$el.find(t).after(e),this.scan(e)},_inputChange:function(t){var e=t.currentTarget,n=e.getAttribute("sn-model"),r=e.getAttribute("sn-collection");r?i(e).closest('[sn-repeat-name="'+r+'"]')[0].snModel.set(n,e.value):this.set(n,e.value)},destory:function(){this.$el.off("input change","[sn-model]",this._inputChange)}}),T.extend=_.extend=x.extend=r.extend,e.ViewModel=T,e.filter=e.Filter=c});define("core/page",function(t,e,n){t("../widget/tip");var i=t("$"),r=t("util"),a=(t("./base"),t("./view")),o=t("./promise"),l=(t("../widget/dialog"),r.noop),h=(r.indexOf,Array.prototype.slice),f=r.getPath,d=a.extend({options:{route:null},application:null,el:'<div class="view"></div>',_setRoute:function(t){this.route=t,this.hash=t.hash,this.url=t.url,this.path=t.path,this._queries=this.queries,this.queries=i.extend({},t.queries)},queryString:function(t,e){if("undefined"==typeof e)return this.route.queries[t];null===e||e===!1||""===e?delete this.route.queries[t]:this.route.queries[t]=e||"";var n=i.param(this.route.queries);this.application.to(this.route.path+(n?"?"+n:""))},loadTemplate:function(){var t=this,e=1,n=function(){e--,0==e&&(t.$el.html(t.razor.html(t.data)).appendTo(t.application.$el),t.trigger("Create"),t._promise.resolve())};return t.route.api&&(e++,i.ajax({url:t.route.api,type:"GET",dataType:"json",success:function(e){t.data=e,n(e)},error:function(t){n({success:!1,content:t.responseText})}})),seajs.use(t.route.template,function(e){t.razor=e,n()}),t._promise},initialize:function(){var t=this,e=o.resolve();t._promise=e,t.className=t.el.className,t._setRoute(t.options.route),t.application=t.options.application,t.on("Start",t.onStart),t.on("Resume",t.onResume),t.on("Show",t.onShow),t.on("Pause",t.onPause),t.on("QueryChange",t.onQueryChange),t.on("QueryChange",t.checkQuery),t.$el.data("path")||(t.$el.data("url",t.url).data("path",t.path),e.then(t.loadTemplate,t)),e.then(t.onCreate,t).then(function(){t.trigger("Start"),t.checkQuery()})},onCreate:l,onStart:l,onResume:l,onShow:l,onStop:l,onRestart:l,onPause:l,onQueryChange:l,then:function(t){return this._promise.then(t,this),this},_queryActions:{},checkQuery:function(){var s,t=this,e=t.queries,n=t._queries,r=t._queryActions;r&&i.each(r,function(t,i){if(s=e[t]||"",s&&!n||n&&s!=n[t]){var r=i.cls[i.map[s]].__query_action;r.apply(i.cls,r.__arguments),r.__arguments=void 0}})},bindQueryAction:function(t,e,n){var a,s=this;return i.each(n,function(n,i){a=function(){var i=h.apply(arguments),r=arguments.callee.__query_action;s.queryString(t)==n?r.apply(e,i):(r.__arguments=i,s.queryString(t,n))},a.__query_action=e[i],e[i]=a}),this._queryActions[t]={cls:e,map:n},this},onResult:function(t,e){this.listenTo(this.application,t,e)},setResult:function(){this.application.trigger.apply(this.application,arguments)},compareUrl:function(t){return f(t)===this.route.path.toLowerCase()},back:function(t){this.application.to(t)},forward:function(t){this.application.to(t)}});sl.Page=d,n.exports=d});define("core/route",function(t,e,n){var i=function(t){return(t.replace(/^#+|\/$/,"")||"/").toLowerCase()},r=function(t,e){var i,r,s,a,o,c,n=[];for(var l in t){if(i=t[l],r=[],c="^(?:/{0,1})"+l.replace(/(\/|^|\?)\{((?:.+?\{[^\}]+\}){0,}[^\}]*)\}/g,function(t,e,n){return o=n.split(":"),o.length>1&&(r.push(o.shift()),n=o.join(":")),e+"("+n+")"})+"$","string"==typeof i)throw new Error("Route options error");s=i.root||"/",a="/"!=s?s.replace(/^\//,"")+"/":"",n.push({regex:new RegExp(c),parts:r,template:a+i.template,view:a+i.controller,api:i.api,root:s})}this.isDebug=e!==!1,this.routes=n};r.prototype.match=function(t){var a,c,l,e=null,n={},r=t=i(t),s=t.indexOf("?"),o=this.routes;-1!=s?(a=t.substr(s+1),t=t.substr(0,s),a.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(t,e,i){return n[e]=decodeURIComponent(i),""})):a="";for(var u=0,h=o.length;h>u;u++)if(c=o[u],l=c.regex?t.match(c.regex):null){e={path:l[0],url:r,hash:"#"+r,root:c.root,template:c.template,"package":this.isDebug?!1:"/"==c.root?"controller":c.root.replace(/^\//,"")+"/controller",view:c.view,data:{},queryString:a,query:n,queries:n};for(var f=0,d=c.parts.length;d>f;f++)e.data[c.parts[f]]=l[f+1];c.api&&(e.api=c.api.replace(/\{([^\}]+?)\}/g,function(t,n){return e.data[n]}));break}return e},r.standardizeHash=i,n.exports=r});define("core/animation",function(t,e){for(var n=t("$"),i=t("./linklist"),r=t("graphics/matrix2d"),s=t("graphics/tween"),a=["webkit"],o=0;o<a.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[a[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[o]+"CancelAnimationFrame"]||window[a[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(function(){t(currTime+timeToCall)},16.7)},window.cancelAnimationFrame=function(t){clearTimeout(t)});var c=new i,u=!0,l=n.fx.cssPrefix+"transform",h={opacity:1},d=/(\d+\.\d+|\d+)\%/g,p=/translate\((\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\s*\,\s*(\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\)/,m=/matrix\((\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\)/,v=/(translate|skew|rotate|scale|matrix)\(([^\)]+)\)/g,g=/matrix\([^\)]+\)\s*$/,y=function(t){if(t){t instanceof Array||(t=[t]);for(var e=0,n=t.length;n>e;e++)"string"==typeof t[e]&&(t[e]=s[t[e].replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})])}else t=[s.easeOut];return t},b=function(t){var e=[];return n.each(t,function(t,n){e.push(isNaN(parseFloat(n))?0:parseFloat(n))}),e},_=function(t,e,n){return parseFloat(t)+(parseFloat(e)-parseFloat(t))*n},w=function(t){var e=new r;return t.replace(v,function(t,n,i){e["matrix"==n?"append":n].apply(e,b(i.split(",")))}),e},x=function(t){var i,s,e={};return n.each(t,function(t,n){/matrix|translate|skew|rotate|scale|invert/.test(t)?("translate"===t?n=(e[l]||"")+" "+t+"("+n+")":(s||(s=new r),i=e[l]||"",n=s["matrix"==t?"append":t].apply(s,b(n.split(","))).toString(),n=g.test(i)?i.replace(g,n):i+" "+n),t=l):"transform"===t&&(t=l,s=null),e[t]=n}),{css:e,matrix:s}};e.transform=x,n.fn.transform=function(t){return this.css(x(t).css),this},n.fn.matrix=function(t){return t instanceof r?(this.css(l,t.toString()),this):w(getComputedStyle(this[0],null)[l])};var T=function(){if(c.length){u=!1;for(var t,e,n,a,s=(+new Date,c._idlePrev);s!=c;){if(a=s._idlePrev,first=s.data,t=Date.now()-first.startTime,n=[],e=first.ease,t<=first.duration){for(var o=0,l=e.length;l>o;o++)n.push(e[o](t,first.from,first.to-first.from,first.duration)/100);first.step.apply(first,n)}else{for(var h=first.to/100,o=0,l=e.length;l>o;o++)n.push(h);first.step.apply(first,n),c._remove(s),first.finish&&first.finish(h)}s=a}requestAnimationFrame(T)}else u=!0},E=function(t){return t.startTime=Date.now(),t.ease=y(t.ease),t.stop=function(){c.remove(t)},void 0===t.from&&(t.from=0),void 0===t.to&&(t.to=100),t.duration||(t.duration=300),t},A=function(t){for(var e=0,n=t.length;n>e;e++)c.append(E(t[e]));u&&T()},M=function(t){var e,i,r,s,a;this.el.each(function(){if(e=this._animationStyle,i=this._originStyle,0==t)a=i;else if(1>t){a={};for(var o in e)if(s=e[o],r=i[o],o==l){var c=r.match(m)||["",1,0,0,1,0,0],f=w(s);f.a=_(c[1],f.a,t),f.b=_(c[2],f.b,t),f.c=_(c[3],f.c,t),f.d=_(c[4],f.d,t),f.tx=_(c[5],f.tx,t),f.ty=_(c[6],f.ty,t),a[o]=f.toString()}else isNaN(parseFloat(s))?a[o]=s:(r=isNaN(parseFloat(r))?h[o]||0:parseFloat(r),a[o]=_(r,s,t))}else a=e;n(this).css(a)}),this._step&&this._step(t)},N=function(t){1==t&&this.el.css(this.css),this._finish&&this._finish(t)},O=function(t){for(var e,i,s,c=0,u=t.length;u>c;c++)e=t[c],e.css&&(s=x(e.css),e.matrix=s.matrix,e.css=s.css,i=e.el=n(e.el),"object"==typeof e.start&&i.transform(e.start),i.each(function(){var t=this,i={},r={},s=getComputedStyle(t,null);n.each(e.css,function(e,n){"string"==typeof n&&(e==l?n=n.replace(p,function(e,n,i){return"translate("+(-1!==n.indexOf("%")?t.offsetWidth*parseFloat(n)/100:parseFloat(n))+"px,"+(-1!==i.indexOf("%")?t.offsetHeight*parseFloat(i)/100:parseFloat(i))+"px)"}):/^(top|margin(-t|T)op)$/.test(e)?n=n.replace(d,function(e){return t.parentNode.offsetHeight*parseFloat(e)/100+"px"}):/^(left|margin(-l|L)eft|padding(-l|L)eft|padding(-t|T)op)$/.test(e)&&(n=n.replace(d,function(e){return t.parentNode.offsetWidth*parseFloat(e)/100+"px"}))),r[e]=s[e],i[e]=n}),t._animationStyle=i,t._originStyle=r}),e._step=e.step,e.step=M,e._finish=e.finish,e.finish=N);return t},$=function(t){n.isArray(t)||(t=[t]),O(t),this.list=t};$.prototype.step=function(t){for(var e,n=this.list,i=0,r=n.length;r>i;i++)e=n[i],e.from=t,e.step(t/100);return this},$.prototype.animate=function(t,e,n){for(var i,r=this.list,s=0,a=r.length;a>s;s++)i=r[s],i.duration=t,i.to=e,i.finish=i.start=void 0;return i.finish=n,A(r),this},e.Animation=$,e.parallel=function(t){A(O(t))},e.animate=function(){var t=arguments,e={},n=0,i=t[n++];return"function"==typeof i?e.step=i:(e.el=i,e.css=t[n++]),e.duration=t[n++],e.ease=t[n++],e.finish=t[n],A([e]),e};var j={step:function(t){for(var i,e=0,n=this.momentums.length;n>e;e++)i=this.momentums[e],i.current=i.start+(i.result-i.start)*t;this.momentumStep.apply(this.ctx,this.momentums)},finish:function(){this.bounce()},bounce:function(){for(var e,n,s,t=0,i=0,r=this.momentums.length;r>i;i++)s=this.momentums[i],n=s.current<s.min?s.min:s.current>s.max?s.max:s.current,n!=s.current?(s.start=s.current,s.result=n,t++):s.divisor&&n%s.divisor!=0&&(e=s.divisor,s.start=s.current,s.result=e/2>n%e?n-n%e:n-n%e+e,t++);0==t?this.end.call(this.ctx):(this.duration=400,A([this]))}},k=function(t,e,n,i,r,s,a){var m,v,o=e-t,c=r-e,u=e-i,l=6e-4,h=Math.abs(o)/n,f=h*h/(2*l),d=0,p=0;return s=a||s,o>0&&f>c?(p=s/(6/(f/h*l))/2,c+=p,h=h*c/f,f=c):0>o&&f>u&&(p=s/(6/(f/h*l))/2,u+=p,h=h*u/f,f=u),f*=0>o?-1:1,p*=0>o?-1:1,d=h/l,v=e+f,0!=p&&(m=.15/(p/f),m>1&&(f-=p,p/=m,f+=p,v=e+f)),i>e&&i>v||e>r&&v>r?(f=0,d=0,outside=0,v=e):(a&&0==p&&(v=v%a==0?v:a/2>v%a?v-v%a:v-v%a+a,v=v>r?r:i>v?i:v,300>d&&(d=300),f=v-e),a&&d>400&&(d=400)),{dist:f,time:Math.round(d),outside:p,result:v,current:e,start:e,max:r,min:i,divisor:a}};e.step=_,e.momentum=function(t,e,i,r,s,a){var o=[],c={},u=0;if("number"==typeof t[0])t=[t];else if(!t.length)return void s.call(a);for(var f,l=0,h=t.length;h>l;l++)f=k.apply(this,t[l]),0!=f.dist&&(u=Math.max(u,f.time)),o.push(f);for(var f,l=0,h=o.length;h>l;l++)f=o[l],0!=f.outside&&(f.result=f.result-f.outside+400*f.outside/u);return n.extend(c,j,{ctx:a||c,momentums:o,momentumStep:i,duration:u,ease:r,end:s}),0!=u?(e&&c.duration>e&&(c.duration=e),A([c])):c.bounce(),c}});define("core/master",function(t,e,n){var r=(t("$"),t("util")),s=t("./route"),a=r.getPath,o={checkQueryString:function(t,e){t.route.url!=e.url&&(t._setRoute(e),t.trigger("QueryChange"))},mapRoute:function(t,e){return this.route=new s(t,e),this},skip:0,_currentActivity:null,_activities:{},set:function(t,e){this._activities[a(t)]=e},get:function(t,e){var n=this,i="string"==typeof t?n.route.match(t):t;if(i){var r=a(i.path),s=this._activities[r];null==s?!function(t){i["package"]?seajs.use(i["package"]+".js?v"+sl.buildVersion,t):t()}(function(){seajs.use(i.view,function(t){var o,a={application:n,route:i};null!=t?(o=n.$el.find('[data-path="'+i.path+'"]'),o.length&&(a.el=o),s=new t(a),n.set(r,s),s.then(function(){e.call(n,s,i)})):(n.skip++,location.hash=n._currentActivity.url)})}):e.call(n,s,i)}},remove:function(t){this._activities[a(t)]=void 0}};n.exports=o});define("core/app",function(t,e,n){var i=t("$"),r=t("util"),s=t("bridge"),o=(t("./base"),t("./view")),c=t("./master"),u=t("./animation"),l=t("./linklist"),h=t("./promise"),f=t("./touch"),d=t("./route"),v=(t("./activity"),r.noop,r.lastIndexOf),b=(Array.prototype.slice,r.getPath,d.standardizeHash),w=c.checkQueryString,_=function(e,n,r,s){s||(s=(e?r:n).toggleAnim);var a=t("anim/"+s),o=e?"open":"close",c="ease-out",u=i.extend({},a[o+"EnterAnimationFrom"]),l=i.extend({},a[o+"ExitAnimationFrom"]);return u.zIndex=e?a.openEnterZIndex:a.closeEnterZIndex,u.display="block",l.zIndex=e?a.openExitZIndex:a.closeExitZIndex,[{el:r.$el,start:u,css:a[o+"EnterAnimationTo"],ease:c},{el:n.$el,start:l,css:a[o+"ExitAnimationTo"],ease:c}]},x=function(t,e){t.startExit(),t.$el.siblings('.view:not([data-path="'+e.path+'"])').hide(),null===e.el.parentNode&&e.$el.appendTo(t.application.el)},A=function(t){t.touch=new f(t.el,{start:function(){var e,n,t=this,i=t.touch.dx;if(t.touch.isDirectionY||t.swiperPromise)return void t.touch.stop();t.width=window.innerWidth;var r=t._currentActivity,s=t.isSwipeLeft=i>0;t.swiper=null,e=s?r.swipeLeftForwardAction?(n=!0,r.swipeLeftForwardAction):(n=!1,r.swipeLeftBackAction):r.swipeRightForwardAction?(n=!0,r.swipeRightForwardAction):(n=!1,r.swipeRightBackAction),e||(s&&"Left"==r.referrerDir?e=r.referrer:s||"Left"==r.referrerDir||(e=r.referrer),n=!1),e?(t.swiperPromise=new h,t.mask.show(),t.get(e,function(e){x(r,e),t.isSwipeOpen=n,t.swiper=new u.Animation(_(n,r,e)),t.swipeActivity=e,t.swiperPromise.resolve()})):t.swiperPromise=null},move:function(t){var n,e=this,i=e.touch.dx;e.swiperPromise&&e.swiperPromise.then(function(){return e.isSwipeLeft&&0>i||!e.isSwipeLeft&&i>0?void e.swiper.step(0):(n=100*Math.abs(i)/e.width,void e.swiper.step(n))},e)},stop:function(){var t=this;t.isCancelSwipe=t.touch.isMoveLeft!==t.isSwipeLeft||Math.abs(t.touch.dx)<=10,t.swiperPromise&&t.swiperPromise.then(function(){t.queue([200,t.isCancelSwipe?0:100,function(){var e=t.swipeActivity,n=t._currentActivity;t.isCancelSwipe?(n.isPrepareExitAnimation=!1,n.$el.addClass("active"),e.$el.remove(),t.mask.hide()):(t._currentActivity=t.swipeActivity,t.navigate(e.url),e.finishEnterAnimation(),t.isSwipeOpen?(e.referrer=n.url,e.referrerDir=t.isSwipeLeft?"Right":"Left",n.trigger("Pause")):n.destroy()),t.turning()}],t.swiper.animate,t.swiper),t.swiperPromise=null})}},t)},T=o.extend(c,{events:{"tap,click a[href]:not(.js-link-default)":function(t){var e=this,n=i(t.currentTarget);if(/^(http\:|https\:|javascript\:|mailto\:|tel\:)/.test(n.attr("href")))n.addClass("js-link-default");else if(t.preventDefault(),"tap"==t.type){var r=n.attr("href");/^#/.test(r)||(r="#"+r),null!=n.attr("forward")?e.forward(r):null!=n.attr("back")?e.back(r):e.to(r)}return!1},"tap [data-back]":function(t){this.back(i(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this.forward(i(t.currentTarget).attr("data-forward"))},"focus input":function(t){this.activeInput=t.target}},_history:[],_historyCursor:-1,isHistoryBack:!1,el:'<div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div><div class="viewport"></div><canvas class="imagecanvas"></canvas>',backGesture:!0,initialize:function(){var t=this,e="tap click touchend touchmove touchstart";t._queue=new l,t.mask=i(t.$el[0]).off(e).on(e,!1),t.el=t.$el[1],t.canvas=t.$el[2],t.backGesture&&A(this);var n=!1;this.on("back",function(){var t=location.hash;""==t||"#"===t||"/"===t||"#/"===t?n?s.exit():(n=!0,setTimeout(function(){n=!1},2e3),sl.tip("")):history.back()})},start:function(){var e=this,n=i(window),a=location.hash||"/";s.hasStatusBar&&r.style("header{border-top-width:20px;border-top-style:solid;box-sizing:content-box !important;}header~.main{margin-top:20px;}"),e.$el.appendTo(document.body),e.$el=i(e.el),e.hash=a=b(a),e.queue([a,function(i){i.$el.appendTo(e.el),e._currentActivity=i,e._history.push(i.url),e._historyCursor++,i.$el.transform(t("anim/"+i.toggleAnim).openEnterAnimationTo),i.then(function(){i.$el.addClass("active"),i.trigger("Resume").trigger("Show"),e.trigger("start"),e.turning()}),n.on("hashchange",function(){a=e.hash=b(location.hash);var t=v(e._history,a),n=(e._skipRecordHistory||-1==t)&&!e.isHistoryBack;e._skipRecordHistory!==!0?-1==t?e.isHistoryBack?e._history.splice(e._historyCursor,0,a):(e._history.push(a),e._historyCursor++):(e._history.length=t+1,e._historyCursor=t):e._skipRecordHistory=!1,0==e.skip?e[n?"forward":"back"](a):e.skip>0?e.skip--:e.skip=0,e.isHistoryBack=!1})}],e.get,e),i(window).on("load",function(){location.hash||(location.hash="/")})},_queue:null,queue:function(t,e,n){var i=this._queue;"function"==typeof t&&(n=e,e=t,t=void 0),i.append({context:n,fn:e,args:t}),1==i.length&&e.apply(n,t)},turning:function(){var t=this._queue;t.length&&(t.shift(),t.length&&(t=t.first(),t.fn.apply(t.context,t.args)))},_animationTo:function(t,e,n,i,r){var s=this,a=s._currentActivity,o="string"==typeof t?s.route.match(t):t;if(t=o.url,e||(e=300),t!=b(location.hash)&&1==s._queue.length){var c=s._queue.first().args;c&&c[0]===t&&s.navigate(t)}return a.path==o.path?(w(a,o),void s.turning()):void s.get(o,function(c){if(c.path==a.path)return w(c,o),void s.turning();s._currentActivity=c,x(a,c),c.then(function(){c.trigger("Resume")});var d,l="open"==i,h="ease-out",f=_(l,a,c,n);l&&(c.referrer=a.url,c.referrerDir=a.swipeRightForwardAction==t?"Left":"Right");for(var p=!1,m=function(){p||(p=!0,clearTimeout(v),r&&r(c),c.finishEnterAnimation(),s.turning())},v=setTimeout(m,e+100),g=0,y=f.length;y>g;g++)d=f[g],d.ease=h,d.duration=e,d.el.css(u.transform(d.start).css).animate(d.css,e,h,m)})},to:function(t){this.queue(function(){this._navigate(t),this.turning()},this)},_navigate:function(t,e){t=b(t);var n=this,i=v(n._history,t);e===!0&&n.skip++,-1==i?(n._history.splice(n._historyCursor+1,0,t),n._history.length=n._historyCursor+2,n._historyCursor++,n._skipRecordHistory=!0,location.hash=t):(i!=n._historyCursor&&history.go(i-n._historyCursor),e===!0&&(n._history.length=i+1,n._historyCursor=i))},navigate:function(t){this._navigate(t,!0)},forward:function(t,e,n){var i=this.route.match(t);i&&this.queue([i.url],function(){var i=this._currentActivity;this._animationTo(t,e,n,"open",function(){i.trigger("Pause")})},this)},back:function(t,e,n){var i=this.route.match(t);i&&this.queue([i.url],function(){var t=this,r=t._currentActivity;i?("string"==typeof e&&(n=e,e=null),t._animationTo(i,e,n,"close",function(){r.destroy()})):(r.startExit(),t.isHistoryBack=!0,history.back(),t.turning())},this)}});return T});define("core/activity",function(t,e,n){var i=t("./page"),r=t("util"),s=t("../widget/scroll"),o=(Array.prototype.slice,i.extend({toggleAnim:"def",onHtmlLoad:function(){var t=this;if(!t.swipeRightBackAction){var e=t.$("header [data-back]");e.length&&(t.swipeRightBackAction=e.attr("data-back")||"/")}t._scrolls=s.bind(t.$(".scrollview"))},onLoad:r.noop,initialize:function(){this.on("Create",this.onHtmlLoad),this.one("Show",this.onLoad),this.on("Destroy",this._onDestroy),i.prototype.initialize.apply(this,arguments)},_onDestroy:function(){this._scrolls&&$.each(this._scrolls,function(t,e){e.destory()}),this.application.remove(this.url)},isExiting:!1,startExit:function(){var t=this;if(!t.isExiting){t.isExiting=!0;var e=t.application;e.activeInput&&(e.activeInput.blur(),e.activeInput=null),t.$el.removeClass("active"),e.mask.show()}},finishEnterAnimation:function(){var t=this;t.application.mask.hide(),t.isExiting=!1,t.then(function(){t.$el.addClass("active"),t.trigger("Show")})},redirect:function(t){var e=this,n=e.application;n.get(t,function(t,i){t.el.className=t.className+" active",n.$el.append(t.$el),n._currentActivity=t,e.$el.remove(),e.trigger("Pause"),t.then(function(){t.trigger("Resume"),t.trigger("Show")})})},prompt:function(t,e,n,i){i="function"!=typeof n?n:i,n="function"==typeof e?e:n,e="function"==typeof e?"":e,!this._prompt&&(this._prompt=this.createDialog({content:'<input type="text" class="prompt-text" />',buttons:[{text:"",click:function(){this.hide()}},{text:"",click:function(){this.hide(),this.ok&&this.ok(this.$(".prompt-text").val())}}]}));var r=this._prompt;r.title(t||"").show(i),r.$(".prompt-text").val(e).focus(),r.ok=$.proxy(n,this)},createDialog:function(t){var e=this,n=new Dialog(t);return e.bindQueryAction("dialog",n,{show:"show","":"hide"}),n},forward:function(t,e,n){this.application.forward(t,e,n)},back:function(t,e,n){this.application.back(t,e,n)}}));return o});define("core/touch",function(t,e,n){var i=t("$"),s=(t("util"),t("animation")),a=t("./event"),c=(Array.prototype.slice,function(t,e,n){var r=this,s=i(t);r.$el=s,r.el=s[0],r.options=e||{},r.ctx=n||r,s.on("touchstart",i.proxy(r._start,r)).on("touchmove",i.proxy(r._move,r)).on("touchend",i.proxy(r._end,r)),r.options.stop&&r.on("stop",r.options.stop,r.ctx)});return c.prototype={minDelta:0,on:a.on,trigger:a.trigger,_stopMomentum:function(){return this.momentum?(this.momentum.stop&&this.momentum.stop(),this._isClickStopAni=!0,!0):!1},_start:function(t){var e=this,n=t.touches[0];e.pointX=e.startX=e.sx=n.pageX,e.pointY=e.startY=e.sy=n.pageY,e.isTouchStop=!1,e.isTouchStart=!1,e.isTouchMoved=!1,e.startTime=t.timeStamp||Date.now(),e.isClickStopMomentum=e._stopMomentum()},_move:function(t){if(!this.isTouchStop){var e=this,n=t.touches[0],i=e.startX-n.pageX,r=e.startY-n.pageY,s=t.timeStamp||Date.now();if(e.deltaX=i,e.deltaY=r,e.dx=e.sx-n.pageX,e.dy=e.sy-n.pageY,!e.isTouchStart){var a=Math.abs(i)>=e.minDelta&&Math.abs(i)>Math.abs(r),o=!a;if(!o&&!a)return!1;if(e.isTouchStart=!0,e.isDirectionY=o,e.isDirectionX=a,e.dir=a,e.isInit||(e.options.init&&e.options.init.call(e.ctx),e.isInit=!0),e.options.start.call(e.ctx),e.isTouchStop)return}return e.options.move.call(e.ctx,i,r),e.isTouchMoved=!0,e.isMoveLeft=e.pointX-n.pageX>0?!0:e.pointX==n.pageX?e.isMoveLeft:!1,e.isMoveTop=e.pointY-n.pageY>0?!0:e.pointY==n.pageY?e.isMoveTop:!1,e.pointX=n.pageX,e.pointY=n.pageY,s-e.startTime>300&&(e.startTime=s,e.startX=n.pageX,e.startY=n.pageY,e.options.resetStartTime&&e.options.resetStartTime.call(e.ctx)),!1}},stop:function(){this.isTouchStop=!0},addMomentumOptions:function(t,e,n,i,r,s){return this.momentumOptions.push([t||0,e||0,this.duration,n||0,i||0,r||0,s]),this},_momentum:function(){this.options.momentum&&this.options.momentum.apply(this.ctx,arguments)},_stop:function(){this.momentum=null,this._isClickStopAni=!1,this.trigger("stop")},_end:function(t){var e=this;if((!e.isTouchMoved||e.isTouchStop)&&e._isClickStopAni)return e.momentum.finish(),e._isClickStopAni=!1,!e.isClickStopMomentum;if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop)){e.isTouchStop=!0,i(t.target).trigger("touchcancel");var a=(t.changedTouches[0],(t.timeStamp||Date.now())-e.startTime);return e.duration=a,300>a||!e.momentum?(e.momentumOptions=[],e.options.beforeMomentum&&e.options.beforeMomentum.call(e.ctx,a),e.momentum=s.momentum(e.momentumOptions,e.options.maxDuration,e._momentum,e.options.ease||"ease",e._stop,e)):e.momentum.finish(),!1}},destory:function(){this.$el.off("touchstart",this._start).off("touchmove",this._move).off("touchend",this._end)}},c});define("widget/scrollview",function(t,e,n){var i=t("$"),s=(t("core/animation"),t("core/event")),a=t("core/touch"),o=function(t){return i('<div class="sl_scroller" style="width:100%;"></div>').append(t.children()).appendTo(t.html(""))},c=function(t,e){e=i.extend({ease:"ease",hScroll:!0,vScroll:!0},e);var n=this;n.options=e,n.$el=i(t).css({overflow:"hidden"}),n.el=n.$el[0],n.$scroller=o(n.$el),n.scroller=n.$scroller[0],n.touch=new a(n.$el,n,n)};c.prototype={off:s.off,on:s.on,trigger:s.trigger,init:function(){var t=this.$scroller.matrix();this.x=-t.tx,this.minX=0,this.y=-t.ty,this.minY=0},start:function(){var t=this,e=t.touch;return t.wrapperW=t.el.clientWidth,t.scrollW=t.scroller.offsetWidth,t.maxX=Math.max(t.scrollW-t.wrapperW,0),t._startLeft=t.startLeft=t.x,t.wrapperH=t.el.clientHeight,t.scrollH=t.scroller.offsetHeight,t.maxY=Math.max(t.scrollH-t.wrapperH,0),t._startTop=t.startTop=t.y,(!t.options.hScroll||t.wrapperW>=t.scrollW)&&e.isDirectionX||(!t.options.vScroll||t.wrapperH>=t.scrollH)&&e.isDirectionY?void e.stop():void 0},stop:function(){this.$el.triggerHandler("scrollStop",[0,this.y])},resetStartTime:function(){this.options.hScroll&&(this.startLeft=this.startLeft+this.touch.deltaX,this._startLeft=this.x),this.options.vScroll&&(this.startTop=this.startTop+this.touch.deltaY,this._startTop=this.y)},move:function(){if(this.options.hScroll){var t=this.startLeft+this.touch.deltaX;(t<this.minX||t>this.maxX)&&(t=this.options.vScroll?t<this.minX?this.minX:this.maxX:t<this.minX?t+(this.minX-t)/2:t+(this.maxX-t)/2),this.x=t}if(this.options.vScroll){var e=this.startTop+this.touch.deltaY;(e<this.minY||e>this.maxY)&&(e=e<this.minY?e+(this.minY-e)/2:e+(this.maxY-e)/2),this.y=e}this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},beforeMomentum:function(){this.touch.addMomentumOptions(this._startLeft,this.x,this.minX,this.maxX,this.wrapperW,this.divisorX).addMomentumOptions(this._startTop,this.y,this.minY,this.maxY,this.wrapperH)},momentum:function(t,e){this.x=t.current,this.y=e.current,this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},scrollTo:function(t,e,n){this.x=t>this.maxX?this.maxX:t<this.minX?this.minX:t,this.y=e>this.maxY?this.maxY:e<this.minY?this.minY:e;var i={"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"};n?this.$scroller.animate(i,n,"ease-out"):this.$scroller.css(i)},destory:function(){this.touch.destory()}},c.addScroller=o,n.exports=c});define("widget/scroll",function(t,e,i){var n=t("$"),r=t("util"),a=(t("animation"),t("./scrollview")),o=function(t){var e=this;if(e.scrollView||0==e.parentNode.scrollTop){var i=t.touches[0],n=e.$.matrix();e.isStart=!1,e.isStop=!1,e.isMoved=!1,e.sy=e.oy=e.pointY=i.pageY,e.sx=i.pageX,e.st=n.ty,e.isLoading=e.isDataLoading}else e.isStop=!0},c=function(t){var e=this;if(!e.isStop){var i=t.touches[0],n=i.pageY-e.sy,r=i.pageX-e.sx;if(e.oy=e.pointY,e.pointY=i.pageY,!e.isStart&&(e.isStart=!0,Math.abs(r)>Math.abs(n)))return void(e.isStop=!0);var s=e.scrollView;return(s?s.y<=0:0==e.parentNode.scrollTop)&&n>0?(e.isMoved=!0,e.refreshAgain=!0,e.ty=e.st+.5*n,e.$.css({"-webkit-transform":"translate(0px,"+e.ty+"px) translateZ(0)"}),this.isLoading||e.$refresh.html(e.ty>70?"":"")):e.isStop=!0,e.isStop}},u=function(t){var e=this;if(e.isMoved){var i=t.changedTouches[0],n=e.ty,r=n>70?50:0,a=e.oy-i.pageY,o=function(){e.$.animate({"-webkit-transform":"translate(0px,"+r+"px) translateZ(0)"},300+-1*a,"cubic-bezier(.3,.78,.43,.95)",function(){e.refreshAgain=!1,e.isLoading||0==r||(e.isLoading=e.isDataLoading=!0,e.$refresh.html('<div class="dataloading"></div>'),e.$.triggerHandler("refresh"))})};return e.isMoved=!1,e.isLoading&&!e.isDataLoading&&(r=0),-5>a?e.$.animate({"-webkit-transform":"translate(0px,"+(n-1.5*a)+"px) translateZ(0)"},-1.5*a,"cubic-bezier(.3,.78,.43,.95)",o):o(),!1}},l=function(){var t=this,e=function(){if(t.$refresh.html(""),t.isDataLoading=!1,!t.refreshAgain){var e=t.$.matrix().ty,i=Math.max(e-50,0);t.$.animate({"-webkit-transform":"translate(0px,"+i+"px) translateZ(0)"},400,"cubic-bezier(.3,.78,.43,.95)")}};t.options.refresh.call(this,e,function(t){sl.tip("string"==typeof t?t:t.msg),e()})},h=function(t){var e=this,i=t.touches[0],n=+new Date;e.__sy=e.__pointY=e.__startY=i.pageY,e.__sx=i.pageX,e.__hasMomentum=!1,e.__isMoved=!1,e.__isStart=!1,e.__isScroll=n-e.__timestamp<=16},f=function(t){var e=this,i=t.touches[0],n=i.pageY,s=i.pageY-e.__sy,a=i.pageX-e.__sx;return e.__oPointY=e.__pointY,e.__pointY=n,e.__isMoved=!0,!e.__isStart&&(e.__isStart=!0,!e.options.hScroll&&Math.abs(a)>Math.abs(s))?!1:void(r.ios&&e.$refresh&&e.scrollTop<0&&(e.isRefresh=e.scrollTop<-70))},p=function(t){t._stm&&clearTimeout(t._stm),t._stm=setTimeout(function(){t._stm=null,n(t).trigger("scrollStop",[0,t.scrollTop])},80)},d=function(){var t=this;t.__isScroll=!0,t.__timestamp=+new Date,(t.__hasMomentum||r.android)&&p(t)},m=function(t){var e=this,s=(n(e),t.changedTouches[0].pageY),a=Math.abs(e.__oPointY-s);r.ios&&5>a?(e._isStop=!1,p(e),e.__hasMomentum=!1):e.__hasMomentum=!0,t.cancelTap=e.__isScroll,e.isRefresh&&(e.isRefresh=!1,e.$refresh.html('<div class="dataloading"></div>'),e.$scroller.css({"-webkit-transform":"translate(0px,50px) translateZ(0)"}).triggerHandler("refresh"))};e.bind=function(t,e){var i=[];return("string"==typeof t?n(t):t).each(function(){var p,t=this,s=n(t).addClass("scrollview");if(e&&e.useScroll||r.android&&parseFloat(r.osVersion<=2.3)?(p=new a(this,e),i.push(p)):(this.__timestamp=0,r.ios?s.css({"-webkit-overflow-scrolling":"touch",overflowY:"scroll"}):r.android&&s.css({overflowY:"scroll"}),s.on("scroll",d).on("touchstart",h).on("touchmove",f).on("touchend",m).each(function(){this._scrollTop=0,this.options=n.extend({hScroll:!1},e)}),i.push({destory:function(){s.off("touchstart",h).off("touchmove",f).off("touchend",m).off("scroll",d)}})),s.on("focus","input,textarea",function(e){var i=e.currentTarget,r=0;do r+=i.offsetTop,i=i.offsetParent;while(i&&t!=i&&!n.contains(i,t));var s=r-(window.innerHeight/4-60);setTimeout(function(){p?p.scrollTo(p.x,s):t.scrollTop=s},1e3)}),e&&e.refresh){var v=s.children(".sl_scroller"),g=n('<div class="refresh" style="height:50px;text-align:center;line-height:50px;"></div>');v.length||(v=a.addScroller(s));var y=v[0];y.$refresh=g,y.$=v,y.options=e,p&&(y.scrollView=p),v.css({marginTop:-50}).prepend(g).on("touchstart",o).on("touchmove",c).on("touchend",u).on("refresh",l),this.$refresh=g,this.$scroller=v}}),i}});define("widget/tip",function(t,e){var i=t("$"),r=(t("util"),t("core/promise")),s=i('<div class="tip" style="display:none"></div>').on(i.fx.transitionEnd,function(){s.hasClass("tip-hide")&&s.hide()}).appendTo(document.body);e.promise=r.resolve(),e.msec=2e3,e.show=function(){s.hasClass("tip-show")||s.removeClass("tip-hide").show().addClass("tip-show")},e.msg=function(t){var e=this;e.promise.then(function(){return s.html(t),e.show(),setTimeout(function(){e.hide(),e.promise.resolve()},e.msec),this})},e.hide=function(){s.removeClass("tip-show").addClass("tip-hide")},sl.tip=function(t){e.msg(t)}});define("widget/dialog",["$","util","./../core/base","./../core/view"],function(t,e,i){var n=t("$"),r=t("util"),s=t("./../core/view"),o=null,a=s.extend({events:{"tap .js_dialog_btn":"action","tap .js_close_dialog":function(){this.hide()},touchmove:function(t){t.preventDefault()}},className:"dialog",el:"<div></div>",template:r.template('<%if(isShowClose){%><div class="dialog-close js_close_dialog"></div><%}%><%if(isShowTitle){%><div class="dialog-title"><h3 class="js_title"><%=title%></h3></div><%}%><div class="dialog-content js_content"><%=content%></div><div class="dialog-btns"><%for(var i=0,len=buttons.length,button;i<n;i++){button=buttons[i];%><a class="dialog-btn js_dialog_btn<%=button.className?" "+button.className:" "%>"><%=button.text%></a><%}%></div>'),options:{isShowClose:!1,isShowTitle:!0,title:null,content:null,buttons:[]},title:function(t){return"undefined"==typeof t?this.$title.html():(this.$title.html(t),this)},initialize:function(){var t=this,e=r.pick(t.options,["isShowClose","isShowTitle","title","content","buttons"]);t.$el.html(t.template(e)),t.$title=t.$(".js_title"),t.$content=t.$(".js_content")},action:function(t){this.options.buttons[n(t.currentTarget).index()].click.call(this,t)},hide:function(){var t=this;t._visible&&(t._visible=!1,o.hide(),t.$el.css({"-webkit-transform":"scale(1)",opacity:1}).animate({opacity:0,scale:0},300,"ease-out",function(){t.$el.hide(),t.trigger("Hide")}))},show:function(t){var e=this;e._visible||(e._visible=!0,t=n(t),o||(o=n('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: #888;opacity: 0.5;z-index:2000;display:none"></div>').appendTo(document.body)),o.show(),null==e.el.parentNode&&e.$el.appendTo(document.body),e.$el.css({"-webkit-transform":"",display:"block",top:"50%"}),e.$el.css({marginTop:this.$el.height()/-2,"-webkit-transform":"scale(0)",opacity:0}).animate({opacity:1,scale:1},300,"ease-out",function(){e.trigger("Show")}))},content:function(t){return"undefined"==typeof t?this.$content:void this.$content.html(t)}}),c=null;sl.prompt=function(t,e,i){e||(e=t,t=""),c?c.title(t):c=new a({title:t,content:'<input type="text" class="prompt-text" /><input type="password" class="prompt-text" />'}),c.$("input.prompt-text").val("").hide().filter('[type="'+(i||"text")+'"]').show(),c.options.onOk=function(){return e.call(this,this.$('input[type="'+(i||"text")+'"].prompt-text').val())},c.options.onCancel=function(){e.call(this)},c.show(),n(window).one("hashchange",function(){c.hide()})};var l=null;return sl.confirm=function(t,e,i,r){var s={};n.isPlainObject(t)?(r=i,i=e,n.extend(s,t)):n.isFunction(e)?(r=i,i=e,s.content=t,s.title=""):(s.title=t,s.content=e),l?(l.title(s.title),l.$(".dialog-content").html(s.content),l.$(".js_hide").html(s.cancelText||""),l.$(".js_ok").html(s.okText||"")):l=new a(s),l.options.onOk=function(){i.call(this)},l.options.onCancel=function(){r&&r.call(this)},l.show(),n(window).one("hashchange",function(){l.hide()})},a});define("widget/loading",["$","util","bridge","./../core/view"],function(t,e,i){var n=t("$"),r=t("util"),o=(t("./../core/view"),t("bridge")),a=[],c=["$el","url","method","headers","dataType","xhrFields","success","complete","pageIndex","pageSize","append","$content","$scroll","checkData","check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"],l=function(t){n.extend(this,r.pick(t,c)),t.el&&(this.$el=n(t.el)),this.el=this.$el[0],this.params=t.params||{},this.error=t.error||this.showError,this.$content=t.$content||this.$el,this.$scroll=t.$scroll||this.$el};l.prototype={KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",method:"GET",dataType:"json",pageIndex:1,pageSize:10,template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',errorTemplate:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},complete:r.noop,showError:function(t){var e=this;if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=n(e.errorTemplate).on("tap",".js_reload",n.proxy(e.reload,e)).appendTo(e.$el));"string"==typeof t&&(t={msg:t,showReload:!0});var r=i.find(".js_reload");t.showReload?r.show():r.hide(),i.find(".js_msg").html(t.msg||""),i.show()}else e.showMsg('<div class="data-reload js_reload"><i class="i-refresh"></i></div>')},showLoading:function(){var e,t=this;this.$error&&this.$error.hide(),1==t.pageIndex?(t.$loading||(t.$loading=n(t.template)),t.$loading.css({display:"block"}).appendTo(t.$el),t.$refreshing&&t.$refreshing.hide()):(e=this.$refreshing,e.show().find(".js_msg").html("..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide())},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.hide()},setHeaders:function(t,e){var i;e?(i={})[t]=e:i=t,void 0===this.headers&&(this.headers={});for(var n in i)this.headers[n]=i[n];return this},setParam:function(t,e){var i;e?(i={})[t]=e:i=t;for(var n in i)e=i[n],n==this.KEY_PAGE?this.pageIndex=e:n==this.KEY_PAGESIZE?this.pageSize=e:this.params[n]=e;return this},getParam:function(t){return t?this.params[t]:this.params},reload:function(t,e){this.isLoading||this.setParam(this.KEY_PAGE,1).load(t,e)},load:function(t,e){var i=this;if(!i.isLoading){i.isLoading=!0,"function"==typeof t&&(e=t,t=null),i.params[i.KEY_PAGE]=i.pageIndex,i.params[i.KEY_PAGESIZE]=i.pageSize;for(var r=a.length-1;r>=0;r--)a[r].disableAutoRefreshing();t&&t.showLoading===!1||i.showLoading(),i._xhr=n.ajax({url:o.url(i.url),headers:i.headers,xhrFields:i.xhrFields,data:i.params,type:i.method,dataType:i.dataType,error:function(t){i._xhr=null,i.isLoading=!1,i.error({msg:""},t),e&&e.call(i,{msg:""},null)},success:function(t,n,r){i._xhr=null,i.isLoading=!1,!i.check||i.check(t)?(i.hideLoading(),i.checkData===!1||i.hasData(t)?(1!=i.pageIndex&&i.append?i.append(t,n,r):i.success(t,n,r),e&&e.call(i,null,t),i.checkAutoRefreshing(t)):i.dataNotFound(t)):(i.isLoading=!1,i.error(t),e&&e.call(i,t,null))},complete:n.proxy(i.complete,i)})}},_refresh:function(){this.abort().load()},dataNotFound:function(t,e){var i=this;1==i.pageIndex?i.showError(""):setTimeout(function(){i.$refreshing.hide()},3e3)},_scroll:function(t,e,i){var n=this;!n.isLoading&&n._scrollY<i&&i+n.$scroll.height()>=n.$refreshing[0].offsetTop&&n._refresh(),n._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.append&&(e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE])?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){(this.$refreshing||(this.$refreshing=n(this.refresh)).appendTo(this.$content)).show();this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$scroll.on("scrollStop",n.proxy(this._scroll,this)),this._scrollY=this.el.scrollTop,this.el.scrollTop+this.$scroll.height()>=this.$refreshing[0].offsetTop&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$scroll.off("scrollStop",this._scroll),this.$refreshing&&this.$refreshing.hide())},abort:function(){return this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading()),this},destory:function(){this.abort(),this.disableAutoRefreshing(),this.$error&&this.$error.off("tap",".js_reload",this.reload)}},l.extend=r.extend,i.exports=l});define("widget/slider",function(t,e,i){var n=t("$"),r=t("util"),s=t("./scrollview"),o=function(t,e){e=n.extend({maxDuration:400,ease:"ease-out",hScroll:!0,vScroll:!1,width:"100%",index:0,autoLoop:!1},e),n.extend(this,r.pick(e,["width","loop","render","template","itemTemplate","navTemplate"]));var c,i=this,o=e.data,a=[];"string"==typeof i.itemTemplate&&(i.itemTemplate=r.template(i.itemTemplate)),"string"==typeof i.width&&(i.width=parseInt(i.width.replace("%",""))),n.isArray(o)||(o=[o]),i._data=o,i.length=o.length,void 0!=e.index&&(e.index=e.index);for(var u=0,h=o.length;h>u;u++)a.push(i.render(o[u]));s.call(this,n(i.template({items:a.join(""),navs:""})).appendTo(n(t)),e),e=this.options,i.touch.on("stop",i.stop,i),c=i.$slider=i.$el.find(".js_slider"),i.$items=c.children(),i.slider=c[0],i.length<2?i.loop=!1:i.width<100&&(i.loop=!1);var d;i.loop?(c.prepend(i.$items.eq(i.length-1).clone()),c.append(i.$items.eq(0).clone()),i.$items=c.children(),e.index++):d=i.length,e.imagelazyload&&(i.bind("Change",function(){i._loadImage()}),i._loadImage()),e.arrow&&(i._prev=n('<span class="slider-pre js_pre"></span>').appendTo(i.$el),i._next=n('<span class="slider-next js_next"></span>').appendTo(i.$el),i.$el.on("tap",".js_pre",function(t){i.index(e.index-1,300)}).on("tap",".js_next",function(t){i.index(e.index+1,300)})),n(window).on("ortchange",n.proxy(i._adjustWidth,i)),i._adjustWidth(),i.index(e.index),e.autoLoop&&i.startAutoLoop()};o.prototype=Object.create(s.prototype),n.extend(o.prototype,{loop:!1,startAutoLoop:function(){var t=this;t.loopTimer||(t.loopTimer=setTimeout(function(){t.index(t.options.index+1),t.loopTimer=setTimeout(arguments.callee,t.options.autoLoop)},t.options.autoLoop))},stopAutoLoop:function(){clearTimeout(this.loopTimer),this.loopTimer=null},start:function(){var t=this,e=t.touch,i=this._getIndex();return!t.options.hScroll&&e.isDirectionX||!t.options.vScroll&&e.isDirectionY?void e.stop():(t.maxX=Math.min(t.scrollerW-t.wrapperW,(i+1)*t.wrapperW),t.minX=Math.max(0,(i-1)*t.wrapperW),t._startLeft=t.startLeft=t.x,void t.stopAutoLoop())},index:function(t,e){var n,i=this.options;return"undefined"==typeof t?i.index:(t=t>=this.$items.length?0:0>t?this.$items.length-1:t,this.loop&&(0==t?(t=this.$items.length-2,this.maxX=n=t*this.wrapperW):t==this.$items.length-1&&(t=1,this.minX=n=t*this.wrapperW)),i.index!=t&&(this.currentData=this._data[this.loop?t-1:t],this._change(),i.index=t),n=t*this.wrapperW,void this.scrollTo(n,0,e))},_getIndex:function(){var t=Math.round(this.x/this.wrapperW);return t},data:function(t){return this._data[t||this.options.index]},appendItem:function(){var t=n(this.renderItem(""));return this.$slider.append(t),this.length++,this._adjustWidth(),t},prependItem:function(){var t=n(this.renderItem(""));return this.$slider.prepend(t),this.length++,this._adjustWidth(),t},render:function(t){return this.renderItem(this.itemTemplate(t))},renderItem:r.template('<li class="js_slide_item slider-item"><%=$data%></li>'),itemTemplate:"<%= %>",navTemplate:r.template('<ol class="js_slide_navs slider-nav"><%for(var i=0,len=items.length;i<len;i++){%><li class="slide-nav-item <%=current%> slide-nav-item"></li><%}%></ol>'),template:r.template('<div class="slider"><ul class="js_slider slider-con"><%=items%></ul><%=navs%></div>'),stop:function(){var t=this,i=(t.x,this._getIndex());t.index(i),t.options.autoLoop&&t.startAutoLoop()},_loadImage:function(){var t=this,e=t.$items.eq(t.options.index);e.prop("_detected")||(t.loop&&(1==t.options.index?e=e.add(t.$slider.children(":last-child")):t.options.index==t.length+1&&(e=e.add(t.$slider.children(":first-child")))),e.find("img[lazyload]").each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}),e.prop("_detected",!0))},_adjustWidth:function(){var t=this,e=t.$slider,i=e.children(),n=i.length;t.wrapperW=t.el.clientWidth*t.width/100,t.scrollerW=t.wrapperW*n,e.css({width:n*t.width+"%",marginLeft:(100-t.width)/2+"%"}),t.x=t.wrapperW*t.options.index,t.$scroller.css({"-webkit-transform":"translate("+-t.x+"px,0px) translateZ(0)"}),t.divisorX=t.wrapperW,i.css({width:100/n+"%"})},_change:function(){var t=this,e=t.options;t.loop?e.index-1:e.index;e.onChange&&e.onChange.call(t,e.index),t.trigger("change",e.index,t.currentData)},destory:function(){n(window).off("ortchange",this._adjustWidth),that.$el.off("tap"),this.touch.destory()}}),i.exports=o});define("anim/def",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{translate:"99%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"-50%,0"},closeEnterAnimationTo:{translate:"0,0"},closeEnterAnimationFrom:{translate:"-50%,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"100%,0"}}}),define("anim/menu",function(){return{openEnterZIndex:1,closeEnterZIndex:2,openExitZIndex:3,closeExitZIndex:1,openEnterAnimationFrom:{translate:"-80%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationFrom:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationTo:{translate:"0,0",scale:"1,1"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"-80%,0"}}}),define("anim/dialog",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{scale:".3,.3",opacity:0},openEnterAnimationTo:{scale:"1,1",opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{scale:"1,1",translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{scale:"1,1",opacity:1},closeExitAnimationTo:{scale:".3,.3",opacity:0}}}),define("anim/fade",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{opacity:0},openEnterAnimationTo:{opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{opacity:1},closeExitAnimationTo:{opacity:0}}});