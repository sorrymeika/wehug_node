!function(i,e){function a(i){return function(e){return{}.toString.call(e)=="[object "+i+"]"}}function u(){return o++}function g(i){return i.match(p)[0]}function f(i){for(i=i.replace(h,"/");i.match(_);)i=i.replace(_,"/");return i=i.replace(b,"$1/")}function y(i){var e=i.length-1,s=i.charAt(e);return"#"===s?i.substring(0,e):".js"===i.substring(e-2)||i.indexOf("?")>0||".css"===i.substring(e-3)||"/"===s?i:i+".js"}function C(i){var s,e=t.paths;return e&&(s=i.match(w))&&n(e[s[1]])&&(i=e[s[1]]+s[2]),i}function $(i){var e=t.vars;return e&&i.indexOf("{")>-1&&(i=i.replace(T,function(i,s){return n(e[s])?e[s]:i})),i}function A(i){var e=t.map,s=i;if(e)for(var a=0,l=e.length;l>a;a++){var n=e[a];if(s=r(n)?n(i)||i:i.replace(n[0],n[1]),s!==i)break}return s}function S(i,e){var s,a=i.charAt(0);if(k.test(i))s=i;else if("."===a)s=f((e?g(e):t.cwd)+i);else if("/"===a){var l=t.cwd.match(D);s=l?l[0]+i.substring(1):i}else s=t.base+i;return 0===s.indexOf("//")&&(s=location.protocol+s),s}function I(i,e){if(!i)return"";var s=t.alias&&t.alias[i];s&&n(s)&&(i=s),i=C(i),i=$(i),i=y(i);var a=S(i,e);return a=A(a),!s||Q[a]||n(s)||(Q[a]={exports:s,status:ei.EXECUTED,exec:si.prototype.exec}),a}function q(i){return i.hasAttribute?i.src:i.getAttribute("src",4)}function R(i,e,s,t){var a=P.test(i),l=M.createElement(a?"link":"script");s&&(l.charset=s),c(t)||l.setAttribute("crossorigin",t),F(l,e,a,i),a?(l.rel="stylesheet",l.href=i):(l.async=!0,l.src=i),L=l,N?B.insertBefore(l,N):B.appendChild(l),L=null}function F(i,e,t,a){function n(){i.onload=i.onerror=i.onreadystatechange=null,t||s.data.debug||B.removeChild(i),i=null,e()}var l="onload"in i;return!t||!j&&l?void(l?(i.onload=n,i.onerror=function(){s.emit("error",{uri:a,node:i}),n()}):i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&n()}):void setTimeout(function(){H(i,e)},1)}function H(i,e){var t,s=i.sheet;if(j)s&&(t=!0);else if(s)try{s.cssRules&&(t=!0)}catch(a){"NS_ERROR_DOM_SECURITY_ERR"===a.name&&(t=!0)}setTimeout(function(){t?e():H(i,e)},20)}function G(){if(L)return L;if(U&&"interactive"===U.readyState)return U;for(var i=B.getElementsByTagName("script"),e=i.length-1;e>=0;e--){var s=i[e];if("interactive"===s.readyState)return U=s}}function W(i){var e=[];return i.replace(z,"").replace(X,function(i,s,t){t&&e.push(t)}),e}function si(i,e){this.uri=i,this.dependencies=e||[],this.exports=null,this.status=0,this._waitings={},this._remain=0}if(!i.seajs){var s=i.seajs={version:"2.2.3"},t=s.data={},l=a("Object"),n=a("String"),d=Array.isArray||a("Array"),r=a("Function"),c=a("Undefined"),o=0,m=t.events={};s.on=function(i,e){var t=m[i]||(m[i]=[]);return t.push(e),s},s.off=function(i,e){if(!i&&!e)return m=t.events={},s;var a=m[i];if(a)if(e)for(var l=a.length-1;l>=0;l--)a[l]===e&&a.splice(l,1);else delete m[i];return s};var v=s.emit=function(i,e){var a,t=m[i];if(t)for(t=t.slice();a=t.shift();)a(e);return s},p=/[^?#]*\//,h=/\/\.\//g,_=/\/[^\/]+\/\.\.\//,b=/([^:\/])\/\//g,w=/^([^\/:]+)(\/.+)$/,T=/{([^{]+)}/g,k=/^\/\/.|:\//,D=/^.*?\/\/.*?\//,M=document,x=g(M.URL),E=M.scripts,O=M.getElementById("seajsnode")||E[E.length-1],V=g(q(O)||x);s.resolve=I;var L,U,B=M.head||M.getElementsByTagName("head")[0]||M.documentElement,N=B.getElementsByTagName("base")[0],P=/\.css(?:\?|$)/i,j=+navigator.userAgent.replace(/.*(?:AppleWebKit|AndroidWebKit)\/(\d+).*/,"$1")<536;s.request=R;var K,X=/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|\/\*[\S\s]*?\*\/|\/(?:\\\/|[^\/\r\n])+\/(?=[^\/])|\/\/.*|\.\s*require|(?:^|[^$])\brequire\s*\(\s*(["'])(.+?)\1\s*\)/g,z=/\\\\/g,Q=s.cache={},J={},Z={},ii={},ei=si.STATUS={FETCHING:1,SAVED:2,LOADING:3,LOADED:4,EXECUTING:5,EXECUTED:6};si.prototype.resolve=function(){for(var i=this,e=i.dependencies,s=[],t=0,a=e.length;a>t;t++)s[t]=si.resolve(e[t],i.uri);return s},si.prototype.load=function(){var i=this;if(!(i.status>=ei.LOADING)){i.status=ei.LOADING;var e=i.resolve();v("load",e);for(var t,s=i._remain=e.length,a=0;s>a;a++)t=si.get(e[a]),t.status<ei.LOADED?t._waitings[i.uri]=(t._waitings[i.uri]||0)+1:i._remain--;if(0===i._remain)return void i.onload();var l={};for(a=0;s>a;a++)t=Q[e[a]],t.status<ei.FETCHING?t.fetch(l):t.status===ei.SAVED&&t.load();for(var n in l)l.hasOwnProperty(n)&&l[n]()}},si.prototype.onload=function(){var i=this;i.status=ei.LOADED,i.callback&&i.callback();var s,t,e=i._waitings;for(s in e)e.hasOwnProperty(s)&&(t=Q[s],t._remain-=e[s],0===t._remain&&t.onload());delete i._waitings,delete i._remain},si.prototype.fetch=function(i){function d(){s.request(l.requestUri,l.onRequest,l.charset,l.crossorigin)}function c(){delete J[n],Z[n]=!0,K&&(si.save(a,K),K=null);var i,e=ii[n];for(delete ii[n];i=e.shift();)i.load()}var e=this,a=e.uri;e.status=ei.FETCHING;var l={uri:a};v("fetch",l);var n=l.requestUri||a;return!n||Z[n]?void e.load():J[n]?void ii[n].push(e):(J[n]=!0,ii[n]=[e],v("request",l={uri:a,requestUri:n,onRequest:c,charset:r(t.charset)?t.charset(n):t.charset,crossorigin:r(t.crossorigin)?t.crossorigin(n):t.crossorigin}),void(l.requested||(i?i[l.requestUri]=d:d())))},si.prototype.exec=function(){function t(i){return si.get(t.resolve(i)).exec()}var i=this;if(i.status>=ei.EXECUTING)return i.exports;i.status=ei.EXECUTING;var s=i.uri;t.resolve=function(i){return si.resolve(i,s)},t.async=function(i,e){return si.use(i,e,s+"_async_"+u()),t};var a=i.factory,l=r(a)?a(t,i.exports={},i):a;return l===e&&(l=i.exports),delete i.factory,i.exports=l,i.status=ei.EXECUTED,v("exec",i),l},si.resolve=function(i,e){var t={id:i,refUri:e};return v("resolve",t),t.uri||s.resolve(t.id,e)},si.define=function(i,s,t){var a=arguments.length;1===a?(t=i,i=e):2===a&&(t=s,d(i)?(s=i,i=e):s=e),!d(s)&&r(t)&&(s=W(t.toString()));var l={id:i,uri:si.resolve(i),deps:s,factory:t};if(!l.uri&&M.attachEvent){var n=G();n&&(l.uri=n.src.replace(/\?.*/g,""))}v("define",l),l.uri?si.save(l.uri,l):K=l},si.save=function(i,e){var s=si.get(i);s.status<ei.SAVED&&(s.id=e.id||i,s.dependencies=e.deps||[],s.factory=e.factory,s.status=ei.SAVED)},si.get=function(i,e){return Q[i]||(Q[i]=new si(i,e))},si.use=function(e,s,t){var a=si.get(t,d(e)?e:[e]);a.callback=function(){for(var e=[],t=a.resolve(),l=0,n=t.length;n>l;l++)e[l]=Q[t[l]].exec();s&&s.apply(i,e),delete a.callback},a.load()},si.preload=function(i){var e=t.preload,s=e.length;s?si.use(e,function(){e.splice(0,s),si.preload(i)},t.cwd+"_preload_"+u()):i()},s.use=function(i,e){return si.preload(function(){si.use(i,e,t.cwd+"_use_"+u())}),s},si.define.cmd={},i.define=si.define,s.Module=si,t.fetchedList=Z,t.cid=u,s.require=function(i){var e=si.get(si.resolve(i));return e.status<ei.EXECUTING&&(e.onload(),e.exec()),e.exports};var ti=/^(.+?\/)(\?\?)?(seajs\/)+/;t.base=(V.match(ti)||["",V])[1],t.dir=V,t.cwd=x,t.charset="utf-8",t.preload=function(){var i=[],e=location.search.replace(/(seajs-\w+)(&|$)/g,"$1=1$2");return e+=" "+M.cookie,e.replace(/(seajs-\w+)=1/g,function(e,s){i.push(s)}),i}(),s.config=function(i){for(var e in i){var a=i[e],n=t[e];if(n&&l(n))for(var r in a)n[r]=a[r];else d(n)?a=n.concat(a):"base"===e&&("/"!==a.slice(-1)&&(a+="/"),a=S(a)),t[e]=a}return v("config",i),s}}}(this);var Zepto=function(){function M(e){return null==e?String(e):C[A.call(e)]||"object"}function I(e){return"function"==M(e)}function O(e){return null!=e&&e==e.window}function V(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function N(e){return"object"==M(e)}function P(e){return N(e)&&!O(e)&&Object.getPrototypeOf(e)==Object.prototype}function q(e){return"number"==typeof e.length}function j(e){return l.call(e,function(e){return null!=e})}function B(e){return e.length>0?t.fn.concat.apply([],e):e}function L(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function U(e){return e in o?o[e]:o[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function R(e,i){return"number"!=typeof i||c[L(e)]?i:i+"px"}function F(e){var i,t;return d[e]||(i=r.createElement(e),r.body.appendChild(i),t=getComputedStyle(i,"").getPropertyValue("display"),i.parentNode.removeChild(i),"none"==t&&(t="block"),d[e]=t),d[e]}function H(e){return"children"in e?n.call(e.children):t.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function G(t,s,a){for(i in s)a&&(P(s[i])||E(s[i]))?(P(s[i])&&!P(t[i])&&(t[i]={}),E(s[i])&&!E(t[i])&&(t[i]=[]),G(t[i],s[i],a)):s[i]!==e&&(t[i]=s[i])}function z(e,i){return null==i?t(e):t(e).filter(i)}function X(e,i,t,s){return I(i)?i.call(e,t,s):i}function Z(e,i,t){null==t?e.removeAttribute(i):e.setAttribute(i,t)}function W(i,t){var s=i.className,a=s&&s.baseVal!==e;return t===e?a?s.baseVal:s:void(a?s.baseVal=t:i.className=t)}function Y(e){var i;try{return e?"true"==e||("false"==e?!1:"null"==e?null:/^0/.test(e)||isNaN(i=Number(e))?/^[\[\{]/.test(e)?t.parseJSON(e):e:i):e}catch(s){return e}}function J(e,i){i(e);for(var t in e.childNodes)J(e.childNodes[t],i)}var e,i,t,s,D,k,a=[],n=a.slice,l=a.filter,r=window.document,d={},o={},c={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},u=/^\s*<(\w+|!)[^>]*>/,m=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,p=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,h=/^(?:body|html)$/i,v=/([A-Z])/g,f=["val","css","html","text","data","width","height","offset"],_=["after","prepend","before","append"],g=r.createElement("table"),b=r.createElement("tr"),y={tr:r.createElement("tbody"),tbody:g,thead:g,tfoot:g,td:b,th:b,"*":r.createElement("div")},w=/complete|loaded|interactive/,T=/^[\w-]*$/,C={},A=C.toString,$={},S=r.createElement("div"),x={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},E=Array.isArray||function(e){return e instanceof Array};return $.matches=function(e,i){if(!i||!e||1!==e.nodeType)return!1;var t=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(t)return t.call(e,i);var s,a=e.parentNode,n=!a;return n&&(a=S).appendChild(e),s=~$.qsa(a,i).indexOf(e),n&&S.removeChild(e),s},D=function(e){return e.replace(/-+(.)?/g,function(e,i){return i?i.toUpperCase():""})},k=function(e){return l.call(e,function(i,t){return e.indexOf(i)==t})},$.fragment=function(i,s,a){var l,d,o;return m.test(i)&&(l=t(r.createElement(RegExp.$1))),l||(i.replace&&(i=i.replace(p,"<$1></$2>")),s===e&&(s=u.test(i)&&RegExp.$1),s in y||(s="*"),o=y[s],o.innerHTML=""+i,l=t.each(n.call(o.childNodes),function(){o.removeChild(this)})),P(a)&&(d=t(l),t.each(a,function(e,i){f.indexOf(e)>-1?d[e](i):d.attr(e,i)})),l},$.Z=function(e,i){return e=e||[],e.__proto__=t.fn,e.selector=i||"",e},$.isZ=function(e){return e instanceof $.Z},$.init=function(i,s){var a;if(!i)return $.Z();if("string"==typeof i)if(i=i.trim(),"<"==i[0]&&u.test(i))a=$.fragment(i,RegExp.$1,s),i=null;else{if(s!==e)return t(s).find(i);a=$.qsa(r,i)}else{if(I(i))return t(r).ready(i);if($.isZ(i))return i;if(E(i))a=j(i);else if(N(i))a=[i],i=null;else if(u.test(i))a=$.fragment(i.trim(),RegExp.$1,s),i=null;else{if(s!==e)return t(s).find(i);a=$.qsa(r,i)}}return $.Z(a,i)},t=function(e,i){return $.init(e,i)},t.extend=function(e){var i,t=n.call(arguments,1);return"boolean"==typeof e&&(i=e,e=t.shift()),t.forEach(function(t){G(e,t,i)}),e},$.qsa=function(e,i){var t,s="#"==i[0],a=!s&&"."==i[0],l=s||a?i.slice(1):i,r=T.test(l);return V(e)&&r&&s?(t=e.getElementById(l))?[t]:[]:1!==e.nodeType&&9!==e.nodeType?[]:n.call(r&&!s?a?e.getElementsByClassName(l):e.getElementsByTagName(i):e.querySelectorAll(i))},t.contains=function(e,i){return e!==i&&e.contains(i)},t.type=M,t.isFunction=I,t.isWindow=O,t.isArray=E,t.isPlainObject=P,t.isEmptyObject=function(e){var i;for(i in e)return!1;return!0},t.inArray=function(e,i,t){return a.indexOf.call(i,e,t)},t.camelCase=D,t.trim=function(e){return null==e?"":String.prototype.trim.call(e)},t.uuid=0,t.support={},t.expr={},t.map=function(e,i){var t,a,n,s=[];if(q(e))for(a=0;a<e.length;a++)t=i(e[a],a),null!=t&&s.push(t);else for(n in e)t=i(e[n],n),null!=t&&s.push(t);return B(s)},t.each=function(e,i){var t,s;if(q(e)){for(t=0;t<e.length;t++)if(i.call(e[t],t,e[t])===!1)return e}else for(s in e)if(i.call(e[s],s,e[s])===!1)return e;return e},t.grep=function(e,i){return l.call(e,i)},window.JSON&&(t.parseJSON=JSON.parse),t.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,i){C["[object "+i+"]"]=i.toLowerCase()}),t.fn={forEach:a.forEach,reduce:a.reduce,push:a.push,sort:a.sort,indexOf:a.indexOf,concat:a.concat,map:function(e){return t(t.map(this,function(i,t){return e.call(i,t,i)}))},slice:function(){return t(n.apply(this,arguments))},ready:function(e){return w.test(r.readyState)&&r.body?e(t):r.addEventListener("DOMContentLoaded",function(){e(t)},!1),this},get:function(i){return i===e?n.call(this):this[i>=0?i:i+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return a.every.call(this,function(i,t){return e.call(i,t,i)!==!1}),this},filter:function(e){return I(e)?this.not(this.not(e)):t(l.call(this,function(i){return $.matches(i,e)}))},add:function(e,i){return t(k(this.concat(t(e,i))))},is:function(e){return this.length>0&&$.matches(this[0],e)},not:function(i){var s=[];if(I(i)&&i.call!==e)this.each(function(e){i.call(this,e)||s.push(this)});else{var a="string"==typeof i?this.filter(i):q(i)&&I(i.item)?n.call(i):t(i);this.forEach(function(e){a.indexOf(e)<0&&s.push(e)})}return t(s)},has:function(e){return this.filter(function(){return N(e)?t.contains(this,e):t(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!N(e)?e:t(e)},last:function(){var e=this[this.length-1];return e&&!N(e)?e:t(e)},find:function(e){var i,s=this;return i="object"==typeof e?t(e).filter(function(){var e=this;return a.some.call(s,function(i){return t.contains(i,e)})}):1==this.length?t($.qsa(this[0],e)):this.map(function(){return $.qsa(this,e)})},closest:function(e,i){var s=this[0],a=!1;for("object"==typeof e&&(a=t(e));s&&!(a?a.indexOf(s)>=0:$.matches(s,e));)s=s!==i&&!V(s)&&s.parentNode;return t(s)},parents:function(e){for(var i=[],s=this;s.length>0;)s=t.map(s,function(e){return(e=e.parentNode)&&!V(e)&&i.indexOf(e)<0?(i.push(e),e):void 0});return z(i,e)},parent:function(e){return z(k(this.pluck("parentNode")),e)},children:function(e){return z(this.map(function(){return H(this)}),e)},contents:function(){return this.map(function(){return n.call(this.childNodes)})},siblings:function(e){return z(this.map(function(e,i){return l.call(H(i.parentNode),function(e){return e!==i})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return t.map(this,function(i){return i[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=F(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var i=I(e);if(this[0]&&!i)var s=t(e).get(0),a=s.parentNode||this.length>1;return this.each(function(n){t(this).wrapAll(i?e.call(this,n):a?s.cloneNode(!0):s)})},wrapAll:function(e){if(this[0]){t(this[0]).before(e=t(e));for(var i;(i=e.children()).length;)e=i.first();t(e).append(this)}return this},wrapInner:function(e){var i=I(e);return this.each(function(s){var a=t(this),n=a.contents(),l=i?e.call(this,s):e;n.length?n.wrapAll(l):a.append(l)})},unwrap:function(){return this.parent().each(function(){t(this).replaceWith(t(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(i){return this.each(function(){var s=t(this);(i===e?"none"==s.css("display"):i)?s.show():s.hide()})},prev:function(e){return t(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return t(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0===arguments.length?this.length>0?this[0].innerHTML:null:this.each(function(i){var s=this.innerHTML;t(this).empty().append(X(this,e,i,s))})},text:function(i){return 0===arguments.length?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=i===e?"":""+i})},attr:function(t,s){var a;return"string"==typeof t&&s===e?0==this.length||1!==this[0].nodeType?e:"value"==t&&"INPUT"==this[0].nodeName?this.val():!(a=this[0].getAttribute(t))&&t in this[0]?this[0][t]:a:this.each(function(e){if(1===this.nodeType)if(N(t))for(i in t)Z(this,i,t[i]);else Z(this,t,X(this,s,e,this.getAttribute(t)))})},removeAttr:function(e){return this.each(function(){1===this.nodeType&&Z(this,e)})},prop:function(i,t){return i=x[i]||i,t===e?this[0]&&this[0][i]:this.each(function(e){this[i]=X(this,t,e,this[i])})},data:function(i,t){var s="data-"+i.replace(v,"-$1").toLowerCase(),a=1 in arguments?this.attr(s,t):this.attr(s);return null!==a?Y(a):e},val:function(e){return 0===arguments.length?this[0]&&(this[0].multiple?t(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(i){this.value=X(this,e,i,this.value)})},offset:function(e){if(e)return this.each(function(i){var s=t(this),a=X(this,e,i,s.offset()),n=s.offsetParent().offset(),l={top:a.top-n.top,left:a.left-n.left};"static"==s.css("position")&&(l.position="relative"),s.css(l)});if(0==this.length)return null;var i=this[0].getBoundingClientRect();return{left:i.left+window.pageXOffset,top:i.top+window.pageYOffset,width:Math.round(i.width),height:Math.round(i.height)}},css:function(e,s){if(arguments.length<2){var a=this[0],n=getComputedStyle(a,"");if(!a)return;if("string"==typeof e)return a.style[D(e)]||n.getPropertyValue(e);if(E(e)){var l={};return t.each(E(e)?e:[e],function(e,i){l[i]=a.style[D(i)]||n.getPropertyValue(i)}),l}}var r="";if("string"==M(e))s||0===s?r=L(e)+":"+R(e,s):this.each(function(){this.style.removeProperty(L(e))});else for(i in e)e[i]||0===e[i]?r+=L(i)+":"+R(i,e[i])+";":this.each(function(){this.style.removeProperty(L(i))});return this.each(function(){this.style.cssText+=";"+r})},index:function(e){return e?this.indexOf(t(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?a.some.call(this,function(e){return this.test(W(e))},U(e)):!1},addClass:function(e){return e?this.each(function(i){s=[];var a=W(this),n=X(this,e,i,a);n.split(/\s+/g).forEach(function(e){t(this).hasClass(e)||s.push(e)},this),s.length&&W(this,a+(a?" ":"")+s.join(" "))}):this},removeClass:function(i){return this.each(function(t){return i===e?W(this,""):(s=W(this),X(this,i,t,s).split(/\s+/g).forEach(function(e){s=s.replace(U(e)," ")}),void W(this,s.trim()))})},toggleClass:function(i,s){return i?this.each(function(a){var n=t(this),l=X(this,i,a,W(this));l.split(/\s+/g).forEach(function(i){(s===e?!n.hasClass(i):s)?n.addClass(i):n.removeClass(i)})}):this},scrollTop:function(i){if(this.length){var t="scrollTop"in this[0];return i===e?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=i}:function(){this.scrollTo(this.scrollX,i)})}},scrollLeft:function(i){if(this.length){var t="scrollLeft"in this[0];return i===e?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=i}:function(){this.scrollTo(i,this.scrollY)})}},position:function(){if(this.length){var e=this[0],i=this.offsetParent(),s=this.offset(),a=h.test(i[0].nodeName)?{top:0,left:0}:i.offset();return s.top-=parseFloat(t(e).css("margin-top"))||0,s.left-=parseFloat(t(e).css("margin-left"))||0,a.top+=parseFloat(t(i[0]).css("border-top-width"))||0,a.left+=parseFloat(t(i[0]).css("border-left-width"))||0,{top:s.top-a.top,left:s.left-a.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||r.body;e&&!h.test(e.nodeName)&&"static"==t(e).css("position");)e=e.offsetParent;return e})}},t.fn.detach=t.fn.remove,["width","height"].forEach(function(i){var s=i.replace(/./,function(e){return e[0].toUpperCase()});t.fn[i]=function(a){var n,l=this[0];return a===e?O(l)?l["inner"+s]:V(l)?l.documentElement["scroll"+s]:(n=this.offset())&&n[i]:this.each(function(e){l=t(this),l.css(i,X(this,a,e,l[i]()))})}}),_.forEach(function(e,i){var s=i%2;t.fn[e]=function(){var e,n,a=t.map(arguments,function(i){return e=M(i),"object"==e||"array"==e||null==i?i:$.fragment(i)}),l=this.length>1;return a.length<1?this:this.each(function(e,r){n=s?r:r.parentNode,r=0==i?r.nextSibling:1==i?r.firstChild:2==i?r:null,a.forEach(function(e){if(l)e=e.cloneNode(!0);else if(!n)return t(e).remove();J(n.insertBefore(e,r),function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},t.fn[s?e+"To":"insert"+(i?"Before":"After")]=function(i){return t(i)[e](this),this}}),$.Z.prototype=t.fn,$.uniq=k,$.deserializeValue=Y,t.zepto=$,t}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function u(e){return e._zid||(e._zid=i++)}function m(e,i,t,s){if(i=p(i),i.ns)var a=h(i.ns);return(l[u(e)]||[]).filter(function(e){return e&&(!i.e||e.e==i.e)&&(!i.ns||a.test(e.ns))&&(!t||u(e.fn)===u(t))&&(!s||e.sel==s)})}function p(e){var i=(""+e).split(".");return{e:i[0],ns:i.slice(1).sort().join(" ")}}function h(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function v(e,i){return e.del&&!d&&e.e in o||!!i}function f(e){return c[e]||d&&o[e]||e}function _(i,s,a,n,r,d,o){var m=u(i),h=l[m]||(l[m]=[]);s.split(/\s/).forEach(function(s){if("ready"==s)return e(document).ready(a);var l=p(s);l.fn=a,l.sel=r,l.e in c&&(a=function(i){var t=i.relatedTarget;return!t||t!==this&&!e.contains(this,t)?l.fn.apply(this,arguments):void 0}),l.del=d;var u=d||a;l.proxy=function(e){if(e=C(e),!e.isImmediatePropagationStopped()){e.data=n;var s=u.apply(i,e._args==t?[e]:[e].concat(e._args));return s===!1&&(e.preventDefault(),e.stopPropagation()),s}},l.i=h.length,h.push(l),"addEventListener"in i&&i.addEventListener(f(l.e),l.proxy,v(l,o))})}function g(e,i,t,s,a){var n=u(e);(i||"").split(/\s/).forEach(function(i){m(e,i,t,s).forEach(function(i){delete l[n][i.i],"removeEventListener"in e&&e.removeEventListener(f(i.e),i.proxy,v(i,a))})})}function C(i,s){return(s||!i.isDefaultPrevented)&&(s||(s=i),e.each(T,function(e,t){var a=s[e];i[e]=function(){return this[t]=b,a&&a.apply(s,arguments)},i[t]=y}),(s.defaultPrevented!==t?s.defaultPrevented:"returnValue"in s?s.returnValue===!1:s.getPreventDefault&&s.getPreventDefault())&&(i.isDefaultPrevented=b)),i}function A(e){var i,s={originalEvent:e};for(i in e)w.test(i)||e[i]===t||(s[i]=e[i]);return C(s,e)}var t,i=1,s=Array.prototype.slice,a=e.isFunction,n=function(e){return"string"==typeof e},l={},r={},d="onfocusin"in window,o={focus:"focusin",blur:"focusout"},c={mouseenter:"mouseover",mouseleave:"mouseout"};r.click=r.mousedown=r.mouseup=r.mousemove="MouseEvents",e.event={add:_,remove:g},e.proxy=function(i,t){if(a(i)){var s=function(){return i.apply(t,arguments)};return s._zid=u(i),s}if(n(t))return e.proxy(i[t],i);throw new TypeError("expected function")},e.fn.bind=function(e,i,t){return this.on(e,i,t)},e.fn.unbind=function(e,i){return this.off(e,i)},e.fn.one=function(e,i,t,s){return this.on(e,i,t,s,1)};var b=function(){return!0},y=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,i,t){return this.on(i,e,t)},e.fn.undelegate=function(e,i,t){return this.off(i,e,t)},e.fn.live=function(i,t){return e(document.body).delegate(this.selector,i,t),this},e.fn.die=function(i,t){return e(document.body).undelegate(this.selector,i,t),this},e.fn.on=function(i,l,r,d,o){var c,u,m=this;return i&&!n(i)?(e.each(i,function(e,i){m.on(e,l,r,i,o)}),m):(n(l)||a(d)||d===!1||(d=r,r=l,l=t),(a(r)||r===!1)&&(d=r,r=t),d===!1&&(d=y),m.each(function(t,a){o&&(c=function(e){return g(a,e.type,d),d.apply(this,arguments)}),l&&(u=function(i){var t,n=e(i.target).closest(l,a).get(0);return n&&n!==a?(t=e.extend(A(i),{currentTarget:n,liveFired:a}),(c||d).apply(n,[t].concat(s.call(arguments,1)))):void 0}),_(a,i,d,r,l,u||c)}))},e.fn.off=function(i,s,l){var r=this;return i&&!n(i)?(e.each(i,function(e,i){r.off(e,s,i)}),r):(n(s)||a(l)||l===!1||(l=s,s=t),l===!1&&(l=y),r.each(function(){g(this,i,l,s)}))},e.fn.trigger=function(i,t){return i=n(i)||e.isPlainObject(i)?e.Event(i):C(i),i._args=t,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(i):e(this).triggerHandler(i,t)})},e.fn.triggerHandler=function(i,t){var s,a;return this.each(function(l,r){s=A(n(i)?e.Event(i):i),s._args=t,s.target=r,e.each(m(r,i.type||i),function(e,i){return a=i.proxy(s),s.isImmediatePropagationStopped()?!1:void 0})}),a},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(i){e.fn[i]=function(e){return e?this.bind(i,e):this.trigger(i)}}),["focus","blur"].forEach(function(i){e.fn[i]=function(e){return e?this.bind(i,e):this.each(function(){try{this[i]()}catch(e){}}),this}}),e.Event=function(e,i){n(e)||(i=e,e=i.type);var t=document.createEvent(r[e]||"Events"),s=!0;if(i)for(var a in i)"bubbles"==a?s=!!i[a]:t[a]=i[a];return t.initEvent(e,s,!0),C(t)}}(Zepto),function(e){function u(i,t,s){var a=e.Event(t);return e(i).trigger(a,s),!a.isDefaultPrevented()}function m(e,i,s,a){return e.global?u(i||t,s,a):void 0}function p(i){i.global&&0===e.active++&&m(i,null,"ajaxStart")}function h(i){i.global&&!--e.active&&m(i,null,"ajaxStop")}function v(e,i){var t=i.context;return i.beforeSend.call(t,e,i)===!1||m(i,t,"ajaxBeforeSend",[e,i])===!1?!1:void m(i,t,"ajaxSend",[e,i])}function f(e,i,t,s){var a=t.context,n="success";t.success.call(a,e,n,i),s&&s.resolveWith(a,[e,n,i]),m(t,a,"ajaxSuccess",[i,t,e]),g(n,i,t)}function _(e,i,t,s,a){var n=s.context;s.error.call(n,t,i,e),a&&a.rejectWith(n,[t,i,e]),m(s,n,"ajaxError",[t,s,e||i]),g(i,t,s)}function g(e,i,t){var s=t.context;t.complete.call(s,i,e),m(t,s,"ajaxComplete",[i,t]),h(t)}function b(){}function y(e){return e&&(e=e.split(";",2)[0]),e&&(e==o?"html":e==d?"json":l.test(e)?"script":r.test(e)&&"xml")||"text"}function w(e,i){return""==i?e:(e+"&"+i).replace(/[&?]{1,2}/,"?")}function T(i){i.processData&&i.data&&"string"!=e.type(i.data)&&(i.data=e.param(i.data,i.traditional)),!i.data||i.type&&"GET"!=i.type.toUpperCase()||(i.url=w(i.url,i.data),i.data=void 0)}function C(i,t,s,a){return e.isFunction(t)&&(a=s,s=t,t=void 0),e.isFunction(s)||(a=s,s=void 0),{url:i,data:t,success:s,dataType:a}}function $(i,t,s,a){var n,l=e.isArray(t),r=e.isPlainObject(t);e.each(t,function(t,d){n=e.type(d),a&&(t=s?a:a+"["+(r||"object"==n||"array"==n?t:"")+"]"),!a&&l?i.add(d.name,d.value):"array"==n||!s&&"object"==n?$(i,d,s,t):i.add(t,d)})}var s,a,i=0,t=window.document,n=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=/^(?:text|application)\/javascript/i,r=/^(?:text|application)\/xml/i,d="application/json",o="text/html",c=/^\s*$/;e.active=0,e.ajaxJSONP=function(s,a){if(!("type"in s))return e.ajax(s);var o,m,n=s.jsonpCallback,l=(e.isFunction(n)?n():n)||"jsonp"+ ++i,r=t.createElement("script"),d=window[l],c=function(i){e(r).triggerHandler("error",i||"abort")},u={abort:c};return a&&a.promise(u),e(r).on("load error",function(i,t){clearTimeout(m),e(r).off().remove(),"error"!=i.type&&o?f(o[0],u,s,a):_(null,t||"error",u,s,a),window[l]=d,o&&e.isFunction(d)&&d(o[0]),d=o=void 0}),v(u,s)===!1?(c("abort"),u):(window[l]=function(){o=arguments},r.src=s.url.replace(/\?(.+)=\?/,"?$1="+l),t.head.appendChild(r),s.timeout>0&&(m=setTimeout(function(){c("timeout")},s.timeout)),u)},e.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:d,xml:"application/xml, text/xml",html:o,text:"text/plain"},crossDomain:!0,timeout:0,processData:!0,cache:!0},e.ajax=function(i){var t=e.extend({},i||{}),n=e.Deferred&&e.Deferred();for(s in e.ajaxSettings)void 0===t[s]&&(t[s]=e.ajaxSettings[s]);p(t),t.crossDomain||(t.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(t.url)&&RegExp.$2!=window.location.host),t.url||(t.url=window.location.toString()),T(t),t.cache===!1&&(t.url=w(t.url,"_="+Date.now()));var l=t.dataType,r=/\?.+=\?/.test(t.url);if("jsonp"==l||r)return r||(t.url=w(t.url,t.jsonp?t.jsonp+"=?":t.jsonp===!1?"":"callback=?")),e.ajaxJSONP(t,n);var C,d=t.accepts[l],o={},u=function(e,i){o[e.toLowerCase()]=[e,i]},m=/^([\w-]+:)\/\//.test(t.url)?RegExp.$1:window.location.protocol,h=t.xhr(),g=h.setRequestHeader;if(n&&n.promise(h),t.crossDomain||u("X-Requested-With","XMLHttpRequest"),u("Accept",d||"*/*"),(d=t.mimeType||d)&&(d.indexOf(",")>-1&&(d=d.split(",",2)[0]),h.overrideMimeType&&h.overrideMimeType(d)),(t.contentType||t.contentType!==!1&&t.data&&"GET"!=t.type.toUpperCase())&&u("Content-Type",t.contentType||"application/x-www-form-urlencoded"),t.headers)for(a in t.headers)u(a,t.headers[a]);if(h.setRequestHeader=u,h.onreadystatechange=function(){if(4==h.readyState){h.onreadystatechange=b,clearTimeout(C);var i,s=!1;if(h.status>=200&&h.status<300||304==h.status||0==h.status&&"file:"==m){l=l||y(t.mimeType||h.getResponseHeader("content-type")),i=h.responseText;try{"script"==l?(1,eval)(i):"xml"==l?i=h.responseXML:"json"==l&&(i=c.test(i)?null:e.parseJSON(i))}catch(a){s=a}s?_(s,"parsererror",h,t,n):f(i,h,t,n)}else _(h.statusText||null,h.status?"error":"abort",h,t,n)}},v(h,t)===!1)return h.abort(),_(null,"abort",h,t,n),h;if(t.xhrFields)for(a in t.xhrFields)h[a]=t.xhrFields[a];var A="async"in t?t.async:!0;h.open(t.type,t.url,A,t.username,t.password);for(a in o)g.apply(h,o[a]);return t.timeout>0&&(C=setTimeout(function(){h.onreadystatechange=b,h.abort(),_(null,"timeout",h,t,n)},t.timeout)),h.send(t.data?t.data:null),h},e.get=function(){return e.ajax(C.apply(null,arguments))},e.post=function(){var i=C.apply(null,arguments);return i.type="POST",e.ajax(i)},e.getJSON=function(){var i=C.apply(null,arguments);return i.dataType="json",e.ajax(i)},e.fn.load=function(i,t,s){if(!this.length)return this;var r,a=this,l=i.split(/\s/),d=C(i,t,s),o=d.success;return l.length>1&&(d.url=l[0],r=l[1]),d.success=function(i){a.html(r?e("<div>").html(i.replace(n,"")).find(r):i),o&&o.apply(a,arguments)},e.ajax(d),this};var A=encodeURIComponent;e.param=function(e,i){var t=[];return t.add=function(e,i){this.push(A(e)+"="+A(null===i||void 0===i?"":i))},$(t,e,i),t.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t,i=[];return e([].slice.call(this.get(0).elements)).each(function(){t=e(this);var s=t.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=s&&"reset"!=s&&"button"!=s&&("radio"!=s&&"checkbox"!=s||this.checked)&&i.push({name:t.attr("name"),value:t.val()})}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(i){e.push(encodeURIComponent(i.name)+"="+encodeURIComponent(i.value))}),e.join("&")},e.fn.submit=function(i){if(i)this.bind("submit",i);else if(this.length){var t=e.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(i,t){return i=i||[],e.extend(i,e.fn),i.selector=t||"",i.__Z=!0,i},isZ:function(i){return"array"===e.type(i)&&"__Z"in i}});try{getComputedStyle(void 0)}catch(i){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(i){return null}}}}(Zepto),define&&define("zepto",[],function(){return Zepto});!function(e){function d(e,i,t,s){return Math.abs(e-i)>=Math.abs(t-s)?e-i>0?"Left":"Right":t-s>0?"Up":"Down"}function o(){if(n=null,i.last){var t=e.Event("longTap");t.cancelTouch=u,i.el.trigger(t)}}function c(){n&&clearTimeout(n),n=null}function u(){t&&clearTimeout(t),s&&clearTimeout(s),a&&clearTimeout(a),n&&clearTimeout(n),t=s=a=n=null,i={}}var t,s,a,n,i={},l=750;e(document).ready(function(){var s,r,h,m=0,p=0,v="ontouchstart"in document?["touchstart","touchmove","touchend","touchcancel"]:["mousedown","mousemove","mouseup","mouseleave"];e(document).on(v[0],function(a){m=p=0,h="mousedown"==a.type?a:a.touches[0],a.touches&&1===a.touches.length&&i.x2&&(i.x2=void 0,i.y2=void 0),s=Date.now(),r=s-(i.last||s),i.el=e(a.target),t&&clearTimeout(t),i.x1=h.pageX,i.y1=h.pageY,r>0&&250>=r&&(i.isDoubleTap=!0),i.last=s,n=setTimeout(o,l)}).on(v[1],function(e){("mousemove"!=e.type||"last"in i)&&(h="mousemove"==e.type?e:e.touches[0],c(),i.x2=h.pageX,i.y2=h.pageY,m+=Math.abs(i.x1-i.x2),p+=Math.abs(i.y1-i.y2))}).on(v[2],function(s){if(c(),i.x2&&Math.abs(i.x1-i.x2)>30||i.y2&&Math.abs(i.y1-i.y2)>30)a=setTimeout(function(){i.el.trigger("swipe"),i.el.trigger("swipe"+d(i.x1,i.x2,i.y1,i.y2)),i={}},0);else if("last"in i)if(30>m&&30>p&&!s.cancelTap&&i.el[0]===s.target){var n=e.Event("tap");n.cancelTouch=u,i.el.trigger(n),i.isDoubleTap?(i.el&&i.el.trigger("doubleTap"),i={}):t=setTimeout(function(){t=null,i.el&&i.el.trigger("singleTap"),i={}},250)}else i={};m=p=0}).on(v[3],u),e(window).on("scroll",u)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(i){e.fn[i]=function(e){return this.on(i,e)}})}(Zepto);!function(e,i){function y(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function w(e){return s?s+e:e.toLowerCase()}var s,c,u,m,p,h,v,f,_,g,t="",l={Webkit:"webkit",Moz:"",O:"o"},r=window.document,d=r.createElement("div"),o=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,b={};e.each(l,function(e,a){return d.style[e+"TransitionProperty"]!==i?(t="-"+e.toLowerCase()+"-",s=a,!1):void 0}),c=t+"transform",b[u=t+"transition-property"]=b[m=t+"transition-duration"]=b[h=t+"transition-delay"]=b[p=t+"transition-timing-function"]=b[v=t+"animation-name"]=b[f=t+"animation-duration"]=b[g=t+"animation-delay"]=b[_=t+"animation-timing-function"]="",e.fx={off:s===i&&d.style.transitionProperty===i,speeds:{_default:400,fast:200,slow:600},cssPrefix:t,transitionEnd:w("TransitionEnd"),animationEnd:w("AnimationEnd")},e.fn.animate=function(t,s,a,n,l){return e.isFunction(s)&&(n=s,a=i,s=i),e.isFunction(a)&&(n=a,a=i),e.isPlainObject(s)&&(a=s.easing,n=s.complete,l=s.delay,s=s.duration),s&&(s=("number"==typeof s?s:e.fx.speeds[s]||e.fx.speeds._default)/1e3),l&&(l=parseFloat(l)/1e3),this.anim(t,s,a,n,l)},e.fn.anim=function(t,s,a,n,l){var r,w,A,d={},T="",C=this,$=e.fx.transitionEnd,x=!1;if(s===i&&(s=e.fx.speeds._default/1e3),l===i&&(l=0),e.fx.off&&(s=0),"string"==typeof t)d[v]=t,d[f]=s+"s",d[g]=l+"s",d[_]=a||"linear",$=e.fx.animationEnd;else{w=[];for(r in t)o.test(r)?T+=r+"("+t[r]+") ":(d[r]=t[r],w.push(y(r)));T&&(d[c]=T,w.push(c)),s>0&&"object"==typeof t&&(d[u]=w.join(", "),d[m]=s+"s",d[h]=l+"s",d[p]=a||"linear")}return A=function(i){if("undefined"!=typeof i){if(i.target!==i.currentTarget)return;e(i.target).unbind($,A)}else e(this).unbind($,A);x=!0,e(this).css(b),n&&n.call(this)},s>0&&(this.bind($,A),setTimeout(function(){x||A.call(C)},1e3*s+25)),this.size()&&this.get(0).clientLeft,this.css(d),0>=s&&setTimeout(function(){C.each(function(){A.call(this)})},0),this},d=null}(Zepto);!function(e,i){e.matchMedia=function(){var i=0,t="sl-media-detect",s=e.fx.transitionEnd,a=e.fx.cssPrefix,n=e("<style></style>").append("."+t+"{"+a+"transition: width 0.001ms; width: 0; position: absolute; clip: rect(1px, 1px, 1px, 1px);}\n").appendTo("head");return function(a){var r,o,l=t+i++,d=[],c=1,u=[],m=0,p=function(e,i){-1==u.indexOf(e)&&(u.push(e),n.append("@media "+e+" { #"+l+" { width: "+c+"px; } }\n"),c++,("undefined"==typeof i||i)&&m++)};return p(a,!1),r=e('<div class="'+t+'" id="'+l+'"></div>').appendTo("body").on(s,function(){return m>0?void m--:(o.matches=1===r.width(),void e.each(d,function(i,t){e.isFunction(t)&&t.call(o,o)}))}),o={append:p,matches:1===r.width(),media:a,addListener:function(e){return d.push(e),this},removeListener:function(e){var i=d.indexOf(e);return~i&&d.splice(i,1),this}}}}()}(Zepto);!function(e,i){e.mediaQuery={ortchange:"screen and (width: "+window.innerWidth+"px)"},e(function(){e.matchMedia(e.mediaQuery.ortchange).addListener(function(){e(window).trigger("ortchange")}),e.matchMedia("screen and (height: "+window.innerHeight+"px)").addListener(function(){this.append("screen and (height: "+window.innerHeight+"px)"),e(window).trigger("heightchange")})})}(Zepto);define("util",[],function(){var o,e=Array.prototype,t=e.slice,i=e.concat,s=navigator.userAgent,a=s.match(/(iPhone|iPad|iPod).*OS\s([\d_]+)/i),n=s.match(/MSIE (\d+)/i),l=s.match(/(Android);?[\s\/]+([\d.]+)?/),r=!!l,d=0;a?o=a[2].split("_"):l?o=l[2].split("."):n&&(o=n[1].split("."));var c=function(e,t){var i="0000000000000000"+e;return i.substr(i.length-(t||2))},u={isInApp:/SLApp/.test(s),ios:!!a,ie:!!n,android:r,osVersion:o?parseFloat(o[0]+"."+o[1]):0,isInWechat:/micromessenger/i.test(navigator.userAgent),guid:function(){return++d},isFalse:function(e){return!e||$.isArray(e)&&!e||"object"==typeof e&&u.isEmptyObject(e)},isTrue:function(e){return!this.isFalse(e)},isEmptyObject:function(e){for(var t in e)return!1;return!0},extend:function(e){var t=this,i=function(){t.apply(this,arguments)},s=function(){this.constructor=i};s.prototype=t.prototype,i.prototype=new s;for(var a in e)i.prototype[a]=e[a];for(var a in t)i[a]=t[a];return i},random:function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},log:function(e){this.$log||(this.$log=$('<div style="height:40px;position:fixed;top:0;left:0;right:0;z-index:100000;background:#fff;overflow:auto"></div>').appendTo("body")),this.$log.html(e+"|"+this.$log.html())},indexOf:function(e,t){for(var i="function"==typeof t,s=e.length,a=0;s>a;a++)if(i?t(e[a],a):e[a]==t)return a;return-1},lastIndexOf:function(e,t){for(var i="function"==typeof t,s=e.length-1;s>=0;s--)if(i?t(e[s],s):e[s]==t)return s;return-1},first:function(e,t){for(var i,s=0,a=e.length;a>s;s++)if(i=e[s],t(i,s))return i;return null},find:function(e,t){for(var s,i=[],a=0,n=e.length;n>a;a++)s=e[a],t(s,a)&&i.push(s);return i},select:function(e,t){for(var i=[],s=e.length,a=0;s>a;a++)i.push(t(e[a],a));return i},pick:function(e,s){var n,a={};if(null==e)return a;if("function"==typeof s)for(n in e){var l=e[n];s(l,n,e)&&(a[n]=l)}else for(var r=i.apply([],t.call(arguments,1)),d=0,o=r.length;o>d;d++)n=r[d],n in e&&(a[n]=e[n]);return a},pad:c,formatMoney:function(e){return(e+"").replace(/(\d{3})+(\.|$)/,function(e,t){return e.replace(/\d{3}/g,function(e){return","+e})}).replace(/^,/,"")},deepValue:function(e,t){"string"==typeof t&&(t=t.split("."));for(var i=0,s=t.length;s>i;i++)e=e[t[i]];return e},format:function(e,t){var i=arguments;return e.replace(/\{(\d+)\}/g,function(e,t){return i[parseInt(t)+1]})},formatDate:function(e,t){if("string"==typeof e&&/^\/Date\(\d+\)\/$/.test(e))e=new Function("return new "+e.replace(/\//g,""))();else if("number"==typeof e)e=new Date(e);else if(!e)return"";var i=e.getFullYear()+"",s=e.getMonth()+1,a=e.getDate(),n=e.getHours(),l=e.getMinutes(),r=e.getSeconds(),d=e.getMilliseconds()+"0000";return(t||"yyyy-MM-dd HH:mm:ss").replace(/\y{4}/,i).replace(/y{2}/,i.substr(2,2)).replace(/M{2}/,c(s)).replace(/M/,s).replace(/d{2,}/,c(a)).replace(/d/,e).replace(/H{2,}/i,c(n)).replace(/H/i,n).replace(/m{2,}/,c(l)).replace(/m/,l).replace(/s{2,}/,c(r)).replace(/s/,r).replace(/f+/,function(e){return d.substr(0,e.length)})},style:function(e){var t=document,i=t.getElementsByTagName("head")[0],s=t.createElement("style");s.type="text/css";try{s.appendChild(t.createTextNode(e))}catch(a){s.styleSheet.cssText=e}return i.appendChild(s),s},currency:function(e,t){return(void 0===t||null===t?"ï¿¥":t)+Math.round(100*parseFloat(e))/100},template:function(e,t){var i="var __p=[];var $data=obj||{};with($data){__p.push('"+e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/<%=([\s\S]+?)%>/g,function(e,t){return"',"+t.replace(/\\'/,"'")+",'"}).replace(/<%([\s\S]+?)%>/g,function(e,t){return"');"+t.replace(/\\'/,"'").replace(/[\r\n\t]/g," ")+"__p.push('"}).replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t")+'\');}return __p.join("");',s=new Function("obj",i);return t?s(t):s},encodeHTML:function(e){return(""+e).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&#34;").split("'").join("&#39;")},getPath:function(e){return e.replace(/^http\:\/\/[^\/]+|\?.*$/g,"").toLowerCase()},cookie:function(e,t,i,s){if("undefined"==typeof t){var a=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=a?unescape(a[2]):null}if(null===typeof t){if(t=this.cookie(name),null==t)return;i=-1}if(i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3),i=";expires="+n.toGMTString()}document.cookie=e+"="+escape(t)+(i||"")+";path="+(s||"/")},store:window.localStorage?function(e,t){return"undefined"==typeof t?JSON.parse(localStorage.getItem(e)):void(null===t?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(t)))}:function(){return"undefined"==typeof value?JSON.parse(this.cookie(key)):void(null===value?this.cookie(key,null):this.cookie(key,JSON.stringify(value)))},noop:function(){},circlePoint:function(e,t,i,s){return{x:e+i*Math.cos(s*Math.PI/180),y:t+i*Math.sin(s*Math.PI/180)}},validateEmail:function(e){return/^[-_a-zA-Z0-9\.]+@([-_a-zA-Z0-9]+\.)+[a-zA-Z0-9]{2,3}$/.test(e)},validateMobile:function(e){return/^1[0-9]{10}$/.test(e)}};return u});define("util/md5",[],function(){function s(e){return w(c(b(e),e.length*i))}function c(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var i=1732584193,s=-271733879,a=-1732584194,n=271733878,l=0;l<e.length;l+=16){var r=i,d=s,o=a,c=n;i=m(i,s,a,n,e[l+0],7,-680876936),n=m(n,i,s,a,e[l+1],12,-389564586),a=m(a,n,i,s,e[l+2],17,606105819),s=m(s,a,n,i,e[l+3],22,-1044525330),i=m(i,s,a,n,e[l+4],7,-176418897),n=m(n,i,s,a,e[l+5],12,1200080426),a=m(a,n,i,s,e[l+6],17,-1473231341),s=m(s,a,n,i,e[l+7],22,-45705983),i=m(i,s,a,n,e[l+8],7,1770035416),n=m(n,i,s,a,e[l+9],12,-1958414417),a=m(a,n,i,s,e[l+10],17,-42063),s=m(s,a,n,i,e[l+11],22,-1990404162),i=m(i,s,a,n,e[l+12],7,1804603682),n=m(n,i,s,a,e[l+13],12,-40341101),a=m(a,n,i,s,e[l+14],17,-1502002290),s=m(s,a,n,i,e[l+15],22,1236535329),i=p(i,s,a,n,e[l+1],5,-165796510),n=p(n,i,s,a,e[l+6],9,-1069501632),a=p(a,n,i,s,e[l+11],14,643717713),s=p(s,a,n,i,e[l+0],20,-373897302),i=p(i,s,a,n,e[l+5],5,-701558691),n=p(n,i,s,a,e[l+10],9,38016083),a=p(a,n,i,s,e[l+15],14,-660478335),s=p(s,a,n,i,e[l+4],20,-405537848),i=p(i,s,a,n,e[l+9],5,568446438),n=p(n,i,s,a,e[l+14],9,-1019803690),a=p(a,n,i,s,e[l+3],14,-187363961),s=p(s,a,n,i,e[l+8],20,1163531501),i=p(i,s,a,n,e[l+13],5,-1444681467),n=p(n,i,s,a,e[l+2],9,-51403784),a=p(a,n,i,s,e[l+7],14,1735328473),s=p(s,a,n,i,e[l+12],20,-1926607734),i=h(i,s,a,n,e[l+5],4,-378558),n=h(n,i,s,a,e[l+8],11,-2022574463),a=h(a,n,i,s,e[l+11],16,1839030562),s=h(s,a,n,i,e[l+14],23,-35309556),i=h(i,s,a,n,e[l+1],4,-1530992060),n=h(n,i,s,a,e[l+4],11,1272893353),a=h(a,n,i,s,e[l+7],16,-155497632),s=h(s,a,n,i,e[l+10],23,-1094730640),i=h(i,s,a,n,e[l+13],4,681279174),n=h(n,i,s,a,e[l+0],11,-358537222),a=h(a,n,i,s,e[l+3],16,-722521979),s=h(s,a,n,i,e[l+6],23,76029189),i=h(i,s,a,n,e[l+9],4,-640364487),n=h(n,i,s,a,e[l+12],11,-421815835),a=h(a,n,i,s,e[l+15],16,530742520),s=h(s,a,n,i,e[l+2],23,-995338651),i=v(i,s,a,n,e[l+0],6,-198630844),n=v(n,i,s,a,e[l+7],10,1126891415),a=v(a,n,i,s,e[l+14],15,-1416354905),s=v(s,a,n,i,e[l+5],21,-57434055),i=v(i,s,a,n,e[l+12],6,1700485571),n=v(n,i,s,a,e[l+3],10,-1894986606),a=v(a,n,i,s,e[l+10],15,-1051523),s=v(s,a,n,i,e[l+1],21,-2054922799),i=v(i,s,a,n,e[l+8],6,1873313359),n=v(n,i,s,a,e[l+15],10,-30611744),a=v(a,n,i,s,e[l+6],15,-1560198380),s=v(s,a,n,i,e[l+13],21,1309151649),i=v(i,s,a,n,e[l+4],6,-145523070),n=v(n,i,s,a,e[l+11],10,-1120210379),a=v(a,n,i,s,e[l+2],15,718787259),s=v(s,a,n,i,e[l+9],21,-343485551),i=_(i,r),s=_(s,d),a=_(a,o),n=_(n,c)}return Array(i,s,a,n)}function u(e,t,i,s,a,n){return _(g(_(_(t,e),_(s,n)),a),i)}function m(e,t,i,s,a,n,l){return u(t&i|~t&s,e,t,a,n,l)}function p(e,t,i,s,a,n,l){return u(t&s|i&~s,e,t,a,n,l)}function h(e,t,i,s,a,n,l){return u(t^i^s,e,t,a,n,l)}function v(e,t,i,s,a,n,l){return u(i^(t|~s),e,t,a,n,l)}function _(e,t){var i=(65535&e)+(65535&t),s=(e>>16)+(t>>16)+(i>>16);return s<<16|65535&i}function g(e,t){return e<<t|e>>>32-t}function b(e){for(var t=Array(),s=(1<<i)-1,a=0;a<e.length*i;a+=i)t[a>>5]|=(e.charCodeAt(a/i)&s)<<a%32;return t}function w(t){for(var i=e?"0123456789ABCDEF":"0123456789abcdef",s="",a=0;a<4*t.length;a++)s+=i.charAt(t[a>>2]>>a%4*8+4&15)+i.charAt(t[a>>2]>>a%4*8&15);return s}var e=0,i=8;return{md5:s}});define("bridge",["$","util"],function(e,t,i){function f(e,t,i){var s,a;"object"==typeof e?i=s.callback:("function"==typeof t&&(i=t,t=null),s={method:e,params:t}),"function"==typeof i&&(a="hybridCallback"+ ++h,s.callback=a,p[a]=function(){i.apply(null,arguments),delete p[a]}),v.isInApp&&alert("slapp://"+JSON.stringify(s))}var s=e("$"),a=e("util"),n=navigator.userAgent,l=a.ios,r=a.android,c=(Array.prototype.slice,s(window)),u=s('meta[name="api-base-url"]').attr("content"),p={};window.hybridFunctions=p,window.trigger=function(){s.fn.trigger.apply(c,arguments)},window.callJS=function(e){c.trigger(e.method,e.params)};var h=0,v={isInApp:/SLApp/.test(n),isAndroid:r,android:r,ios:l,versionName:"1.0",exec:f,tip:function(e){f("tip",e+"")},openInApp:function(e){f("openInApp",e+"")},open:function(e){f("open",e+"")},pickImage:function(e){f("pickImage",e)},takePhoto:function(e){setTimeout(function(){f("takePhoto",e)},0)},queryThumbnailList:function(e){f("queryThumbnailList",e)},pickColor:function(e){f("pickColor",e)},getDeviceToken:function(e){f("getDeviceToken",e)},getLocation:function(e){f("getLocation",e)},pay:function(e,t){f("pay",e,t)},share:function(){f("share")},isDevelopment:"Win32"==navigator.platform||"Win64"==navigator.platform,url:function(e){return/^http\:\/\//.test(e)?e:u+e},post:function(e,t,i,s){s="function"==typeof i?i:s,i="function"==typeof i?null:i,f("post",{url:this.url(e),files:i,data:t},s)},exit:function(){f("exit")},update:function(e,t,i){r?f("updateApp",{downloadUrl:e,versionName:t},i):this.open(e)}};return v.hasStatusBar=v.isInApp&&a.ios&&a.osVersion>=7,v});define("graphics/matrix2d",[],function(){function e(e,t,i,s,a,n){this.setValues(e,t,i,s,a,n)}var t=e.prototype;return e.DEG_TO_RAD=Math.PI/180,e.identity=null,t.setValues=function(e,t,i,s,a,n){return this.a=null==e?1:e,this.b=t||0,this.c=i||0,this.d=null==s?1:s,this.tx=a||0,this.ty=n||0,this},t.append=function(e,t,i,s,a,n){var l=this.a,r=this.b,d=this.c,o=this.d;return(1!=e||0!=t||0!=i||1!=s)&&(this.a=l*e+d*t,this.b=r*e+o*t,this.c=l*i+d*s,this.d=r*i+o*s),this.tx=l*a+d*n+this.tx,this.ty=r*a+o*n+this.ty,this},t.prepend=function(e,t,i,s,a,n){var l=this.a,r=this.c,d=this.tx;return this.a=e*l+i*this.b,this.b=t*l+s*this.b,this.c=e*r+i*this.d,this.d=t*r+s*this.d,this.tx=e*d+i*this.ty+a,this.ty=t*d+s*this.ty+n,this},t.appendMatrix=function(e){return this.append(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.prependMatrix=function(e){return this.prepend(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.appendTransform=function(t,i,s,a,n,l,r,d,o){if(n%360)var c=n*e.DEG_TO_RAD,u=Math.cos(c),p=Math.sin(c);else u=1,p=0;return l||r?(l*=e.DEG_TO_RAD,r*=e.DEG_TO_RAD,this.append(Math.cos(r),Math.sin(r),-Math.sin(l),Math.cos(l),t,i),this.append(u*s,p*s,-p*a,u*a,0,0)):this.append(u*s,p*s,-p*a,u*a,t,i),(d||o)&&(this.tx-=d*this.a+o*this.c,this.ty-=d*this.b+o*this.d),this},t.prependTransform=function(t,i,s,a,n,l,r,d,o){if(n%360)var c=n*e.DEG_TO_RAD,u=Math.cos(c),p=Math.sin(c);else u=1,p=0;return(d||o)&&(this.tx-=d,this.ty-=o),l||r?(l*=e.DEG_TO_RAD,r*=e.DEG_TO_RAD,this.prepend(u*s,p*s,-p*a,u*a,0,0),this.prepend(Math.cos(r),Math.sin(r),-Math.sin(l),Math.cos(l),t,i)):this.prepend(u*s,p*s,-p*a,u*a,t,i),this},t.rotate=function(t){t*=e.DEG_TO_RAD;var i=Math.cos(t),s=Math.sin(t),a=this.a,n=this.b;return this.a=a*i+this.c*s,this.b=n*i+this.d*s,this.c=-a*s+this.c*i,this.d=-n*s+this.d*i,this},t.skew=function(t,i){return t*=e.DEG_TO_RAD,i*=e.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(t),Math.cos(t),0,0),this},t.scale=function(e,t){return this.a*=e,this.b*=e,this.c*=t,this.d*=t,this},t.translate=function(e,t){return this.tx+=this.a*e+this.c*t,this.ty+=this.b*e+this.d*t,this},t.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},t.invert=function(){var e=this.a,t=this.b,i=this.c,s=this.d,a=this.tx,n=e*s-t*i;return this.a=s/n,this.b=-t/n,this.c=-i/n,this.d=e/n,this.tx=(i*this.ty-s*a)/n,this.ty=-(e*this.ty-t*a)/n,this},t.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},t.equals=function(e){return this.tx===e.tx&&this.ty===e.ty&&this.a===e.a&&this.b===e.b&&this.c===e.c&&this.d===e.d},t.transformPoint=function(e,t,i){return i=i||{},i.x=e*this.a+t*this.c+this.tx,i.y=e*this.b+t*this.d+this.ty,i},t.decompose=function(t){null==t&&(t={}),t.x=this.tx,t.y=this.ty,t.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),t.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),s=Math.atan2(this.b,this.a),a=Math.abs(1-i/s);return 1e-5>a?(t.rotation=s/e.DEG_TO_RAD,this.a<0&&this.d>=0&&(t.rotation+=t.rotation<=0?180:-180),t.skewX=t.skewY=0):(t.skewX=i/e.DEG_TO_RAD,t.skewY=s/e.DEG_TO_RAD),t},t.copy=function(e){return this.setValues(e.a,e.b,e.c,e.d,e.tx,e.ty)},t.clone=function(){return new e(this.a,this.b,this.c,this.d,this.tx,this.ty)},t.toString=function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty+")"},e});define("graphics/tween",[],function(e,t,i){var s={linear:function(e,t,i,s){return i*e/s+t},ease:function(e,t,i,s){return-i*(e/=s)*(e-2)+t},easeIn:function(e,t,i,s){return i*(e/=s)*e+t},easeOut:function(e,t,i,s){return-i*(e/=s)*(e-2)+t},easeInOut:function(e,t,i,s){return(e/=s/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},easeInCubic:function(e,t,i,s){return i*(e/=s)*e*e+t},easeOutCubic:function(e,t,i,s){return i*((e=e/s-1)*e*e+1)+t},easeInOutCubic:function(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e+t:i/2*((e-=2)*e*e+2)+t},easeInQuart:function(e,t,i,s){return i*(e/=s)*e*e*e+t},easeOutQuart:function(e,t,i,s){return-i*((e=e/s-1)*e*e*e-1)+t},easeInOutQuart:function(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e*e+t:-i/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(e,t,i,s){return i*(e/=s)*e*e*e*e+t},easeOutQuint:function(e,t,i,s){return i*((e=e/s-1)*e*e*e*e+1)+t},easeInOutQuint:function(e,t,i,s){return(e/=s/2)<1?i/2*e*e*e*e*e+t:i/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(e,t,i,s){return-i*Math.cos(e/s*(Math.PI/2))+i+t},easeOutSine:function(e,t,i,s){return i*Math.sin(e/s*(Math.PI/2))+t},easeInOutSine:function(e,t,i,s){return-i/2*(Math.cos(Math.PI*e/s)-1)+t},easeInExpo:function(e,t,i,s){return 0==e?t:i*Math.pow(2,10*(e/s-1))+t},easeOutExpo:function(e,t,i,s){return e==s?t+i:i*(-Math.pow(2,-10*e/s)+1)+t},easeInOutExpo:function(e,t,i,s){return 0==e?t:e==s?t+i:(e/=s/2)<1?i/2*Math.pow(2,10*(e-1))+t:i/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(e,t,i,s){return-i*(Math.sqrt(1-(e/=s)*e)-1)+t},easeOutCirc:function(e,t,i,s){return i*Math.sqrt(1-(e=e/s-1)*e)+t},easeInOutCirc:function(e,t,i,s){return(e/=s/2)<1?-i/2*(Math.sqrt(1-e*e)-1)+t:i/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(e,t,i,s,a,n){if(0==e)return t;if(1==(e/=s))return t+i;if(n||(n=.3*s),!a||a<Math.abs(i)){a=i;var l=n/4}else var l=n/(2*Math.PI)*Math.asin(i/a);return-(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-l)*(2*Math.PI)/n))+t},easeOutElastic:function(e,t,i,s,a,n){if(0==e)return t;if(1==(e/=s))return t+i;if(n||(n=.3*s),!a||a<Math.abs(i)){a=i;var l=n/4}else var l=n/(2*Math.PI)*Math.asin(i/a);return a*Math.pow(2,-10*e)*Math.sin((e*s-l)*(2*Math.PI)/n)+i+t},easeInOutElastic:function(e,t,i,s,a,n){if(0==e)return t;if(2==(e/=s/2))return t+i;if(n||(n=s*(.3*1.5)),!a||a<Math.abs(i)){a=i;var l=n/4}else var l=n/(2*Math.PI)*Math.asin(i/a);return 1>e?-.5*(a*Math.pow(2,10*(e-=1))*Math.sin((e*s-l)*(2*Math.PI)/n))+t:a*Math.pow(2,-10*(e-=1))*Math.sin((e*s-l)*(2*Math.PI)/n)*.5+i+t},easeInBack:function(e,t,i,s,a){return void 0==a&&(a=1.70158),i*(e/=s)*e*((a+1)*e-a)+t},easeOutBack:function(e,t,i,s,a){return void 0==a&&(a=1.70158),i*((e=e/s-1)*e*((a+1)*e+a)+1)+t},easeInOutBack:function(e,t,i,s,a){return void 0==a&&(a=1.70158),(e/=s/2)<1?i/2*(e*e*(((a*=1.525)+1)*e-a))+t:i/2*((e-=2)*e*(((a*=1.525)+1)*e+a)+2)+t},easeInBounce:function(e,t,i,a){return i-s.Bounce.easeOut(a-e,0,i,a)+t},easeOutBounce:function(e,t,i,s){return(e/=s)<1/2.75?i*(7.5625*e*e)+t:2/2.75>e?i*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?i*(7.5625*(e-=2.25/2.75)*e+.9375)+t:i*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(e,t,i,a){return a/2>e?.5*s.easeInOutBounce(2*e,0,i,a)+t:.5*s.easeInOutBounce(2*e-a,0,i,a)+.5*i+t}};i.exports=s});define("core/base",[],function(e,t,i){Object.create||(Object.create=function(e){var t=function(){};return t.prototype=e,new t}),Date.now||(Date.now=function(){return+new Date});var s=function(){var e=this,t=Array.prototype.slice.call(arguments),i=t.shift();if(i)for(var s in i)e.options[s]=i[s];e.initialize.apply(e,t),e.options.initialize&&e.options.initialize.apply(e,t)};s.prototype={options:{},initialize:function(){}},s.extend=function(e,t){var n,i=this;"function"!=typeof e&&(t=e,e=function(){i.apply(this,arguments)});var a=function(){this.constructor=e};if(a.prototype=i.prototype,e.prototype=new a,n=t.options,"undefined"!=typeof n){for(var l in n)e.prototype.options[l]=n[l];delete t.options}for(var l in t)e.prototype[l]=t[l];return e.__super__=i.prototype,e.extend=s.extend,e},window.sl=window.slan={},i.exports=s});define("core/promise",["./linklist"],function(e,t,i){var s=e("./linklist"),n=Array.prototype.slice,a=/^\$(\d+)$/,r=function(e,t,i){for(var l,s=[],n=0,r=e.length;r>n;n++)l=e[n],s.push("string"==typeof l?a.test(l)?t[parseInt(l.match(a)[1])]:l.replace(/^\$\$/,"$"):l);return s.push(i),s},l=function(e,t,i){if(!(this instanceof l))return new l(e,t,i);var n=this;this.queue=new s,this.state=2,this.resolveSelf=function(){n.resolve.apply(n,arguments)},t||"number"!=typeof e?e&&(this.state=0,this.then(e,t,i)):(this.state=0,this.start(e))};l.prototype={reject:function(e){this.resolve(e||"unknow error",null)},resolve:function(){var s,a,r,e=this,t=n.call(arguments),i=e.queue.shift();if(i)if(e.state=1,s=i[0],a=i[1],s instanceof l)s.then(e.resolveSelf);else if("function"==typeof s)r=s.apply(a,t),r instanceof l?r!==e&&r.then(e.resolveSelf):e.resolve(null,r);else if(s instanceof Array)for(var d=[],o=[],c=0,u=0,h=s.length;h>u;u++)!function(i,s,n){"function"==typeof i&&(i=i.apply(a,t)),i instanceof l?i.then(function(t,i){t&&(d[s]=t),c++,o[s]=i,c>=n&&e.resolve(d,o)}):(c++,o[s]=i,c>=n&&e.resolve(null,o))}(s[u],u,h);else e.resolve(null,t);else e.state=0;return e},when:function(e,t){return e instanceof Array||(e=[e]),this.queue.append([e,t||this]),1!=this.state&&this.resolve(),this},map:function(e,t,i){var s=this,n=function(){var i=arguments;return s._count=e.length,s.result=[],s.errors=[],e.forEach(function(e,n){e instanceof Array||(e=[e]),t.apply(this,r(e,i,function(e,t){s.next(n,e,t)}))}),s};return s.queue.append([n,i||this]),s},each:function(e,t,i){var s=this,n=function(){return s._count=e.length,s.result=[],s.errors=[],e.forEach(function(e,i){t.apply(this,[i,e])}),s};return s.queue.append([n,i||this]),s},start:function(e){var t=this,i=function(){return t._count=e,t.result=[],t.errors=[],t};return t.queue.append([i,this]),t},next:function(e,t,i){this._count--,t&&(this.errors[e]=t),this.result[e]=i,this._count<=0&&this.resolve(this.errors.length?this.errors:null,this.result)},bind:function(e){var t=this;return function(){t.then(n.call(arguments),e,this)}},then:function(e,t,i){var n,s=this;return e instanceof Array?(n=t,t=function(){return n.apply(this,r(e,arguments,s.resolveSelf)),s}):(i=t,t=e,e=null),s.queue.append([t,i||this]),s.state||s.resolve(),s}},l.resolve=function(){return(new l).resolve()},i.exports=l});define("core/linklist",[],function(e,t,i){var s=function(){this._idlePrev=this,this._idleNext=this},n=function(e){return e._idlePrev==e?null:e._idlePrev},a=function(e){e._idleNext&&(e._idleNext._idlePrev=e._idlePrev),e._idlePrev&&(e._idlePrev._idleNext=e._idleNext),e._idleNext=null,e._idlePrev=null};s.prototype={length:0,init:function(e){e={data:e},this.list=e,this.length=1,e._idleNext=e,e._idlePrev=e},get:function(e){var t=null;return this.each(function(i){return e(i)===!0?(t=i,!1):void 0}),t},find:function(e){var t=[];return this.each(function(i){e(i)===!0&&t.push(i)}),t},first:function(){return this._idlePrev!=this?this._idlePrev.data:null},peek:function(){return this._idlePrev==this?null:this._idlePrev},each:function(e){for(var i,t=this._idlePrev;t!=this&&(i=t._idlePrev,e.call(t,t.data)!==!1);)t=i},next:n,append:function(e,t){return t||(e={data:e}),e._idleNext=this._idleNext,this._idleNext._idlePrev=e,e._idlePrev=this,this._idleNext=e,this.length++,e},contains:function(e){var t=!1;return this.each(function(i){return e===i?(t=!0,!1):void 0}),t},shift:function(){var e=this._idlePrev;return e!=this?(this._remove(e),e.data):null},_remove:function(e){0!=this.length&&(this.length--,a(e))},remove:function(e){var t=this;t.each(function(i){return i===e?(t._remove(this),!1):void 0})},isEmpty:function(){return this._idlePrev==this}},i.exports=s});define("core/event",["$","./base"],function(e,t,i){function o(e,t,i){(e||"").split(r).forEach(function(e){i(e,t)})}function c(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function u(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function h(e,t,i,s){var n,a;return a=u(t),a.ns&&(n=c(a.ns)),e.filter(function(e){return e&&(!a.e||e.e===a.e)&&(!a.ns||n.test(e.ns))&&(!i||e.cb===i||e.cb._cb===i)&&(!s||e.ctx===s)})}function p(e,t){return this instanceof p?(t&&s.extend(this,t),this.type=e,this):new p(e,t)}var s=e("$"),n=e("./base"),a=[].slice,r=/\s+/,l=function(){return!1},d=function(){return!0};return p.prototype={isDefaultPrevented:l,isPropagationStopped:l,preventDefault:function(){this.isDefaultPrevented=d},stopPropagation:function(){this.isPropagationStopped=d}},n.event={createEvent:p,on:function(e,t,i){var n,s=this;return t?(n=this._events||(this._events=[]),o(e,t,function(e,t){var a=u(e);a.cb=t,a.ctx=i,a.ctx2=i||s,a.id=n.length,n.push(a)}),this):this},one:function(e,t,i){var s=this;return t?(o(e,t,function(e,t){var n=function(){return s.off(e,n),t.apply(i||s,arguments)};n._cb=t,s.on(e,n,i)}),this):this},off:function(e,t,i){var s=this._events;return s?e||t||i?(o(e,t,function(e,t){h(s,e,t,i).forEach(function(e){delete s[e.id]})}),this):(this._events=[],this):this},trigger:function(e){var i,s,n,r,l,t=-1;if(!this._events||!e)return this;if("string"==typeof e&&(e=new p(e)),i=a.call(arguments,1),e.args=i,i.unshift(e),s=h(this._events,e.type))for(r=s.length;++t<r;)if((n=e.isPropagationStopped())||!1===(l=s[t]).cb.apply(l.ctx2,i)){n||(e.stopPropagation(),e.preventDefault());break}return this}},n.Event=p,n.event});define("core/view",["$","util","./base","./event"],function(e,t,i){var s=e("$"),n=e("util"),a=e("./base"),r=e("./event"),l=Array.prototype.slice,d=function(){var t,e=this,i=l.call(arguments),a=i.shift();e._bindListenTo=[],s.isPlainObject(a)?(t=a,a=null):t=i.shift(),e.options=s.extend({},e.options,t),e.options.className&&(e.className=e.options.className),e.options.el&&(e.el=e.options.el),e.cid=n.guid(),e.setElement(a||e.el),e.initialize.apply(e,i),e.options.initialize&&e.options.initialize.apply(e,i),e.on("Destroy",e.onDestroy)};d.prototype=Object.create(r),s.extend(d.prototype,{options:{},initialize:n.noop,setElement:function(e,t){return e&&(this.$el&&this.undelegateEvents(),this.$el=s(e),this.el=this.$el[0],this.className&&this.$el.addClass(this.className),t!==!1&&this.delegateEvents()),this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},delegateEvents:function(){return this.listen(this.events),this.listen(this.options.events),this},listen:function(e,t){var i=this;if(t){var a=e.split(" "),r=a.shift().replace(/,/g,".delegateEvents"+i.cid+" ");t=s.proxy(s.isFunction(t)?t:i[t],i),a.length>0&&""!==a[0]?i.$el.on(r,a.join(" "),t):i.$el.on(r,t)}else for(var n in e)i.listen(n,e[n]);return i},listenTo:function(e){var t=l.apply(arguments),i=t[t.length-1];return"function"!=typeof e.on&&(e=s(e)),t[0]=e,t[t.length-1]=s.proxy(i,this),this._bindListenTo.push(l.apply(t)),t.shift().on.apply(e,t),this},$:function(e){return this.$el.find(e)},onDestroy:n.noop,destroy:function(){var i,t=(this.$el,this);s.each(this._bindListenTo,function(e,t){i=t.shift(),i.off.apply(i,t)}),t.undelegateEvents(),t.$el.remove(),t.trigger("Destroy")}}),d.extend=function(){var n,e=this,t=l.call(arguments),i=t[0];return"function"!=typeof i?(i=null,t.unshift({})):t[0]={},n=s.extend.apply(s,t),i=a.extend.apply(e,i?[i,n]:[n]),i.prototype.events=s.extend({},i.__super__.events,i.prototype.events),i.extend=arguments.callee,i},i.exports=d});define("core/model",["$","util","./base","./event"],function(t,e,i){var s=t("$"),n=t("util"),r=(t("./base"),t("./event")),l=Array.prototype.slice,o={date:n.formatDate,isFalse:function(t,e,i){return 1==arguments.length?n.isFalse(t):n.isFalse(t)?e:i},isTrue:function(t,e,i){return 1==arguments.length?n.isTrue(t):n.isTrue(t)?e:i},json:function(t){return t instanceof w||t instanceof A?JSON.stringify(t.data):JSON.stringify(t)},length:function(t){return t instanceof A?t.data.length:t&&t.length||0},join:function(t,e){return t instanceof A?t.data.join(e):t.join(e)},replace:function(t,e,i){return t.replace(e,i)},is:function(t,e){switch(e){case"array":return s.isArray(t);case"object":return s.isPlainObject(t);default:return typeof t==e}},equal:function(t,e,i,s){return 2==arguments.length?t==e:t==e?i:s},eval:function(t,e){for(var i={},s=this._evalCache||(this._evalCache={}),n=s[e]||(s[e]=new Function("$args","with($args){ return "+e+"}")),a=0,r=0,l=arguments.length;l>a;a++)1!=a&&(i["$"+r]=arguments[a],r++);return n.call(this,i)},lt:function(t,e){return e>t},lte:function(t,e){return e>=t},gt:function(t,e){return t>e},gte:function(t,e){return t>=e},choose:function(t,e,i){return t?e:i},or:function(t,e){return t||e},and:function(t,e){return t&&e},not:function(t){return!t},lowercase:function(t){return t.toLowerCase()},uppercase:function(t){return t.toUpperCase()},currency:function(t,e){return(e||"")+Math.round(100*parseFloat(t))/100},concat:function(){return l.call(arguments).join("")},round:function(t){return Math.round(t)},max:Math.max,min:Math.min,mul:function(t,e){return parseFloat(t)*parseFloat(e)},plus:function(t,e){return parseFloat(t)+parseFloat(e)},minus:function(t,e){return parseFloat(t)-parseFloat(e)},format:function(t){var e,i=arguments[1];return 2==arguments.length&&"object"==typeof t?e=t:(e=l.call(arguments),e.splice(1,1)),i.replace(/\{([_a-zA-Z0-9]+)\}/g,function(t,i){return e[i]})},"case":function(t){for(var e=l.call(arguments,1),i=0,s=e.length;s>i;i+=2)if(t==e[i])return e[i+1];return s%2==0?void 0:e[s-1]},listen:function(t,e,i,s,n,a,r){var l;if(s&&(l="_bind_filter"+n.prop+("number"==typeof s?s:"")+"_"+r,!e[l]&&(e[l]=!0)||!s[l]&&(s[l]=!0))){a=a.split(".");var d=a.pop(),c=a.length<=0?t:t.get(a.join("."))||t.set(a.join("."),{}).get(a);c.on("change"+(d?":"+d:""),function(){e._elAttr(s,n.prop,n.filter(o,e,e.data[i]))})}}},d=/\s*\|\s*([a-zA-Z_0-9]+)((?:\s*(?:\:|;)\s*\({0,1}\s*([a-zA-Z_0-9\.-]+|'(?:\\'|[^'])*')\){0,1})*)/g,c=/\s*\:\s*([a-zA-Z_0-9\.-]+|'(?:\\'|[^'])*')/g,u=/^((-)*\d+|true|false|undefined|null|'(?:\\'|[^'])*')$/,h=function(t,e){var r,l,o,i="",s="var S=this;",n=0,a=0;return t.replace(d,function(t,d,h){i+="V=F."+d+"(V",h.replace(c,function(t,d){var c;u.test(d)?c=d:(r=d.split("."),l=r.shift(),!e||l!=e.alias&&!(o=e.modelAlias[l])?(c="M.root.data."+d,s+='if(E)F.listen(M.root,M,K,E,S,"'+d+'",'+n++ +");"):d==e.alias?(c="M.data",s+="if(E)F.listen(M.parent,M,K,E,S,M._key,"+n++ +");"):(l==e.alias&&(o=e.collectionName),d=r.join("."),c="A"+a++,s+="var "+c+';var P=M;while(P){if(P.key=="'+o+'^child"){if(E)F.listen(P,M,K,E,S,"'+d+'",'+n++ +");"+c+"=P.data."+d+";break;}P=P.parent.parent;}")),i+=","+c}),i+=");"}),i+="return V;",new Function("F","M","V","K","E",s+i)},p=function(t,e){return t.filter(e).add(t.find(e))},m=function(t,e){var i=e.split("."),s=i.shift();if(s==t.alias)return{collection:t.collectionName,variable:i.join(".")};var n=t.modelAlias[s];return n?{collection:n,variable:i.join(".")}:void 0},v=function(t){var e={isExp:"="==t[0],args:[]};return e.isExp?e.args.push(t.substr(1)):t.replace(c,function(t,i){e.args.push(i)}),e},f=/([a-zA-Z_0-9]+)(?:\s*,(\s*[a-zA-Z_0-9]+)){0,1}\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})((?:\s*\|\s*filter\s*\:\s*.+?){0,1})(?:\s*\|\s*orderBy\:(.+)){0,1}(\s|$)/g,g=/\b([a-zA-Z_0-9-\.]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)((?:\s*\|\s*[a-zA-Z_0-9]+(?:\s*\:\s*\({0,1}\s*(?:[a-zA-Z_0-9\.-]+|'(?:\\'|[^'])*')\){0,1})*)*)(\s|,|$)/g,_=/\b([a-zA-Z\s]+)\s*\:\s*([a-zA-Z_0-9]+)((?:\.[a-zA-Z_0-9]+)*)((?:\s*\:\s*(?:[a-zA-Z_0-9\.]+|'(?:\\'|[^'])*'))*|\s*=\s*(?:[a-zA-Z_0-9\.]+|'(?:\\'|[^'])*'))(\s|,|$)/g,b=function(t){this.count=0,this.repeats={},this.bindings={},this.events=[],this.eventNames=[],this.eventid=0,this.scan(t)};b.prototype.scan=function(t){var l,i=this.repeats,n=this.bindings,a=this.events,r=this.eventNames,o=this.count,d=this.eventid;p(t,"[sn-repeat]").each(function(){var t=s(this),e=this,n=this.getAttribute("sn-repeat"),a=t.parents("[sn-repeat-alias]"),r={},o={};a.each(function(){var t=this.getAttribute("sn-repeat-name");r[this.getAttribute("sn-repeat-alias")]=t;var e=this.snIndexAlias;e&&(o[e]=t)}),n.replace(f,function(t,s,n,a,d,c){var p,u=a.split("."),h=u.length;1!==h&&(p=r[u[0]],p&&(u[0]=p+"^child",a=u.join("."))),e.setAttribute("sn-repeat-alias",s),e.setAttribute("sn-repeat-name",a),n&&(e.snIndexAlias=n,o[n]=a);var m=document.createElement("script");m.setAttribute("type","text/placeholder");var v,f={loopIndexAlias:o,collectionName:a,alias:s,modelAlias:r,template:e};d&&(f.filter=d),c&&(f.orderBy=c),-1==a.indexOf(".")&&(f.placeHolder=m),l=i[a],l?v=a+"_"+l.push(f):(i[a]=[f],v=a+"_1"),f.placeHolderName=v,m.setAttribute("sn-placeholder",v),e.parentNode.insertBefore(m,e)})}).remove();for(var u in i)for(var b=i[u],y=0,w=b.length;w>y;y++){var T=b[y],x=s(T.template);p(x,"[sn-binding],[sn-model],[sn-on]").each(function(){var t=this,e=this.getAttribute("sn-binding"),i=this.getAttribute("sn-model"),l=this.getAttribute("sn-on");if(t.setAttribute("sn-id",++o),i&&(i=m(T,i),i&&(this.setAttribute("sn-collection",i.collection),this.setAttribute("sn-model",i.variable))),l){this.setAttribute("sn-on",d);var p=a[d];l.replace(_,function(t,e,i,n,l){-1==r.indexOf(e)&&(r[r.length]=e),p||(p=a[d]={});var o=i+n;p[e]=s.extend(v(l),{name:m(T,o)||o,repeat:T})}),d++}e&&e.replace(g,function(t,e,i,s,a){var r;i==T.alias?i=T.collectionName+"^child"+s:T.loopIndexAlias&&T.loopIndexAlias[i]?i=T.loopIndexAlias[i]+"^child.^"+i:(r=T.modelAlias[i])&&(i=r+"^child"+s),(n[i]||(n[i]=[])).push({el:o,prop:a?{prop:e,filter:h(a,T)}:e})})})}p(t,"[sn-binding],[sn-on]").each(function(){var t=this.getAttribute("sn-binding"),e=this.getAttribute("sn-on"),i=this;if(t&&t.replace(g,function(t,e,s,a,r){s+=a,(n[s]||(n[s]=[])).push({el:i,prop:r?{prop:e,filter:h(r)}:e})}),e){this.setAttribute("sn-on",d);var l=a[d];e.replace(_,function(t,e,i,n,o){-1==r.indexOf(e)&&(r[r.length]=e),l||(l=a[d]={}),l[e]=s.extend(v(o),{name:i+n})}),d++}})};var y=function(t,e,i){if(0==e.indexOf("style."))t.style[e.substr(6)]=i;else switch(e){case"text":t.innerHTML=n.encodeHTML(i);break;case"html":t.innerHTML=i;break;case"display":t.style.display=n.isFalse(i)?"none":"block"==i||"inline"==i||"inline-block"==i||"none"==i||"-webkit-box"==i?i:"";break;case"value":t.value!=i&&(t.value=i);break;case"style":s(t).css(i);break;case"class":"undefined"==typeof t.initClassName&&(t.initClassName=t.className||""),t.className=t.initClassName+" "+("string"!=typeof i&&i?o.join(i," "):i);break;default:null===i||void 0===i?t.removeAttribute(e):t.setAttribute(e,i)}},w=function(t,e,i,s){if(4==arguments.length&&!this.created){var n={};if(this.$el=s,this.model=n,this._key=e,this.data={},i instanceof w)this.parent=i,this.key=i.key?i.key+"."+e:e,this.root=i.root;else{if(!(i instanceof A))throw new Error("Model's parent mast be Collection or Model");this.parent=i,this.key=i.key+"^child",this.root=i.root}t&&this.set(t),i.data[e]=this.data,this.created=!0}};w.prototype=Object.create(r),s.extend(w.prototype,{constructor:w,_redraw:function(){var t;for(var e in this.model)t=this.model[e],t instanceof w||t instanceof A?t._redraw():this._syncView(e,t)},_syncView:function(t,e,i){var n,a,r,l,s=this.root.finder.bindings[t&&this.key?this.key+"."+t:this.key||t];if(s)for(var d=0,c=s.length;c>d;d++)n=s[d],a=n.el,r=n.prop,"string"!=typeof r?(l=r.filter(o,this,e,t,a),r=r.prop):l=e,this._elAttr(a,r,l,i);return this},_syncOwnView:function(){return this.root!=this&&(this._syncView("",this.data),this.created&&this.parent instanceof w&&this.parent.trigger("change:"+this._key,this.data),this.parent.shouldUpdateView&&this.parent._syncOwnView()),this},_elAttr:function(t,e,i,s){"number"==typeof t?p(s||this.$el,'[sn-id="'+t+'"]').each(function(){y(this,e,i)}):y(t,e,i)},get:function(t){if("string"==typeof t&&-1!=t.indexOf(".")&&(t=t.split(".")),s.isArray(t)){for(var e=this,i=0,n=t.length;n>i;i++)if(e instanceof w)e=e.model[t[i]];else{if(!(e instanceof A))return null;e=e.models[t[i]]}return e}return this.model[t]},dirty:function(){var t,e={};for(var i in this.data)t=this.data[i],this.originalData[i]!=t&&(e[i]=t);return e},set:function(t,e){var n,a,r,i=this,l=this.model;if(i.shouldUpdateView=!1,s.isPlainObject(t))r=t;else{if("undefined"==typeof e)return e=t,t="",console.log(this,t,e),this.parent&&this.parent instanceof A&&(this.parent.data[this.parent.models.indexOf(this)]=e),this.data=e,void this._syncOwnView();(r={})[t]=e}this.originalData||(this.originalData=r);var c,o=[],d=[],a=!1,u=[];for(var h in r)this.data[h]=r[h];for(var h in r)if(n=l[h],c=r[h],n!==c){var p=h.split(".");if(p.length>1){t=p.pop(),l=this;for(var f,m=0,v=p.length;v>m;m++)if(h=p[m],f=l,l instanceof w)l=l.model[h],l||(l=f.model[h]=new w(null,h,f,f.$el),f.data[h]=l.data);else if(l instanceof A&&(l=l.models[h],!l))throw new Error("[Collection index is bigger than length!]");l.set(t,c)}else if(n instanceof w)null===c||void 0===c?n.clear():n.set(c);else if(n instanceof A){if(!s.isArray(c)){if(null!=c)throw new Error("[Array to "+typeof c+" error]ä¸å¯æ¹å"+h+"çæ°æ®ç±»å");c=[]}n.set(c)}else s.isPlainObject(c)?d.push(l[h]=new w(null,h,this,this.$el),c):s.isArray(c)?(l[h]=new A,o.push(h)):(this.data[h]=c,l[h]=c,this.created&&(this.trigger("change:"+h,c),this!=this.root&&this.root.trigger("change:"+(this.key?this.key+"."+h:h),this,h,c)));u.push(h,c),a||(a=!0)}for(var m=0,v=d.length;v>m;m+=2)d[m].set(d[m+1]);for(var m=0,v=o.length;v>m;m++)t=o[m],l[t].constructor(this.data[t],t,this);if(a){this.root!=this&&this._syncOwnView();for(var m=0,v=u.length;v>m;m+=2)this._syncView(u[m],u[m+1])}return i.shouldUpdateView=!0,this},clear:function(){var t={};for(var e in this.data)t[e]=null;this.set(t)},toJSON:function(){return s.extend(!0,{},this.data)}});var T={contains:function(t,e){return-1!=t.indexOf(e)}},x=function(t,e){var i=this;if(this.list=[],this.collection=t,s.extend(this,e),this.selector='[sn-placeholder="'+this.placeHolderName+'"]',!this.placeHolder&&this.collection.parent.$el&&(this.placeHolder=this.collection.parent.$el.find(this.selector)[0]),this.isInCollection=!s.contains(document.body,this.placeHolder),this.filter){var n="{";for(var a in this.modelAlias){var r=this.modelAlias[a];n+=a+":model.parent.parent";for(var l=t.parent;l&&l.key!=r+"^child";)l=l.parent,n+=".parent";n+=".data,"}n+=this.alias+":model.data}";var o="var self=this,collection=this.collection;with($.extend({},collection.root.data,"+n+",filter)){",d=this.filter.replace(/^\s*\|\s*filter\s*\:/,"");o+="return "+d,o+="}",this.filter=new Function("filter","model",o);for(var c=d.split(/[\=\>\<\?\s\:\(\),]+/g),h=0,p=c.length;p>h;h++)if(!u.test(c[h])){var l,m=c[h].split("."),v=m[0];if(!v||T[v])continue;if(v==this.alias)m[0]=t.key+"^child";else{var r=this.modelAlias[v];r&&(m[0]=r+"^child")}t.root.on("change:"+m.join("."),function(){i.update()})}}};x.prototype={update:function(){var t=document.createDocumentFragment(),e=0,i=this.list,n=this.orderBy;n&&i.sort(function(t,e){return t=t.model.data[n],e=e.model.data[n],t>e?1:e>t?-1:0});for(var a=0,r=i.length;r>a;a++){var l=i[a];if(!this.filter||this.filter(T,l.model)){t.appendChild(l.el);var o=this.template.snIndexAlias;o&&l.model._syncView("^"+o,e,s(l.el).attr("sn-index-"+o,e)),e++}else l.el.parentNode&&l.el.parentNode.removeChild(l.el)}this.appendChild(t)},get:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t)return this.list[e]},add:function(t,e){this.list.push({model:t,el:e})},appendChild:function(t){this.isInCollection?this.collection.parent.$el.find(this.selector).add(this.placeHolder).before(t):this.placeHolder.parentNode.insertBefore(t,this.placeHolder)},clear:function(){for(var t=this.list.length-1;t>=0;t--)this.list[t].el.parentNode.removeChild(this.list[t].el);this.list.length=0},remove:function(t){for(var e=this.list.length-1;e>=0;e--)if(this.list[e].model==t){this.list[e].el.parentNode.removeChild(this.list[e].el),this.list.splice(e,1);break}}};var A=function(t,e,i){if(3==arguments.length){this.models=[],this.data=[],this.key=e,this._key=e,this.repeats=[],this.parent=i,i.key&&(this.key=i.key+"."+this.key),this.root=i.root;var s=this.root.finder.repeats[this.key];if(s)for(var a=0,r=s.length;r>a;a++)this.repeats.push(new x(this,s[a]));t&&this.set(t)}};A.prototype={constructor:A,model:w,forEach:function(t){for(var e,s=0,n=this.models.length;n>s;s++)e=this.models[s],t.call(this,e,s)},_redraw:function(){for(var t=0,e=this.models.length;e>t;t++){model=this.models[t];for(var i,t=0,e=this.repeats.length;e>t;t++)if(i=this.repeats[t],!i.get(model)){var n=item.template.cloneNode(!0);s(n);n.snModel=model,i.add(model,n),model.$el.push(n),i.update()}model._redraw()}},add:function(t){var e,i;this.shouldUpdateView=!1,s.isArray(t)||(t=[t]);for(var a=0,r=t.length;r>a;a++){var l=null,o=t[a];e=new this.model,i=this.data.length,this.models[i]=e,this.data[i]=o;for(var d=0,c=this.repeats.length;c>d;d++){var u=this.repeats[d],h=u.template.cloneNode(!0),p=s(h);h.snModel=e,u.add(e,h),l=l?l.add(p):p}e.constructor(o,i,this,l)}for(var a=0,c=this.repeats.length;c>a;a++)this.repeats[a].update();this._syncOwnView(),this.shouldUpdateView=!0},_syncOwnView:function(){return this.parent._syncView(this._key,this.data),this.created&&this.parent.trigger("change:"+this._key,this.data),this.parent.shouldUpdateView&&this.parent._syncOwnView(),this},set:function(t){this.data.length=0;for(var e=0,i=this.repeats.length;i>e;e++)this.repeats[e].clear();return this.add(t),this},get:function(t){return this.models[t]},remove:function(t){var e,i;"number"!=typeof t&&(t=this.models.indexOf(t));for(var s=0,n=this.repeats.length;n>s;s++)e=this.repeats[s],i=e.list[t].el,i.parentNode.removeChild(i),e.list.splice(t,1);this.models.splice(t,1),this.data.splice(t,1),this._syncOwnView()}},A.prototype.append=A.prototype.add;var C=function(t,e){return(t.getAttribute("sn-repeat-name")==e?t:s(t).closest('[sn-repeat-name="'+e+'"]')[0]).snModel},$=function(t,e){this.root=this,t&&(this.created||(this.data={},this.events=[],this.model={},this.key="",this.load(t),this.set(e),this.created=!0))};$.prototype=Object.create(w.prototype),s.extend($.prototype,{constructor:$,load:function(t){return this.finder=new b(t),this.$el=t.on("input change","[sn-model]",s.proxy(this._inputChange,this)),this.bindEvents(),this},handleEvent:function(t){var o,d,c,h,e=t.currentTarget,i=s(e),n=t.type,a=e.getAttribute("sn-on"),r=this.finder.events[a],l=r[n],p=[t];if(l){o=l.name;for(var m=0;m<l.args.length;m++){var v=l.args[m],f=this;if(u.test(v))p.push(window.eval(v));else{if(l.repeat){var b,g=v.split("."),_=g.shift();if(l.repeat.alias==_)f=C(e,l.repeat.collectionName),v=g;else if(l.repeat.modelAlias[_])f=C(e,l.repeat.modelAlias[_]),v=g;else if(b=i.closest("[sn-index-"+v+"]")){p.push(b.attr("sn-index-"+v));continue}}p.push(f.get(v))}}"string"==typeof o?(h=o,d=this):(d=C(e,o.collection),h=o.variable),l.isExp?d.set(h,p[1]):(o=d.get(h),c=h.lastIndexOf("."),o&&o.apply(-1==c?d:d.get(h.substr(0,c)),p))}},bindEvents:function(){for(var e=0,i=this.finder.eventNames.length;i>e;e++){var n=this.finder.eventNames[e];-1==this.events.indexOf(n)&&(this.$el.on(n,"[sn-on]",s.proxy(this.handleEvent,this)),this.events[this.events.length]=n)}},scan:function(t){this.finder.scan(t),this._redraw(),this.bindEvents()},append:function(t,e){e?t=this.$el.find(t):(e=t,t=this.$el),t.append(e),this.scan(e)},prepend:function(t,e){e?t=this.$el.find(t):(e=t,t=this.$el),t.prepend(e),this.scan(e)},before:function(t,e){this.$el.find(t).before(e),this.scan(e)},after:function(t,e){this.$el.find(t).after(e),this.scan(e)},_inputChange:function(t){var e=t.currentTarget,i=e.getAttribute("sn-model"),s=e.getAttribute("sn-collection");s?C(e,s).set(i,e.value):this.set(i,e.value)},destory:function(){this.$el.off("input change","[sn-model]",this._inputChange)}}),$.extend=w.extend=A.extend=n.extend,e.ViewModel=$,e.filter=e.Filter=o});define("core/model2",["$","util","./base","./event"],function(e,t,i){var s=e("$"),n=e("util"),r=(e("./base"),e("./event")),d=/^((-)*\d+|true|false|undefined|null|'(?:\\'|[^'])*')$/,c=/([a-zA-Z_0-9]+)(?:\s*,(\s*[a-zA-Z_0-9]+)){0,1}\s+in\s+([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+){0,})(?:\s*\|\s*filter\s*\:\s*(.+?)){0,1}(?:\s*\|\s*orderBy\:(.+)){0,1}(\s|$)/,u=/\{\{(.+?)\}\}/g,h=/(^|[\!\=\>\<\?\s\:\(\),\%&\|\+\-\*\/\[\]]+)([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+)*(?![a-zA-Z_0-9]*\()|'(?:\\'|[^'])*')/g,p=/\/(?:\\\/|[^\/])*\/[img]+|"(?:\\"|[^"])*"/g,m=function(e){for(var t=e.split("."),i=[],s=0;s<t.length;s++)i[s]=(0==s?"$data":i[s-1])+"."+t[s];for(var s=0;s<i.length;s++)i[s]=i[s]+"!==null&&"+i[s]+"!==undefined";return"("+i.join("&&")+"?"+e+':"")'},v=function(e,t){for(var i=e.length?e:[e],s=0,n=i.length;n>s;s++){var a=i[s];t(a,s,i),1==a.nodeType&&a.childNodes.length&&v(a.childNodes,t)}},f={contains:function(e,t){return-1!=e.indexOf(t)},like:function(e,t){return-1!=e.indexOf(t)||-1!=t.indexOf(e)},util:n,closestRepeatModel:function(e){for(var t=e.parentNode;null!=t;t=t.parentNode)if(t.repeat)return t.repeat.parentModel.data}},g=function(e,t,i,s){if(e instanceof g)this.key=e.key?e.key+"."+t:t;else{if(!(e instanceof y))throw new Error("Model's parent mast be Collection or Model");this.key=e.key+"^child"}if(this._key=t,this.model={},this.parent=e,this.root=e.root,this.data=i,s)for(var n=0,a=s.length;a>n;n++)s[n].add(this);this.set(i)};g.prototype=Object.create(r),g.prototype.get=function(e){if("string"==typeof e&&-1!=e.indexOf(".")&&(e=e.split(".")),s.isArray(e)){for(var t=this,i=0,n=e.length;n>i;i++)if(t instanceof g)t=t.model[e[i]];else{if(!(t instanceof y))return null;t=t.models[e[i]]}return t}return this.model[e]},g.prototype.cover=function(e,t){return this.set(!0,e,t)},g.prototype.set=function(e,t,i){var a,l,n=this,o=n.model;if(e!==!0&&(i=t,t=e,e=!1),s.isPlainObject(t))l=t;else{if("undefined"==typeof i)return i=t,t="",this.parent instanceof y&&(this.parent.data[this.parent.models.indexOf(this)]=i),void(this.data=i);(l={})[t]=i}if(e)for(var d in this.data)void 0===l[d]&&(l[d]=null);!this.root.init&&s.extend(this.data,l);for(var d in l)if(a=o[d],value=l[d],a!==value){var c=d.split(".");if(c.length>1){t=c.pop(),o=this;for(var p,u=0,h=c.length;h>u;u++)if(d=c[u],p=o,o instanceof g)o=o.model[d],o||(o=p.model[d]=new g(p,d,null),p.data[d]=o.data);else if(o instanceof y&&(o=o.models[d],!o))throw new Error("[Collection index is bigger than length!]");o.set(t,value)}else if(a instanceof g)null===value||void 0===value?a.clear():a.set(value);else if(a instanceof y){if(!s.isArray(value)){if(null!=value)throw new Error("[Array to "+typeof value+" error]ä¸å¯æ¹å"+d+"çæ°æ®ç±»å");value=[]}a.set(value)}else s.isPlainObject(value)?o[d]=new g(this,d,value):s.isArray(value)?o[d]=new y(this,d,value):(o[d]=value,this.root.init||(this.trigger("change:"+d,value),this.root.trigger("sync:"+(this.key?this.key+"."+d:d).replace(/\./g,"/"),this,d,value)))}return n},g.prototype.clear=function(){var e={};for(var t in this.data)e[t]=null;this.set(e)},g.prototype.closest=function(e){for(var t=this.parent;null!=t;t=t.parent)if(t.key==e)return t},g.prototype.contains=function(e){for(var t=e.parent;null!=t;t=t.parent)if(t==this)return!0;return!1};var _=function(e){s.extend(this,e);for(var t=this,i=this.collectionName.split("."),n=this.parent;n;){if(n.alias==i[0]){i[0]=n.collectionName+"^child",this.collectionName=i.join("."),this.isChild=!0;break}n=n.parent}var a=document.createComment(this.collectionName);if(a.repeat=this,this.replacement=a,this.el.parentNode.insertBefore(a,this.el),this.el.parentNode.removeChild(this.el),this.collectionRepeats=[],this.filters){var r=this.viewModel.compileExpression("{{"+this.filters+"}}",this,function(e,i){for(var s=0;s<t.collectionRepeats.length;s++){var n=t.collectionRepeats[s];(i.parent==n.collection||i.contains(n.collection))&&n.update()}});this.filter=this.viewModel.fns.length+this.viewModel._fns.length,this.viewModel._fns.push(r)}},b=function(e,t,i){var s=this;if(this.collection=e,this.repeat=t,this.children=[],this.parentModel=i,t.collectionRepeats[t.collectionRepeats.length]=this,t.parent)if(t.isChild||i)this.type="children",this.findReplacement(i||e.parent);else{this.type="in_other_repeat";for(var n=0;n<t.parent.collectionRepeats.length;n++){var a=t.parent.collectionRepeats[n];a.collection.on("add",function(i,n){for(var a=new b(e,t,n),r=0;r<e.models.length;r++)a.add(e.models[r]);s.children.push(a),a.update()}).each(function(i){s.children.push(new b(e,t,i))}),a.children.push(this)}}else this.type="normal",this.replacement=t.replacement;this.el=this.cloneNode(t.el),this.elements=[]};b.prototype.findReplacement=function(e){for(var t=e;null!=t&&t!=e.root;t=t.parent)if(t instanceof g&&t.replacement)for(var i=0;i<t.replacement.length;i++)if(t.replacement[i].repeat==this.repeat){this.replacement=t.replacement[i];break}},b.prototype.update=function(){if("in_other_repeat"!=this.type){var i=document.createDocumentFragment(),s=0,n=this.elements,a=this.repeat,r=a.orderBy;r&&n.sort(function(e,t){return e=e.model.data[r],t=t.model.data[r],e>t?1:t>e?-1:0});for(var e=0,t=n.length;t>e;e++){var l=n[e];void 0===a.filter||this.collection.root.fns[a.filter].call(this.collection.root,f,l.model)?(i.appendChild(l),l.setAttribute("sn-index",s),a.indexAlias&&(l.setAttribute("sn-index-alias",a.indexAlias),this.collection.root.trigger("sync:"+a.collectionName+"/"+a.alias+"/"+a.indexAlias,l.model)),s++):l.parentNode&&l.parentNode.removeChild(l)}this.replacement.parentNode.insertBefore(i,this.replacement)}else for(var e=0,t=this.children.length;t>e;e++)this.children[e].update()},b.prototype.cloneNode=function(e,t,i){var n,s=e.cloneNode(!1);if(e==this.el&&(s.repeat=this,s.model=t),i&&i.appendChild(s),8==e.nodeType&&e.repeat)s.repeat=e.repeat,t&&(t.replacement||(t.replacement=[])).push(s);else if(e.bindings&&(s.bindings=e.bindings,t?(s.model=t,e._origin._elements.push(s),t.root.setElementAttribute(s)):s._origin=e),1==e.nodeType&&(n=e.childNodes.length))for(var a=0;n>a;a++)this.cloneNode(e.childNodes[a],t,s);return s},b.prototype.each=function(e){for(var t=0;t<this.children.length;t++)e.call(this,this.children[t]);return this},b.prototype.remove=function(e,t){if("in_other_repeat"==this.type)for(var i=0,n=this.children.length;n>i;i++)this.children[i].remove(e,t);else this.elements.splice(e,t||1).forEach(function(e){s(e).remove()})},b.prototype.add=function(e){if("in_other_repeat"==this.type)for(var t=0,i=this.children.length;i>t;t++)this.children[t].add(e);else this.elements[this.elements.length]=this.cloneNode(this.el,e)},b.prototype.clear=function(){if("in_other_repeat"==this.type)for(var e=0,t=this.children.length;t>e;e++)this.children[e].clear();else{for(var e=this.elements.length-1;e>=0;e--)this.elements[e].parentNode.removeChild(this.elements[e]);this.elements.length=0}};var y=function(e,t,i){var s;if(this.models=[],this.parent=e,this.key=e.key?e.key+"."+t:t,this._key=t,this.root=e.root,this.repeats=[],s=e.root.repeats[this.key])for(var n=0;n<s.length;n++)this.repeats[this.repeats.length]=new b(this,s[n]);this.data=[],this.add(i),this.data=i};y.prototype=Object.create(r),y.prototype.each=function(e){for(var t=0;t<this.models.length;t++)e.call(this,this.models[t]);return this},y.prototype.add=function(e){var t,i;s.isArray(e)||(e=[e]);for(var n=0,a=e.length;a>n;n++){var r=e[n];i=this.data.length,t=new g(this,i,r,this.repeats),this.models[i]=t,this.data[i]=r,this.trigger("add",t)}for(var n=0,l=this.repeats.length;l>n;n++)this.repeats[n].update();var o=this.key.replace(/\./g,"/");this.root.trigger("sync:"+o,this.parent,this._key,this.data).trigger("sync:"+o+"/length",this.parent,this._key,this.data)},y.prototype.remove=function(e,t){this.models.splice(e,t||1),this.data.splice(e,t||1);for(var i=0,s=this.repeats.length;s>i;i++)this.repeats[i].remove(e,t)},y.prototype.clear=function(e){this.models.length=this.data.length=0;for(var t=0,i=this.repeats.length;i>t;t++)this.repeats[t].clear()},y.prototype.set=function(e){if(0==e.length)this.clear();else{e.length<this.data.length&&this.remove(e.length,this.data.length-e.length);var t=0;this.each(function(i){i.set(!0,e[t]),t++}),this.add(e.slice(t,e.length))}return this},y.prototype.get=function(e){return this.models[e]};var w=["tap","click","change","focus","blur"],T=function(e,t){this.data=s.extend(!0,{},t),this.model={},this.repeats={},this._fns=[],this.fns=[],this.scan(e),this.init=!0,this.set(t),this.init=!1};T.prototype=Object.create(g.prototype),T.prototype.key="",T.prototype.compileExpression=function(e,t,i){var s=this,n="function(Filters,model,el){var $el=$(el);var $data=$.extend({},Filters,model.root.data";if(t){n+=",{";for(var a=t.parent,r=t;null!=a;r=a,a=a.parent)n+=a.alias+":"+(r.isChild?"model.closest('"+a.collectionName+"^child').data":'Filters.closestRepeatModel(el,"'+a.alias+'")')+",",a.indexAlias&&(n+=a.indexAlias+":$el.closest('[sn-index-alias=\""+a.indexAlias+'"]\').attr("sn-index"),');n+=t.alias+":model.data",t.indexAlias&&(n+=","+t.indexAlias+":$el.closest('[sn-index-alias=\""+t.indexAlias+'"]\').attr("sn-index")'),n+="}"}var l=[];return n+=");with($data){try{return '"+e.replace(p,function(e){return l[l.length]=e,"``"+(l.length-1)+"~~"}).replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(u,function(e,n){return"'+("+n.replace(/\\\\/g,"\\").replace(/\\'/g,"'").replace(h,function(e,n,a){var r=a.split("."),l=r[0];if("Math"==l||"$"==l||d.test(a)||!l||f[l])return n+a;var o;if(t)if(l==t.alias)r[0]=t.collectionName+"^child";else if(l==t.indexAlias)o=t;else for(var c=t.parent;null!=c;c=c.parent)c.alias==l?r[0]=c.collectionName+"^child":l==c.indexAlias&&(o=c);return o?s.on("sync:"+o.collectionName+"/"+o.alias+"/"+o.indexAlias,i):s.on("sync:"+r.join("/"),i),n+m(a)})+")+'"}).replace(/``(\d+)~~/g,function(e,t){return l[t]}),n+="';}catch(e){return '';}}}",n.replace("return ''+","return ").replace(/\+\'\'/g,"")},T.prototype.setElementAttribute=function(e,t){var i=this;if(e.bindings){t?[t]:e.bindings;for(var t in e.bindings){var a=i.fns[e.bindings[t]].call(i,f,e.model||i,e);switch(t){case"textContent":e.textContent!==a+""&&(e.textContent=a);break;case"value":"INPUT"==e.tagName||"SELECT"==e.tagName||"TEXTAREA"==e.tagName?e.value!=a&&(e.value=a):e.setAttribute(t,a);break;case"html":case"sn-html":e.innerHTML=a;break;case"display":case"sn-display":e.style.display=n.isFalse(a)?"none":"block"==a||"inline"==a||"inline-block"==a?a:"";break;case"style":e.style.cssText+=a;break;default:e.setAttribute(t,a)}}}},T.prototype.bindAttr=function(e,t,i,s){var n=this;if(n.root=this,u.test(i)){var a=function(i,a){if(s)for(var r=0;r<e._elements.length;r++){var l=e._elements[r];(a==a.root||l.model==a||l.model.contains(a))&&n.setElementAttribute(l,t)}else n.setElementAttribute(e,t)};(e.bindings||(e._elements=[],e.bindings={}))[t]=n.fns.length+n._fns.length;var r=this.compileExpression(i,s,a);n._fns.push(r)}},T.prototype._setByEl=function(e,t,i){var s=this;s.getModel(e,t,function(e,t){e.set(t,i)})},T.prototype.getModel=function(e,t,i){for(var a,r,l,s=t.split("."),n=s[0],o=e;null!=o&&o!=document.body;o=o.parent)if(o.model&&!a&&(a=o.model),o.repeat&&o.repeat.repeat.alias==n){l=o.repeat.repeat.collectionName+"^child",r=o.model,s.shift();break}return r||(r=this),i&&i(r,s.join("."),a),r},T.prototype.scan=function(e){for(var t=this,i=[],n=s(e).on("input change","[sn-model]",function(e){if(1!=e._stopModelEvent){var i=e.currentTarget,s=i.getAttribute("sn-model");t._setByEl(i,s,i.value),e._stopModelEvent=!0}}),a=0;a<w.length;a++)n.on(w[a],"[sn-"+w[a]+"]",function(e){if(1!=e._stopModelEvent){var l,o,i=e.currentTarget,s=i.getAttribute("sn-"+e.type),n=s.split(":"),r=[e];if(/^\d+$/.test(s))t.fns[s].call(t,i);else{for(var d=0;d<n.length;d++)t.getModel(i,n[d],function(t,i,s){0==d?(o=t,l=t.get(i),e.model=s):r.push(i?t.get(i):t.data)});l.apply(o,r)}e._stopModelEvent=!0}});v(e,function(e,s,n){if(1==e.nodeType){var a=e.getAttribute("sn-repeat");if(null!=a){var r=a.match(c);a=new _({viewModel:t,parent:n.repeat,alias:r[1],indexAlias:r[2],collectionName:r[3],filters:r[4],orderBy:r[5],el:e}),(t.repeats[a.collectionName]||(t.repeats[a.collectionName]=[])).push(a)}else a=n.repeat;a&&(e.childNodes.repeat=a);for(var l=0;l<e.attributes.length;l++){var o=e.attributes[l].name,d=e.attributes[l].value;if("sn-error"==o?o="onerror":"sn-src"==o&&(o="src"),"sn-display"==o||"sn-html"==o||0!=o.indexOf("sn-"))t.bindAttr(e,o,d,a);else if(-1!=w.indexOf(o.replace(/^sn-/,""))){var u=/([a-zA-Z_0-9]+(?:\.[a-zA-Z_0-9]+)*)\s*=\s*((?:'(?:\\'|[^'])*'|[^;])+)/g,p=u.exec(d);if(p){var m="function(el){";do m+='this._setByEl(el,"'+p[1]+'",'+p[2]+");",console.log(p);while(p=u.exec(d));m+="}",e.setAttribute(o,t.fns.length+t._fns.length),t._fns.push(m)}}}!a&&e.bindings&&(i[i.length]=e)}else 3==e.nodeType&&(t.bindAttr(e,"textContent",e.textContent,n.repeat),!n.repeat&&e.bindings&&(i[i.length]=e))}),[].push.apply(this.fns,window.eval("["+this._fns.join(",")+"]")),this._fns.length=0;for(var a=0,r=i.length;r>a;a++)t.setElementAttribute(i[a])},t.ViewModel=T,t.Filters=f});define("core/page",["../widget/tip","$","util","./base","./view","./promise","../widget/dialog"],function(e,t,i){e("../widget/tip");var s=e("$"),n=e("util"),r=(e("./base"),e("./view")),l=e("./promise"),d=(e("../widget/dialog"),n.noop),h=(n.indexOf,Array.prototype.slice,n.getPath),p=r.extend({options:{route:null},application:null,el:'<div class="view"></div>',_setRoute:function(e){this.route=e,this.hash=e.hash,this.url=e.url,this.path=e.path,this._queries=this.queries,this.queries=s.extend({},e.queries)},loadTemplate:function(){var e=this,t=1,i=function(){t--,0==t&&(e.$el.html(e.razor.html(e.data)).appendTo(e.application.$el),e.trigger("Create"),e._promise.resolve())};return e.route.api&&(t++,s.ajax({url:e.route.api,type:"GET",dataType:"json",success:function(t){e.data=t,i(t)},error:function(e){i({success:!1,content:e.responseText})}})),seajs.use(e.route.template,function(t){e.razor=t,i()}),e._promise},initialize:function(){var e=this,t=l.resolve();e._promise=t,e.className=e.el.className,e._setRoute(e.options.route),e.application=e.options.application,e.on("Start",e.onStart).on("Resume",e.onResume).on("Show",e.onShow).on("Show",e._statusChange).on("Pause",e.onPause).on("Pause",e._statusChange).on("QueryChange",e.onQueryChange).on("QueryChange",e.checkQuery),e.$el.data("path")||(e.$el.data("url",e.url).data("path",e.path),t.then(e.loadTemplate,e)),t.then(e.onCreate,e).then(function(){e.trigger("Start"),e.checkQuery()})},onCreate:d,onStart:d,onResume:d,onShow:d,onStop:d,onRestart:d,onPause:d,_statusChange:function(e){"Pause"==this._status&&this.trigger("Resume"),this._status=e.type},onQueryChange:d,then:function(e){return this._promise.then(e,this),this},queryString:function(e,t){if("undefined"==typeof t)return this.route.queries[e];null===t||t===!1||""===t?delete this.route.queries[e]:this.route.queries[e]=t||"";var i=s.param(this.route.queries);location.hash=this.route.path+(i?"?"+i:"")},_queryActions:{},checkQuery:function(){var n,e=this,t=e.queries,i=e._queries;s.each(e._queryActions,function(e,s){if(n=t[e]||"",n&&!i||i&&n!=i[e]){var a=s.map[n];a.exec?a.exec=!1:a.fn.apply(s.ctx)}})},bindQueryAction:function(e,t,i){var n=this,r={},l={ctx:t,map:r};return s.each(i,function(s,a){var a=i[s],l=t[a],o={fn:l,exec:!1};r[s]=o,t[a]=function(){l.apply(t,arguments),n.queryString(e)!=s&&(o.exec=!0,n.queryString(e,s))}}),this._queryActions[e]=l,this},onResult:function(e,t){return this.listenTo(this.application,e,t)},setResult:function(){return this.application.trigger.apply(this.application,arguments),this},compareUrl:function(e){return h(e)===this.route.path.toLowerCase()},back:function(e){this.application.to(e)},forward:function(e){this.application.to(e)}});sl.Page=p,i.exports=p});define("core/route",[],function(e,t,i){var s=function(e){return(e.replace(/^#+|\/$/,"")||"/").toLowerCase()},n=function(e,t){var s,n,a,r,l,o,i=[];for(var d in e){if(s=e[d],n=[],o="^(?:/{0,1})"+d.replace(/(\/|^|\?)\{((?:.+?\{[^\}]+\}){0,}[^\}]*)\}/g,function(e,t,i){return l=i.split(":"),l.length>1&&(n.push(l.shift()),i=l.join(":")),t+"("+i+")"})+"$","string"==typeof s)throw new Error("Route options error");a=s.root||"/",r="/"!=a?a.replace(/^\//,"")+"/":"",i.push({regex:new RegExp(o),parts:n,template:r+s.template,view:r+s.controller,api:s.api,root:a})}this.isDebug=t!==!1,this.routes=i};n.prototype.match=function(e){var r,o,d,t=null,i={},n=e=s(e),a=e.indexOf("?"),l=this.routes;-1!=a?(r=e.substr(a+1),e=e.substr(0,a),r.replace(/(?:^|&)([^=&]+)=([^&]*)/g,function(e,t,s){return i[t]=decodeURIComponent(s),""})):r="";for(var c=0,u=l.length;u>c;c++)if(o=l[c],d=o.regex?e.match(o.regex):null){t={path:d[0],url:n,hash:"#"+n,root:o.root,template:o.template,"package":this.isDebug?!1:"/"==o.root?"controller":o.root.replace(/^\//,"")+"/controller",view:o.view,data:{},queryString:r,query:i,queries:i};for(var h=0,p=o.parts.length;p>h;h++)t.data[o.parts[h]]=d[h+1];o.api&&(t.api=o.api.replace(/\{([^\}]+?)\}/g,function(e,i){return t.data[i]}));break}return t},n.standardizeHash=s,i.exports=n});define("core/animation",["$","./linklist","graphics/matrix2d","graphics/tween","graphics/cubicBezier","util"],function(t,e){for(var i=t("$"),s=t("./linklist"),n=t("graphics/matrix2d"),a=t("graphics/tween"),o=(t("graphics/cubicBezier"),t("util"),["webkit"]),d=0;d<o.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[o[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[d]+"CancelAnimationFrame"]||window[o[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){return setTimeout(t,16.7)},window.cancelAnimationFrame=function(t){clearTimeout(t)});var c=new s,u=!0,h=i.fx.cssPrefix+"transform",p={opacity:1},v=/(\d+\.\d+|\d+)\%/g,f=/translate\((\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\s*\,\s*(\-{0,1}\d+(?:\.\d+){0,1}(?:\%|px){0,1})\)/,g=/matrix\((\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\,\s*(\-{0,1}\d+\.\d+|\-{0,1}\d+)\s*\)/,_=/(translate|skew|rotate|scale|matrix)\(([^\)]+)\)/g,b=/matrix\([^\)]+\)\s*$/,y=function(t){if(t){t instanceof Array||(t=[t]);for(var e=0,i=t.length;i>e;e++)"string"==typeof t[e]&&(t[e]=a[t[e].replace(/\-([a-z])/g,function(t,e){return e.toUpperCase()})])}else t=[a.easeOut];return t},w=function(t){var e=[];return i.each(t,function(t,i){e.push(isNaN(parseFloat(i))?0:parseFloat(i))}),e},T=function(t,e,i){return parseFloat(t)+(parseFloat(e)-parseFloat(t))*i},x=function(t){var e=new n;return t.replace(_,function(t,i,s){e["matrix"==i?"append":i].apply(e,w(s.split(",")))}),e},A=function(t){var s,a,e={};return i.each(t,function(t,i){/matrix|translate|skew|rotate|scale|invert/.test(t)?("translate"===t?i=(e[h]||"")+" "+t+"("+i+")":(a||(a=new n),s=e[h]||"",i=a["matrix"==t?"append":t].apply(a,w(i.split(","))).toString(),i=b.test(s)?s.replace(b,i):s+" "+i),t=h):"transform"===t&&(t=h,a=null),e[t]=i}),{css:e,matrix:a}};e.transform=A,i.fn.transform=function(t){return this.css(A(t).css),this},i.fn.matrix=function(t){return t instanceof n?(this.css(h,t.toString()),this):x(getComputedStyle(this[0],null)[h])};var C=function(){if(c.length){u=!1;for(var t,e,i,r,a=(+new Date,c._idlePrev);a!=c;){if(r=a._idlePrev,first=a.data,t=Date.now()-first.startTime,i=[],e=first.ease,t<=first.duration){for(var l=0,o=e.length;o>l;l++)i.push(e[l](t,first.from,first.to-first.from,first.duration)/100);i.push(t,first.duration),first.step.apply(first,i)}else{for(var d=first.to/100,l=0,o=e.length;o>l;l++)i.push(d);i.push(first.duration,first.duration),first.step.apply(first,i),c._remove(a),first.finish&&first.finish(d)}a=r}requestAnimationFrame(C)}else u=!0},k=function(t){return t.startTime=Date.now(),t.ease=y(t.ease),t.stop=function(){c.remove(t)},void 0===t.from&&(t.from=0),void 0===t.to&&(t.to=100),t.duration||(t.duration=300),t},$=function(t){for(var e=0,i=t.length;i>e;e++)c.append(k(t[e]));u&&C()},M=function(t){var e,s,n,a,r;this.el.each(function(){if(e=this._animationStyle,s=this._originStyle,0==t)r=s;else if(1>t){r={};for(var l in e)if(a=e[l],n=s[l],l==h){var o=n.match(g)||["",1,0,0,1,0,0],c=x(a);c.a=T(o[1],c.a,t),c.b=T(o[2],c.b,t),c.c=T(o[3],c.c,t),c.d=T(o[4],c.d,t),c.tx=T(o[5],c.tx,t),c.ty=T(o[6],c.ty,t),r[l]=c.toString()}else isNaN(parseFloat(a))?r[l]=a:(n=isNaN(parseFloat(n))?p[l]||0:parseFloat(n),r[l]=T(n,a,t))}else r=e;i(this).css(r)}),this._step&&this._step(t)},D=function(t){1==t&&this.el.css(this.css),this._finish&&this._finish(t)},S=function(t){for(var e,s,a,o=0,d=t.length;d>o;o++)e=t[o],e.css&&(a=A(e.css),e.matrix=a.matrix,e.css=a.css,s=e.el=i(e.el),"object"==typeof e.start&&s.transform(e.start),s.each(function(){var t=this,s={},n={},a=getComputedStyle(t,null);i.each(e.css,function(e,i){"string"==typeof i&&(e==h?i=i.replace(f,function(e,i,s){return"translate("+(-1!==i.indexOf("%")?t.offsetWidth*parseFloat(i)/100:parseFloat(i))+"px,"+(-1!==s.indexOf("%")?t.offsetHeight*parseFloat(s)/100:parseFloat(s))+"px)"}):/^(top|margin(-t|T)op)$/.test(e)?i=i.replace(v,function(e){return t.parentNode.offsetHeight*parseFloat(e)/100+"px"}):/^(left|margin(-l|L)eft|padding(-l|L)eft|padding(-t|T)op)$/.test(e)&&(i=i.replace(v,function(e){return t.parentNode.offsetWidth*parseFloat(e)/100+"px"}))),n[e]=a[e],s[e]=i}),t._animationStyle=s,t._originStyle=n}),e._step=e.step,e.step=M,e._finish=e.finish,e.finish=D);return t},E=function(t){i.isArray(t)||(t=[t]),S(t),this.list=t};E.prototype.step=function(t){for(var e,i=this.list,s=0,n=i.length;n>s;s++)e=i[s],e.from=t,e.step(t/100);return this},E.prototype.animate=function(t,e,i){for(var s,n=this.list,a=0,r=n.length;r>a;a++)s=n[a],s.duration=t,s.to=e,s.finish=s.start=void 0;return s.finish=i,$(n),this},e.Animation=E,e.parallel=function(t){$(S(t))},e.animate=function(){var t=arguments,e={},i=0,s=t[i++];return"function"==typeof s?e.step=s:(e.el=s,e.css=t[i++]),e.duration=t[i++],e.ease=t[i++],e.finish=t[i],$([e]),e};var I={step:function(t){for(var s,e=0,i=this.momentums.length;i>e;e++)s=this.momentums[e],s.current=s.start+(s.result-s.start)*t;this.momentumStep.apply(this.ctx,this.momentums)},finish:function(){this.bounce()},bounce:function(){for(var e,i,a,t=0,s=0,n=this.momentums.length;n>s;s++)a=this.momentums[s],i=a.current<a.min?a.min:a.current>a.max?a.max:a.current,i!=a.current?(a.start=a.current,a.result=i,t++):a.divisor&&i%a.divisor!=0&&(e=a.divisor,a.start=a.current,a.result=e/2>i%e?i-i%e:i-i%e+e,t++);0==t?this.end.call(this.ctx):(this.duration=400,$([this]))}},O=function(t,e,i,s,n,a,r){var v,f,l=e-t,o=n-e,d=e-s,c=6e-4,u=Math.abs(l)/i,h=u*u/(2*c),p=0,m=0;return a=r||a,l>0&&h>o?(m=a/(6/(h/u*c))/2,o+=m,u=u*o/h,h=o):0>l&&h>d&&(m=a/(6/(h/u*c))/2,d+=m,u=u*d/h,h=d),h*=0>l?-1:1,m*=0>l?-1:1,p=u/c,f=e+h,0!=m&&(v=.15/(m/h),v>1&&(h-=m,m/=v,h+=m,f=e+h)),s>e&&s>f||e>n&&f>n?(h=0,p=0,outside=0,f=e):(r&&0==m&&(f=f%r==0?f:r/2>f%r?f-f%r:f-f%r+r,f=f>n?n:s>f?s:f,300>p&&(p=300),h=f-e),r&&p>400&&(p=400)),{dist:h,time:Math.round(p),outside:m,result:f,current:e,start:e,max:n,min:s,divisor:r}};e.step=T,e.momentum=function(t,e,s,n,a,r){var l=[],o={},d=0;if("number"==typeof t[0])t=[t];else if(!t.length)return void a.call(r);for(var h,c=0,u=t.length;u>c;c++)h=O.apply(this,t[c]),0!=h.dist&&(d=Math.max(d,h.time)),l.push(h);for(var h,c=0,u=l.length;u>c;c++)h=l[c],0!=h.outside&&(h.result=h.result-h.outside+400*h.outside/d);return i.extend(o,I,{ctx:r||o,momentums:l,momentumStep:s,duration:d,ease:n,end:a}),0!=d?(e&&o.duration>e&&(o.duration=e),$([o])):o.bounce(),o}});define("core/master",["$","util","./route"],function(t,e,i){var n=(t("$"),t("util")),a=t("./route"),r=n.getPath,l={checkQueryString:function(t,e){t.route.url!=e.url&&(t._setRoute(e),t.trigger("QueryChange"))},mapRoute:function(t,e){return this.route=new a(t,e),this},skip:0,_currentActivity:null,_activities:{},set:function(t,e){this._activities[r(t)]=e},get:function(t,e){var i=this,s="string"==typeof t?i.route.match(t):t;if(s){var n=r(s.path),a=this._activities[n];null==a?!function(t){s["package"]?seajs.use(s["package"]+".js?v"+sl.buildVersion,t):t()}(function(){seajs.use(s.view,function(t){var l,r={application:i,route:s};null!=t?(l=i.$el.find('[data-path="'+s.path+'"]'),l.length&&(r.el=l),a=new t(r),i.set(n,a),a.then(function(){e.call(i,a,s)})):(i.skip++,location.hash=i._currentActivity.url)})}):e.call(i,a,s)}},remove:function(t){this._activities[r(t)]=void 0}};i.exports=l});define("core/app",["$","util","bridge","./base","./view","./master","./animation","./linklist","./promise","./touch","./route","./activity"],function(t,e,i){var s=t("$"),n=t("util"),a=t("bridge"),l=(t("./base"),t("./view")),o=t("./master"),d=t("./animation"),u=(t("./linklist"),t("./promise")),h=t("./touch"),p=t("./route"),f=(t("./activity"),n.noop,n.lastIndexOf),b=(Array.prototype.slice,n.getPath,p.standardizeHash),y=o.checkQueryString,w=function(e,i,n,a){a||(a=(e?n:i).toggleAnim);var r=t("anim/"+a),l=e?"open":"close",o="ease-out",d=s.extend({},r[l+"EnterAnimationFrom"]),c=s.extend({},r[l+"ExitAnimationFrom"]);return d.zIndex=e?r.openEnterZIndex:r.closeEnterZIndex,d.display="block",c.zIndex=e?r.openExitZIndex:r.closeExitZIndex,[{el:n.$el,start:d,css:r[l+"EnterAnimationTo"],ease:o},{el:i.$el,start:c,css:r[l+"ExitAnimationTo"],ease:o}]},T=function(t,e){t.startExit(),t.$el.siblings('.view:not([data-path="'+e.path+'"])').hide(),null===e.el.parentNode&&e.$el.appendTo(t.application.el)},x=function(t){t.touch=new h(t.el,{start:function(){var e,i,t=this,s=t.touch.dx;if(t.touch.isDirectionY||t.swiperPromise)return void t.touch.stop();t.width=window.innerWidth;var n=t._currentActivity,a=t.isSwipeLeft=s>0;t.swiper=null,e=a?n.swipeLeftForwardAction?(i=!0,n.swipeLeftForwardAction):(i=!1,n.swipeLeftBackAction):n.swipeRightForwardAction?(i=!0,n.swipeRightForwardAction):(i=!1,n.swipeRightBackAction),e||(a&&"Left"==n.referrerDir?e=n.referrer:a||"Left"==n.referrerDir||(e=n.referrer),i=!1),e?(t.swiperPromise=new u,t.mask.show(),t.get(e,function(e){t.needRemove=null===e.el.parentNode,T(n,e),t.isSwipeOpen=i,t.swiper=new d.Animation(w(i,n,e)),t.swipeActivity=e,t.swiperPromise.resolve()})):t.swiperPromise=null},move:function(t){var i,e=this,s=e.touch.dx;e.swiperPromise&&e.swiperPromise.then(function(){return e.isSwipeLeft&&0>s||!e.isSwipeLeft&&s>0?void e.swiper.step(0):(i=100*Math.abs(s)/e.width,void e.swiper.step(i))},e)},stop:function(){var t=this;t.isCancelSwipe=t.touch.isMoveLeft!==t.isSwipeLeft||Math.abs(t.touch.dx)<=10,t.swiperPromise&&t.swiperPromise.then(function(){t.queue.then([200,t.isCancelSwipe?0:100,function(){var e=t.swipeActivity,i=t._currentActivity;t.isCancelSwipe?(i.isPrepareExitAnimation=!1,i.$el.addClass("active"),t.needRemove&&e.$el.remove(),t.mask.hide()):(t._currentActivity=t.swipeActivity,t.navigate(e.url,t.isSwipeOpen),e.finishEnterAnimation(),t.isSwipeOpen?(e.referrer=i.url,e.referrerDir=t.isSwipeLeft?"Right":"Left",i.trigger("Pause")):i.destroy()),t.queue.resolve()}],t.swiper.animate,t.swiper),t.swiperPromise=null})}},t)},A=l.extend(o,{events:{"tap,click a[href]:not(.js-link-default)":function(t){var e=this,i=s(t.currentTarget),n=i.attr("href");return/^(http\:|https\:|javascript\:|mailto\:|tel\:)/.test(n)?sl.isInApp&&0==n.indexOf("http")?a.openInApp(n):i.addClass("js-link-default"):(t.preventDefault(),"tap"==t.type&&(/^#/.test(n)||(n="#"+n),null!=i.attr("back")?e.back(n):e.forward(n))),!1},"tap [data-back]":function(t){this.back(s(t.currentTarget).attr("data-back"))},"tap [data-forward]":function(t){this.forward(s(t.currentTarget).attr("data-forward"))},"focus input":function(t){this.activeInput=t.target}},el:'<div class="screen" style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background:rgba(0,0,0,0);z-index:2000;display:none"></div><div class="viewport"></div><canvas class="imagecanvas"></canvas><input type="text" style="position:absolute;height:20px;top: -20px;left:0px;box-sizing: border-box;">',backGesture:!0,initialize:function(){var t=this,e="tap click touchend touchmove touchstart";t.mask=s(t.$el[0]).off(e).on(e,!1),t.el=t.$el[1],t.canvas=t.$el[2],t.$input=t.$el[3],t.history=[],t.backGesture&&x(this);var i=!1;s(window).on("back",function(){var e=location.hash;""==e||"#"===e||"/"===e||"#/"===e?i?a.exit():(i=!0,setTimeout(function(){i=!1},2e3),sl.tip("åæä¸æ¬¡éåºç¨åº")):t.back(t.history[t.history.length-2])})},start:function(e){var i=this,n=s(window),r=location.hash||"/",l=i.$el;i.queue=new u,e?(setTimeout(function(){l.appendTo(document.body),e.resolve()},e),e=new u):l.appendTo(document.body),i.$el=s(i.el),a.hasStatusBar&&i.$el.addClass("has_status_bar"),i.hash=r=b(r),i.historyPromise=(new u).resolve(),i.get(r,function(s){i.history.push(r),s.$el.appendTo(i.el),i._currentActivity=s,s.$el.transform(t("anim/"+s.toggleAnim).openEnterAnimationTo),s.then(e).then(function(){s.$el.addClass("active"),s.trigger("Appear").trigger("Show"),i.trigger("start"),i.queue.resolve()}),n.on("hashchange",function(){var e,t=i.hash=b(location.hash);i.hashChanged?(i.hashChanged=!1,i.historyPromise.resolve()):i.historyPromise.then(function(){e=f(i.history,t),-1==e?i.forward(t):i.back(t)})})}),n.one("load",function(){location.hash||(location.hash="/")})},_toggle:function(t,e,i){var s=this,n=s._currentActivity,a=t.url,r=e.isForward,l=e.duration||400;return s.navigate(a,r),n.path==t.path?(y(n,t),void s.queue.resolve()):(t.referrer=n.url,void s.get(t,function(o){s._currentActivity=o,T(n,o),y(o,t),o.then(function(){o.trigger("Appear")});var h,c="cubic-bezier(.34,.86,.54,.99)",u=w(r,n,o,e.toggleAnim);r&&(o.referrer=n.url,o.referrerDir=n.swipeRightForwardAction==a?"Left":"Right"),setTimeout(function(){o.finishEnterAnimation(),i&&i(o),s.queue.resolve()},l+48);for(var p=0,m=u.length;m>p;p++)h=u[p],h.ease=c,h.duration=l,h.el.css(d.transform(h.start).css).animate(h.css,l,c)}))},navigate:function(t,e){var i=this;i.historyPromise.then(function(){var s,n=t!==b(location.hash);if(i.hashChanged=n,e)i.history.push(t),n&&(location.hash=t);else if(s=f(i.history,t),-1==s)i.history.length=0,i.history.push(t),n&&(location.hash=t);else{var a=s+1-i.history.length;n&&a&&history.go(a),i.history.length=s+1}return n?this:null})},forward:function(t,e){var i=this.route.match(t);i&&this.queue.then(function(){var t=this._currentActivity;return(e||(e={})).isForward=!0,this._toggle(i,e,function(){t.trigger("Pause")}),this.queue},this)},back:function(t,e){var i=this.route.match(t);i&&this.queue.then(function(){var t=this._currentActivity;return(e||(e={})).isForward=!1,this._toggle(i,e,function(){t.destroy()}),this.queue},this)}});return A});define("core/activity",["./page","util","widget/scroll","widget/dialog"],function(t,e,i){var s=t("./page"),n=t("util"),a=t("widget/scroll"),r=t("widget/dialog"),o=(Array.prototype.slice,s.extend({toggleAnim:"def",onHtmlLoad:function(){var t=this;if(!t.swipeRightBackAction){var e=t.$("header [data-back]");e.length&&(t.swipeRightBackAction=e.attr("data-back")||"/")}t._scrolls=a.bind(t.$(".scrollview"))},onLoad:n.noop,initialize:function(){this.on("Create",this.onHtmlLoad),this.one("Show",this.onLoad),this.on("Destroy",this._onDestroy),s.prototype.initialize.apply(this,arguments)},_onDestroy:function(){this._scrolls&&$.each(this._scrolls,function(t,e){e.destory()}),this.application.remove(this.url)},isExiting:!1,startExit:function(){var t=this;if(!t.isExiting){t.isExiting=!0;var e=t.application;e.activeInput&&(e.activeInput.blur(),e.activeInput=null),e.mask.show(),t.$el.removeClass("active")}},finishEnterAnimation:function(){var t=this;t.application.mask.hide(),t.isExiting=!1,t.then(function(){t.$el.addClass("active"),t.trigger("Show")})},prompt:function(t,e,i){i="function"==typeof e?e:i,e="function"==typeof e?"":e;var s=this._prompt;s||(this._prompt=s=this.createDialog("prompt",{top:"25%",content:'<input type="text" class="prompt-text" />',buttons:[{text:"åæ¶",click:function(){this.hide()}},{text:"ç¡®è®¤",click:function(){this.hide(),this.ok&&this.ok(this.$input.val())}}]}),s.$input=s.$(".prompt-text")),s.title(t||"è¯·è¾å¥").show(),s.$input.val(e).focus(),s.ok=$.proxy(i,this)},confirm:function(t,e,i){"function"==typeof e&&(i=e,e=t,t="æç¤º");var s=this._confirm;s||(this._confirm=s=this.createDialog("confirm",{buttons:[{text:"åæ¶",click:function(){this.hide()}},{text:"ç¡®è®¤",click:function(){this.hide(),this.ok&&this.ok()}}]})),s.title(t).show(),s.content(e),s.ok=$.proxy(i,this)},createDialog:function(t,e){var i=this,s=new r(e);return i.bindQueryAction(t,s,{show:"show","":"hide"}),s},forward:function(t,e,i){this.application.forward(t,e,i)},back:function(t,e,i){this.application.back(t,e,i)}}));return o});define("core/touch",["$","util","animation","./event"],function(t,e,i){var s=t("$"),a=(t("util"),t("animation")),r=t("./event"),o=(Array.prototype.slice,function(t,e,i){var n=this,a=s(t);n.$el=a,n.el=a[0],n.options=e||{},n.ctx=i||n,a.on("touchstart",s.proxy(n._start,n)).on("touchmove",s.proxy(n._move,n)).on("touchend",s.proxy(n._end,n)),n.options.stop&&n.on("stop",n.options.stop,n.ctx)});return o.prototype={minDelta:0,on:r.on,trigger:r.trigger,_stopMomentum:function(){return this.momentum?(this.momentum.stop&&this.momentum.stop(),this._isClickStopAni=!0,!0):!1},_start:function(t){var e=this,i=t.touches[0];e.pointX=e.startX=e.sx=i.pageX,e.pointY=e.startY=e.sy=i.pageY,e.isTouchStop=!1,e.isTouchStart=!1,e.isTouchMoved=!1,e.startTime=t.timeStamp||Date.now(),e.isClickStopMomentum=e._stopMomentum()},_move:function(t){if(!this.isTouchStop){var e=this,i=t.touches[0],s=e.startX-i.pageX,n=e.startY-i.pageY,a=t.timeStamp||Date.now();if(e.deltaX=s,e.deltaY=n,e.dx=e.sx-i.pageX,e.dy=e.sy-i.pageY,!e.isTouchStart){var r=Math.abs(s)>=e.minDelta&&Math.abs(s)>Math.abs(n),l=!r;if(!l&&!r)return!1;if(e.isTouchStart=!0,e.isDirectionY=l,e.isDirectionX=r,e.dir=r,e.isInit||(e.options.init&&e.options.init.call(e.ctx),e.isInit=!0),e.options.start.call(e.ctx),e.isTouchStop)return}return e.options.move.call(e.ctx,s,n),e.isTouchMoved=!0,e.isMoveLeft=e.pointX-i.pageX>0?!0:e.pointX==i.pageX?e.isMoveLeft:!1,e.isMoveTop=e.pointY-i.pageY>0?!0:e.pointY==i.pageY?e.isMoveTop:!1,e.pointX=i.pageX,e.pointY=i.pageY,a-e.startTime>300&&(e.startTime=a,e.startX=i.pageX,e.startY=i.pageY,e.options.resetStartTime&&e.options.resetStartTime.call(e.ctx)),!1}},stop:function(){this.isTouchStop=!0},addMomentumOptions:function(t,e,i,s,n,a){return this.momentumOptions.push([t||0,e||0,this.duration,i||0,s||0,n||0,a]),this},_momentum:function(){this.options.momentum&&this.options.momentum.apply(this.ctx,arguments)},_stop:function(){this.momentum=null,this._isClickStopAni=!1,this.trigger("stop")},_end:function(t){var e=this;if((!e.isTouchMoved||e.isTouchStop)&&e._isClickStopAni)return e.momentum.finish(),e._isClickStopAni=!1,void(t.cancelTap=!0);if(e.isTouchMoved&&(e.isTouchMoved=!1,!e.isTouchStop)){e.isTouchStop=!0,s(t.target).trigger("touchcancel");var r=(t.changedTouches[0],(t.timeStamp||Date.now())-e.startTime);return e.duration=r,300>r||!e.momentum?(e.momentumOptions=[],e.options.beforeMomentum&&e.options.beforeMomentum.call(e.ctx,r),e.momentum=a.momentum(e.momentumOptions,e.options.maxDuration,e._momentum,e.options.ease||"ease",e._stop,e)):e.momentum.finish(),!1}},destory:function(){this.$el.off("touchstart",this._start).off("touchmove",this._move).off("touchend",this._end)}},o});define("widget/scrollview",["$","core/animation","core/event","core/touch","util"],function(t,e,i){var s=t("$"),a=(t("core/animation"),t("core/event")),r=t("core/touch"),o=(t("util"),function(t){return s('<div class="sl_scroller" style="width:100%;"></div>').append(t.children()).appendTo(t.html(""))}),d=function(t,e){var i=this;i.options=e=s.extend({},i.options,e),i.$el=s(t).css({overflow:"hidden"}),i.el=i.$el[0],i.$scroller=o(i.$el),i.scroller=i.$scroller[0],i.touch=new r(i.$el,i,i)};d.prototype={options:{ease:"ease",hScroll:!0,vScroll:!0},off:a.off,on:a.on,trigger:a.trigger,init:function(){var t=this.$scroller.matrix();this.x=-t.tx,this.minX=0,this.y=-t.ty,this.minY=0},start:function(){var t=this,e=t.touch;return t.wrapperW=t.el.clientWidth,t.scrollW=t.scroller.offsetWidth,t.maxX=Math.max(t.scrollW-t.wrapperW,0),t._startLeft=t.startLeft=t.x,t.wrapperH=t.el.clientHeight,t.scrollH=t.scroller.offsetHeight,t.maxY=Math.max(t.scrollH-t.wrapperH,0),t._startTop=t.startTop=t.y,(!t.options.hScroll||t.wrapperW>=t.scrollW)&&e.isDirectionX||(!t.options.vScroll||t.wrapperH>=t.scrollH)&&e.isDirectionY?void e.stop():void 0},stop:function(){this.$el.triggerHandler("scrollStop",[0,this.y])},resetStartTime:function(){this.options.hScroll&&(this.startLeft=this.startLeft+this.touch.deltaX,this._startLeft=this.x),this.options.vScroll&&(this.startTop=this.startTop+this.touch.deltaY,this._startTop=this.y)},move:function(){if(this.options.hScroll){var t=this.startLeft+this.touch.deltaX;(t<this.minX||t>this.maxX)&&(t=this.options.vScroll?t<this.minX?this.minX:this.maxX:t<this.minX?t+(this.minX-t)/2:t+(this.maxX-t)/2),this.x=t}if(this.options.vScroll){var e=this.startTop+this.touch.deltaY;(e<this.minY||e>this.maxY)&&(e=e<this.minY?e+(this.minY-e)/2:e+(this.maxY-e)/2),this.y=e}this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},beforeMomentum:function(){this.touch.addMomentumOptions(this._startLeft,this.x,this.minX,this.maxX,this.wrapperW,this.divisorX).addMomentumOptions(this._startTop,this.y,this.minY,this.maxY,this.wrapperH)},momentum:function(t,e){this.x=t.current,this.y=e?e.current||0:0,this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},scrollTo:function(t,e,i){this.x=t>this.maxX?this.maxX:t<this.minX?this.minX:t,this.y=e>this.maxY?this.maxY:e<this.minY?this.minY:e;var s={"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"};i?this.$scroller.animate(s,i,"ease-out"):this.$scroller.css(s)},destory:function(){this.touch.destory()}},d.addScroller=o,i.exports=d});define("widget/scroll",["$","util","animation","./scrollview"],function(t,e,i){var s=t("$"),n=t("util"),r=(t("animation"),t("./scrollview")),l=function(t){var e=this;if(e.scrollView||0==e.parentNode.scrollTop){var i=t.touches[0],s=e.$.matrix();e.isStart=!1,e.isStop=!1,e.isMoved=!1,e.sy=e.oy=e.pointY=i.pageY,e.sx=i.pageX,e.st=s.ty,e.isLoading=e.isDataLoading}else e.isStop=!0},o=function(t){var e=this;if(!e.isStop){var i=t.touches[0],s=i.pageY-e.sy,n=i.pageX-e.sx;if(e.oy=e.pointY,e.pointY=i.pageY,!e.isStart&&(e.isStart=!0,Math.abs(n)>Math.abs(s)))return void(e.isStop=!0);var a=e.scrollView;return(a?a.y<=0:0==e.parentNode.scrollTop)&&s>0?(e.isMoved=!0,e.refreshAgain=!0,e.ty=e.st+.5*s,e.$.css({"-webkit-transform":"translate(0px,"+e.ty+"px) translateZ(0)"}),this.isLoading||e.$refresh.html(e.ty>70?"éæ¾å·æ°":"ä¸æå·æ°")):e.isStop=!0,e.isStop}},d=function(t){var e=this;if(e.isMoved){var i=t.changedTouches[0],s=e.ty,n=s>70?50:0,r=e.oy-i.pageY,l=function(){e.$.animate({"-webkit-transform":"translate(0px,"+n+"px) translateZ(0)"},300+-1*r,"cubic-bezier(.3,.78,.43,.95)",function(){e.refreshAgain=!1,e.isLoading||0==n||(e.isLoading=e.isDataLoading=!0,e.$refresh.html('<div class="dataloading"></div>'),e.$.triggerHandler("refresh"))})};return e.isMoved=!1,e.isLoading&&!e.isDataLoading&&(n=0),-5>r?e.$.animate({"-webkit-transform":"translate(0px,"+(s-1.5*r)+"px) translateZ(0)"},-1.5*r,"cubic-bezier(.3,.78,.43,.95)",l):l(),!1}},c=function(){var t=this,e=function(){if(t.$refresh.html("ä¸æå·æ°"),t.isDataLoading=!1,!t.refreshAgain){var e=t.$.matrix().ty,i=Math.max(e-50,0);t.$.animate({"-webkit-transform":"translate(0px,"+i+"px) translateZ(0)"},400,"cubic-bezier(.3,.78,.43,.95)")}};t.options.refresh.call(this,e,function(t){sl.tip("string"==typeof t?t:t.msg),e()})},u=function(t){var e=this,i=t.touches[0],s=+new Date;e.__sy=e.__pointY=e.__startY=i.pageY,e.__sx=i.pageX,e.__hasMomentum=!1,e.__isMoved=!1,e.__isStart=!1,e.__isStop=!1,e.__isScroll=s-e.__timestamp<=32},h=function(t){if(!this.__isStop){var e=this,i=t.touches[0],s=i.pageY,a=i.pageY-e.__sy,r=i.pageX-e.__sx;if(e.__oPointY=e.__pointY,e.__pointY=s,e.__isMoved=!0,e.__isScroll=!0,!e.__isStart){if(e.__isStart=!0,e.options.vScroll&&!e.options.hScroll&&Math.abs(r)>Math.abs(a)||!e.options.vScroll&&e.options.hScroll&&Math.abs(r)<Math.abs(a))return void(e.__isStop=!0);e.__isStop=!1}n.ios&&e.$refresh&&e.scrollTop<0&&(e.isRefresh=e.scrollTop<-70),t.stopPropagation(),e.__timestamp=+new Date}},p=function(t){t._stm&&clearTimeout(t._stm),t._stm=setTimeout(function(){t._stm=null,s(t).trigger("scrollStop",[0,t.scrollTop])},80)},m=function(){var t=this;t.__isScroll=!0,t.__timestamp=+new Date,(t.__hasMomentum||n.android)&&p(t)},f=function(t){var e=this,a=(s(e),t.changedTouches[0].pageY),r=Math.abs(e.__oPointY-a);n.ios&&5>r?(e._isStop=!1,p(e),e.__hasMomentum=!1):e.__hasMomentum=!0,t.cancelTap=e.__isScroll,e.__isScroll&&!e.__isStop&&t.stopPropagation(),e.isRefresh&&(e.isRefresh=!1,e.$refresh.html('<div class="dataloading"></div>'),e.$scroller.css({"-webkit-transform":"translate(0px,50px) translateZ(0)"}).triggerHandler("refresh"))};e.bind=function(t,e){e=s.extend({vScroll:!0,hScroll:!1},e);var i=[];return("string"==typeof t?s(t):t).each(function(){var p,t=this,a=s(t).addClass("scrollview");if(e&&e.useScroll||n.android&&parseFloat(n.osVersion<=2.3)?(p=new r(this,e),i.push(p)):(this.__timestamp=0,n.ios?a.css({"-webkit-overflow-scrolling":"touch",overflowY:e.vScroll?"scroll":"",overflowX:e.hScroll?"scroll":""}):n.android&&a.css({overflowY:e.vScroll?"auto":"",overflowX:e.hScroll?"auto":""}),a.on("scroll",m).on("touchstart",u).on("touchmove",h).on("touchend",f).each(function(){this._scrollTop=0,this.options=e}),i.push({destory:function(){a.off("touchstart",u).off("touchmove",h).off("touchend",f).off("scroll",m)}})),n.isInApp&&a.on("focus","input:not(readonly),textarea:not(readonly)",function(e){var i=e.currentTarget,n=0;do n+=i.offsetTop,i=i.offsetParent;while(i&&t!=i&&!s.contains(i,t));var a=n-(window.innerHeight/4-60);p?p.scrollTo(p.x,a):t.scrollTop=a}),e&&e.refresh){var v=a.children(".sl_scroller"),g=s('<div class="refresh" style="height:50px;text-align:center;line-height:50px;">ä¸æå·æ°</div>');v.length||(v=r.addScroller(a));var _=v[0];_.$refresh=g,_.$=v,_.options=e,p&&(_.scrollView=p),v.css({marginTop:-50}).prepend(g).on("touchstart",l).on("touchmove",o).on("touchend",d).on("refresh",c),this.$refresh=g,this.$scroller=v}}),i}});define("widget/tip",["$","util","core/promise"],function(t,e){var i=t("$"),n=(t("util"),t("core/promise")),a=i('<div class="tip" style="display:none"></div>').on(i.fx.transitionEnd,function(){a.hasClass("tip-hide")&&a.hide()}).appendTo(document.body);e.promise=n.resolve(),e.msec=2e3,e.show=function(){a.hasClass("tip-show")||a.removeClass("tip-hide").show().addClass("tip-show")},e.msg=function(t){var e=this;e.promise.then(function(){return a.html(t),e.show(),setTimeout(function(){e.hide(),e.promise.resolve()},e.msec),this})},e.hide=function(){a.removeClass("tip-show").addClass("tip-hide")},sl.tip=function(t){e.msg(t)}});define("widget/dialog",["$","util","./../core/base","./../core/view"],function(t,e,i){var s=t("$"),n=t("util"),a=t("./../core/view"),r=null,l=a.extend({events:{"click .js_dialog_btn":"action","tap .js_close_dialog":function(){this.hide()},touchmove:function(t){t.preventDefault()}},className:"dialog",el:"<div></div>",template:n.template('<%if(isShowClose){%><div class="dialog-close js_close_dialog"></div><%}%><%if(isShowTitle){%><div class="dialog-title"><h3 class="js_title"><%=title%></h3></div><%}%><div class="dialog-content js_content"><%=content%></div><div class="dialog-btns"><%for(var i=0,len=buttons.length,button;i<len;i++){button=buttons[i];%><a class="dialog-btn js_dialog_btn<%=button.className?" "+button.className:" "%>"><%=button.text%></a><%}%></div>'),options:{isShowClose:!1,isShowTitle:!0,title:null,content:null,buttons:[]},title:function(t){return"undefined"==typeof t?this.$title.html():(this.$title.html(t),this)},initialize:function(){var t=this,e=n.pick(t.options,["top","isShowClose","isShowTitle","title","content","buttons"]);t.$el.html(t.template(e)),t.$title=t.$(".js_title"),t.$content=t.$(".js_content")},action:function(t){this.options.buttons[s(t.currentTarget).index()].click.call(this,t)},hide:function(){var t=this;t._visible&&(t._visible=!1,r.hide(),t.$el.css({"-webkit-transform":"scale(1)",opacity:1}).animate({opacity:0,scale:0},300,"ease-out",function(){t.$el.hide(),t.trigger("Hide")}))},show:function(){var t=this;t._visible||(t._visible=!0,r||(r=s('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: #888;opacity: 0.5;z-index:2000;display:none"></div>').appendTo(document.body)),r.show(),null==t.el.parentNode&&t.$el.appendTo(document.body),t.$el.css({"-webkit-transform":"",display:"block",top:this.options.top||"50%"}),t.$el.css({marginTop:this.$el.height()/-2,"-webkit-transform":"scale(0)",opacity:0}).animate({opacity:1,scale:1},300,"ease-out",function(){t.trigger("Show")}))},content:function(t){return"undefined"==typeof t?this.$content:void this.$content.html(t)}}),o=null;sl.prompt=function(t,e,i){e||(e=t,t="è¯·è¾å¥"),o?o.title(t):o=new l({title:t,content:'<input type="text" class="prompt-text" /><input type="password" class="prompt-text" />'}),o.$("input.prompt-text").val("").hide().filter('[type="'+(i||"text")+'"]').show(),o.options.onOk=function(){return e.call(this,this.$('input[type="'+(i||"text")+'"].prompt-text').val())},o.options.onCancel=function(){e.call(this)},o.show(),s(window).one("hashchange",function(){o.hide()})};var d=null;return sl.confirm=function(t,e,i,n){var a={};s.isPlainObject(t)?(n=i,i=e,s.extend(a,t)):s.isFunction(e)?(n=i,i=e,a.content=t,a.title="ç¡®è®¤æç¤º"):(a.title=t,a.content=e),d?(d.title(a.title),d.$(".dialog-content").html(a.content),d.$(".js_hide").html(a.cancelText||"åæ¶"),d.$(".js_ok").html(a.okText||"ç¡®å®")):d=new l(a),d.options.onOk=function(){i.call(this)},d.options.onCancel=function(){n&&n.call(this)},d.show(),s(window).one("hashchange",function(){d.hide()})},l});define("util/barcode",["util"],function(t,e,i){var s=t("util");e.code93=function(t){t=t.toUpperCase();for(var e=[["0","100010100"],["1","101001000"],["2","101000100"],["3","101000010"],["4","100101000"],["5","100100100"],["6","100100010"],["7","101010000"],["8","100010010"],["9","100001010"],["A","110101000"],["B","110100100"],["C","110100010"],["D","110010100"],["E","110010010"],["F","110001010"],["G","101101000"],["H","101100100"],["I","101100010"],["J","100110100"],["K","100011010"],["L","101011000"],["M","101001100"],["N","101000110"],["O","100101100"],["P","100010110"],["Q","110110100"],["R","110110010"],["S","110101100"],["T","110100110"],["U","110010110"],["V","110011010"],["W","101101100"],["X","101100110"],["Y","100110110"],["Z","100111010"],["-","100101110"],[".","111010100"],[" ","111010010"],["$","111001010"],["/","101101110"],["+","101101110"],["%","110101110"],["SHIFT0","100100110"],["SHIFT1","111011010"],["SHIFT2","111010110"],["SHIFT3","100110010"],["START","101011110"]],i=e[e.length-1][1],n=i+"1",a=0,r=0,l=i,o=0;o<t.length;o++){var d=t[o],c=s.indexOf(e,function(t){return t[0]==d}),u=t.length-o%20,h=t.length-o%15;a+=c*u,r+=c*(h+1),l+=e[c][1]}var p=a%47;return a=e[p][1],r+=p,r=e[r%47][1],l+a+r+n}});define("widget/loading",["$","util","bridge","./../core/view"],function(t,e,i){var s=t("$"),n=t("util"),r=(t("./../core/view"),t("bridge")),l=[],o=["$el","method","headers","dataType","xhrFields","beforeSend","success","complete","pageIndex","pageSize","append","$content","$scroll","checkData","check","hasData","KEY_PAGE","KEY_PAGESIZE","DATAKEY_TOTAL"],d=function(t){s.extend(this,n.pick(t,o)),t.el&&(this.$el=s(t.el)),this.el=this.$el[0],this.params=t.params||{},this.error=t.error||this.showError,this.$content=t.$content||this.$el,this.$scroll=t.$scroll||this.$el,this.pageEnabled=!(!t.pageEnabled&&!this.append),this.isShowLoading=t.showLoading!==!1,this.setUrl(t.url)};d.prototype={KEY_PAGE:"page",KEY_PAGESIZE:"pageSize",DATAKEY_MSG:"msg",DATAKEY_TOTAL:"total",DATAKEY_PAGENUM:"",method:"POST",dataType:"json",pageIndex:1,pageSize:10,template:'<div class="dataloading"></div>',refresh:'<div class="refreshing"><p class="msg js_msg"></p><p class="loading js_loading"></p></div>',errorTemplate:'<div class="server_error"><i class="msg js_msg"></i><i class="ico_reload js_reload"></i></div>',check:function(t){var e=!(!t||!t.success);return e},hasData:function(t){return t.data&&t.data.length},showMsg:function(t){1==this.pageIndex?(this.$loading.find(".js_msg").show().html(t),this.$loading.show().find(".js_loading").hide()):(this.$refreshing.find(".js_msg").show().html(t),this.$refreshing.show().find(".js_loading").hide())},complete:n.noop,showError:function(t){var e=this;if(1==this.pageIndex){this.$loading.animate({opacity:0},300,"ease-out",function(){e.$loading.hide().css({opacity:""})});var i=e.$error||(e.$error=s(e.errorTemplate).on("tap",".js_reload",s.proxy(e.reload,e)).appendTo(e.$el));"string"==typeof t&&(t={msg:t,showReload:!0});var n=i.find(".js_reload");t.showReload?n.show():n.hide(),i.find(".js_msg").html(t.msg||"å è½½å¤±è´¥"),i.show()}else e.showMsg('<div class="data-reload js_reload">å è½½å¤±è´¥ï¼è¯·ç¹å»éè¯<i class="i-refresh"></i></div>')},showLoading:function(){var e,t=this;this.$error&&this.$error.hide(),1==t.pageIndex?(t.$loading||(t.$loading=s(t.template)),t.$loading.show().appendTo(t.$el)[0].clientHeight,t.$loading.addClass("show"),t.$refreshing&&t.$refreshing.hide()):(e=this.$refreshing,e.show().find(".js_msg").html("æ­£å¨è½½å¥..."),e.find(".js_loading").show(),t.$loading&&t.$loading.hide())},hideLoading:function(){this.$error&&this.$error.hide(),this.$refreshing&&this.$refreshing.hide(),this.$loading.removeClass("show")},setHeaders:function(t,e){var i;e?(i={})[t]=e:i=t,void 0===this.headers&&(this.headers={});for(var s in i)this.headers[s]=i[s];return this},setParam:function(t,e){var i;e?(i={})[t]=e:i=t;for(var s in i)e=i[s],s==this.KEY_PAGE?this.pageIndex=e:s==this.KEY_PAGESIZE?this.pageSize=e:this.params[s]=e;return this},getParam:function(t){return t?this.params[t]:this.params},setUrl:function(t){return this.url=r.url(t),this},reload:function(t,e){this.isLoading||this.setParam(this.KEY_PAGE,1).load(t,e)},load:function(t,e){var i=this;if(!(i.beforeSend&&i.beforeSend()===!1||i.isLoading)){i.isLoading=!0,"function"==typeof t&&(e=t,t=null),i.pageEnabled&&(i.params[i.KEY_PAGE]=i.pageIndex,i.params[i.KEY_PAGESIZE]=i.pageSize);for(var n=l.length-1;n>=0;n--)l[n].disableAutoRefreshing();t&&void 0!==t.showLoading&&(i.isShowLoading=t.showLoading),i.isShowLoading&&i.showLoading(),i._xhr=s.ajax({url:i.url,headers:i.headers,xhrFields:i.xhrFields,data:i.params,type:i.method,dataType:i.dataType,cache:!1,error:function(t){i.isShowLoading&&i.hideLoading();var s={};s[i.DATAKEY_MSG]="ç½ç»éè¯¯",i.error(s,t),e&&e.call(i,s,null)},success:function(t,s,n){i.isShowLoading&&i.hideLoading(),!i.check||i.check(t)?i.checkData===!1||i.hasData(t)?(1!=i.pageIndex&&i.append?i.append(t,s,n):i.success(t,s,n),e&&e.call(i,null,t),i.append&&i.checkAutoRefreshing(t)):i.dataNotFound(t):(i.error(t),e&&e.call(i,t,null))},complete:function(){i._xhr=null,i.isLoading=!1,i.complete()}})}},_refresh:function(){this.abort().load()},dataNotFound:function(t,e){var i=this;1==i.pageIndex?i.showError("ææ æ°æ®"):setTimeout(function(){i.$refreshing.hide()},3e3)},_scroll:function(t,e,i){var s=this;!s.isLoading&&s._scrollY<i&&i+s.$scroll.height()>=s.$refreshing[0].offsetTop&&s._refresh(),s._scrollY=i},_autoRefreshingEnabled:!1,checkAutoRefreshing:function(t){var e=this,i=e.params;e.append&&(e.DATAKEY_PAGENUM&&t[e.DATAKEY_PAGENUM]&&t[e.DATAKEY_PAGENUM]>i[e.KEY_PAGE]||e.DATAKEY_TOTAL&&t[e.DATAKEY_TOTAL]&&t[e.DATAKEY_TOTAL]>i[e.KEY_PAGE]*i[e.KEY_PAGESIZE])?(e.pageIndex++,e.enableAutoRefreshing()):e.disableAutoRefreshing()},enableAutoRefreshing:function(){(this.$refreshing||(this.$refreshing=s(this.refresh)).appendTo(this.$content)).show();this._autoRefreshingEnabled||(this._autoRefreshingEnabled=!0,this.$scroll.on("scrollStop",s.proxy(this._scroll,this)),this._scrollY=this.el.scrollTop,this.el.scrollTop+this.$scroll.height()>=this.$refreshing[0].offsetTop&&this._refresh())},disableAutoRefreshing:function(){this._autoRefreshingEnabled&&(this._autoRefreshingEnabled=!1,this.$scroll.off("scrollStop",this._scroll),this.$refreshing&&this.$refreshing.hide())},abort:function(){return this._xhr&&(this.isLoad=!1,this._xhr.abort(),this._xhr=null,this.hideLoading()),this},destory:function(){this.abort(),this.disableAutoRefreshing(),this.$error&&this.$error.off("tap",".js_reload",this.reload)}},d.extend=n.extend,i.exports=d});define("widget/slider",["$","util","./scrollview"],function(t,e,i){var s=t("$"),n=t("util"),a=t("./scrollview"),r=function(t,e){e=s.extend({maxDuration:400,ease:"ease-out",hScroll:!0,vScroll:!1,width:"100%",index:0,autoLoop:!1,align:"center"},e),s.extend(this,n.pick(e,["width","loop","render","template","itemTemplate","navTemplate"]));var d,i=this,r=e.data;"string"==typeof i.itemTemplate&&(i.itemTemplate=n.template(i.itemTemplate)),"string"==typeof i.width&&(i.width=parseInt(i.width.replace("%",""))),void 0!=e.index&&(e.index=e.index),a.call(this,s(i.template({items:"",navs:""})).appendTo(s(t)),e),e=this.options,i.touch.on("stop",i.stop,i),d=i.$slider=i.$el.find(".js_slider"),e.imagelazyload&&(i.bind("Change",function(){i._loadImage()}),i._loadImage()),e.arrow&&(i._prev=s('<span class="slider-pre js_pre"></span>').appendTo(i.$el),i._next=s('<span class="slider-next js_next"></span>').appendTo(i.$el),i.$el.on("tap",".js_pre",function(t){i.index(e.index-1,300)}).on("tap",".js_next",function(t){i.index(e.index+1,300)})),s(window).on("ortchange",s.proxy(i._adjustWidth,i)),i.set(r),e.autoLoop&&i.startAutoLoop(),i.$el.css({overflow:""})};s.extend(r.prototype,a.prototype,{loop:!1,set:function(t){var n,e=this,i="",a=e.options;s.isArray(t)||(t=[t]),e._data=t,e.length=t.length;for(var r=0,o=t.length;o>r;r++)i+=e.render(t[r]);n=e.$slider.html(i),e.$items=n.children(),e.slider=n[0],e.length<2?e.loop=!1:e.width<100&&(e.loop=!1);var l;e.loop?(n.prepend(e.$items.eq(e.length-1).clone()),n.append(e.$items.eq(0).clone()),e.$items=n.children(),a.index++):l=e.length,e._adjustWidth(),e.index(a.index)},startAutoLoop:function(){var t=this;t.loopTimer||(t.loopTimer=setTimeout(function(){t.index(t.options.index+1),t.loopTimer=setTimeout(arguments.callee,t.options.autoLoop)},t.options.autoLoop))},stopAutoLoop:function(){clearTimeout(this.loopTimer),this.loopTimer=null},start:function(){var t=this,e=t.touch,i=this._getIndex();return!t.options.hScroll&&e.isDirectionX||!t.options.vScroll&&e.isDirectionY?void e.stop():(t.maxX=Math.min(t.scrollerW-t.wrapperW,Math.min(i+1,t.loop?i+1:t.length-Math.floor(t.containerW/t.wrapperW))*t.wrapperW),t.minX=Math.max(0,(i-1)*t.wrapperW),t._startLeft=t.startLeft=t.x,void t.stopAutoLoop())},index:function(t,e){var s,i=this.options;return"undefined"==typeof t?i.index:(t=t>=this.$items.length?0:0>t?this.$items.length-1:t,this.loop&&(0==t?(t=this.$items.length-2,this.maxX=s=t*this.wrapperW):t==this.$items.length-1&&(t=1,this.minX=s=t*this.wrapperW)),i.index!=t&&(this.currentData=this._data[this.loop?t-1:t],i.index=t,this._change()),s=t*this.wrapperW,void this.scrollTo(s,0,e))},_getIndex:function(){var t=Math.round(this.x/this.wrapperW);return t},data:function(t){return this._data[t||this.options.index]},appendItem:function(){var t=s(this.renderItem(""));return this.$slider.append(t),this.length++,this._adjustWidth(),t},prependItem:function(){var t=s(this.renderItem(""));return this.$slider.prepend(t),this.length++,this._adjustWidth(),t},render:function(t){return this.renderItem(this.itemTemplate(t))},renderItem:n.template('<li class="js_slide_item slider-item"><%=$data%></li>'),itemTemplate:"<%= %>",navTemplate:n.template('<ol class="js_slide_navs slider-nav"><%for(var i=0,len=items.length;i<len;i++){%><li class="slide-nav-item <%=current%> slide-nav-item"></li><%}%></ol>'),template:n.template('<div class="slider"><ul class="js_slider slider-con"><%=items%></ul><%=navs%></div>'),stop:function(){var t=this,i=(t.x,this._getIndex());t.index(i),t.options.autoLoop&&t.startAutoLoop()},_loadImage:function(){var t=this,e=t.$items.eq(t.options.index);e.prop("_detected")||(t.loop&&(1==t.options.index?e=e.add(t.$slider.children(":last-child")):t.options.index==t.length+1&&(e=e.add(t.$slider.children(":first-child")))),e.find("img[lazyload]").each(function(){this.src=this.getAttribute("lazyload"),this.removeAttribute("lazyload")}),e.prop("_detected",!0))},_adjustWidth:function(){var t=this,e=t.$slider,i=e.children(),s=i.length;t.containerW=t.el.clientWidth,t.wrapperW=t.containerW*t.width/100,t.scrollerW=t.wrapperW*s,e.css({width:s*t.width+"%",marginLeft:"center"==this.options.align?(100-t.width)/2+"%":"0%"}),t.x=t.wrapperW*t.options.index,t.$scroller.css({"-webkit-transform":"translate("+-t.x+"px,0px) translateZ(0)"}),t.divisorX=t.wrapperW,i.css({width:100/s+"%"})},_change:function(){var t=this,e=t.options;t.loop?e.index-1:e.index;e.onChange&&e.onChange.call(t,e.index),t.trigger("change",e.index,t.currentData)},destory:function(){s(window).off("ortchange",this._adjustWidth),that.$el.off("tap"),this.touch.destory()}}),i.exports=r});define("widget/selector",["$","util","./scrollview"],function(t,e,i){var s=t("$"),n=t("util"),a=t("./scrollview"),r=function(t){a.call(this,this.el,t),s.extend(this,n.pick(t,["itemHeight","template"])),"string"==typeof this.template&&(this.template=n.template(this.template)),t=this.options;var i=t.data||[];t.onChange&&this.on("Change",t.onChange),this.$scroller.addClass("selectorcon"),this.$content=s("<ul></ul>").appendTo(this.$scroller),this.set(i),t.value&&this.val(t.value)};r.prototype=Object.create(a.prototype),s.extend(r.prototype,{options:{bounce:!1,hScroll:!1,vScroll:!0},init:function(){},el:"<div></div>",template:n.template("<li><%=text%></li>"),set:function(t){var e=this,i="";return s.each(t,function(t,s){i+=e.template(s)}),this.data=t,this.selectedData=t&&t.length?t[0]:{},this.$content.html(i),this.index(0)},beforeMomentum:function(){this.touch.addMomentumOptions(this._startTop,this.y,this.minY,this.maxY,this.wrapperH,this.itemHeight)},momentum:function(t){this.y=t.current,this.$scroller.css({"-webkit-transform":"translate("+-this.x+"px,"+-this.y+"px) translateZ(0)"})},stop:function(){this.index(Math.round(this.y/this.itemHeight))},itemHeight:30,minDelta:0,_index:0,index:function(t){if("undefined"==typeof t)return this._index;if(t>=this.data.length&&(t=this.data.length-1),-1!=t&&this._index!=t){this.selectedData=this.data[t],this.trigger("Change",t,this.selectedData),this._index=t;var e=t*this.itemHeight;e!=this.y&&this.scrollTo(0,e,200)}return this},val:function(t){if("undefined"==typeof t)return this.selectedData.value;var e=n.indexOf(this.data,function(e){return e.value==t});this.index(e)}});var o=function(t){t=s.extend({complete:function(){},options:[]},t);var e=this,i=s('<div style="position:fixed;top:0px;bottom:0px;left:0px;right:0px;width:100%;background: rgba(0,0,0,0);z-index:1000;display:none;overflow:hidden;"></div>').on("touchmove",!1).appendTo("body");this.$container=i,this.$mask=s('<div style="position:fixed;top:0px;bottom:0px;right:0px;width:100%;background: rgba(0,0,0,.3);z-index:999;display:none"></div>').appendTo("body"),this.$el=s('<div class="selectorwrap" style="display:none"><div class="selectorbar"><b class="js_click">å®æ</b></div><div class="selector"></div></div>').appendTo(i),this.$selector=this.$el.find(".selector"),this.selectors=[],i.on("tap",function(t){t.target===i[0]&&e.hide()}),s.isArray(t.options)||(t.options=[t.options]),s.each(t.options,function(t,i){e.add(i)}),this.$el.on(s.fx.transitionEnd,function(){e._visible=e.$el.hasClass("show"),e._visible?e.each(function(){this.scrollTo(0,this._index*this.itemHeight)}):(e.$el.hide(),e.$container.hide())}),this.$click=this.$el.find(".js_click").on("tap",function(){var i=[];s.each(e.selectors,function(t,e){i.push(e.selectedData)}),t.complete&&t.complete.call(e,i),e.hide()})};return o.prototype={_visible:!1,eq:function(t){return this.selectors[t]},each:function(t){s.each(this.selectors,t)},add:function(t){var e=new r(t);this.selectors.push(e),this.$selector.append(e.$el)},hide:function(){var t=this;return this._visible&&(t.$mask.animate({backgroundColor:"rgba(0,0,0,0)"},350,function(){t.$mask.hide().css({backgroundColor:"rgba(0,0,0,.3)"})}),this.$el.removeClass("show")),t},show:function(){var t=this;if(!t._visible){var e=t.$selector.find(".sl_scroller").css({color:"#fff"});t.$container.show(),t.$mask.show(),t.$el.show(),e[0].clientHeight,t.$el.addClass("show"),e.animate({color:"#333"},100,"ease-out")}return t},destory:function(){this.$el.off(s.fx.transitionEnd),this.$click.off("click").off("tap"),this.$mask.remove(),this.$container.off("tap").remove()}},o});define("anim/def",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{translate:"99%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"-50%,0"},closeEnterAnimationTo:{translate:"0,0"},closeEnterAnimationFrom:{translate:"-50%,0"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"100%,0"}}}),define("anim/menu",function(){return{openEnterZIndex:1,closeEnterZIndex:2,openExitZIndex:3,closeExitZIndex:1,openEnterAnimationFrom:{translate:"-80%,0"},openEnterAnimationTo:{translate:"0,0"},openExitAnimationFrom:{translate:"0,0"},openExitAnimationTo:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationFrom:{translate:"70%,0",scale:".8,.8"},closeEnterAnimationTo:{translate:"0,0",scale:"1,1"},closeExitAnimationFrom:{translate:"0,0"},closeExitAnimationTo:{translate:"-80%,0"}}}),define("anim/dialog",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{scale:".3,.3",opacity:0},openEnterAnimationTo:{scale:"1,1",opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{scale:"1,1",translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{scale:"1,1",opacity:1},closeExitAnimationTo:{scale:".3,.3",opacity:0}}}),define("anim/fade",function(){return{openEnterZIndex:2,closeEnterZIndex:1,openExitZIndex:1,closeExitZIndex:3,openEnterAnimationFrom:{opacity:0},openEnterAnimationTo:{opacity:1},openExitAnimationFrom:{},openExitAnimationTo:{},closeEnterAnimationFrom:{translate:"0,0"},closeEnterAnimationTo:{},closeExitAnimationFrom:{opacity:1},closeExitAnimationTo:{opacity:0}}});